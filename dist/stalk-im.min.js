!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.io=t():e.io=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e,t){"object"===("undefined"==typeof e?"undefined":i(e))&&(t=e,e=void 0),t=t||{};var r,n=s(e),a=n.source,f=n.id,d=n.path,h=l[f]&&d in l[f].nsps,p=t.forceNew||t["force new connection"]||!1===t.multiplex||h;return p?(c("ignoring socket cache for %s",a),r=u(a,t)):(l[f]||(c("new io instance for %s",a),l[f]=u(a,t)),r=l[f]),n.query&&!t.query?t.query=n.query:t&&"object"===i(t.query)&&(t.query=o(t.query)),r.socket(n.path,t)}function o(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=r(1),a=r(6),u=r(13),c=r(3)("socket.io-client");e.exports=t=n;var l=t.managers={};t.protocol=a.protocol,t.connect=n,t.Manager=r(13),t.Socket=r(40)},function(e,t,r){(function(t){"use strict";function n(e,r){var n=e;r=r||t.location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e="undefined"!=typeof r?r.protocol+"//"+e:"https://"+e),i("parse %s",e),n=o(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var s=n.host.indexOf(":")!==-1,a=s?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}var o=r(2),i=r(3)("socket.io-client:url");e.exports=n}).call(t,function(){return this}())},function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),i=e.indexOf("]");o!=-1&&i!=-1&&(e=e.substring(0,o)+e.substring(o,i).replace(/:/g,";")+e.substring(i,e.length));for(var s=r.exec(e||""),a={},u=14;u--;)a[n[u]]=s[u]||"";return o!=-1&&i!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(e,t,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,n),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(r){}}function a(){var e;try{e=t.storage.debug}catch(r){}return e}function u(){try{return window.localStorage}catch(e){}}t=e.exports=r(4),t.log=i,t.formatArgs=o,t.save=s,t.load=a,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(a())},function(e,t,r){function n(){return t.colors[l++%t.colors.length]}function o(e){function r(){}function o(){var e=o,r=+new Date,i=r-(c||r);e.diff=i,e.prev=c,e.curr=r,c=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=n());var s=Array.prototype.slice.call(arguments);s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(r,n){if("%%"===r)return r;a++;var o=t.formatters[n];if("function"==typeof o){var i=s[a];r=o.call(e,i),s.splice(a,1),a--}return r}),"function"==typeof t.formatArgs&&(s=t.formatArgs.apply(e,s));var u=o.log||t.log||console.log.bind(console);u.apply(e,s)}r.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:r;return i.namespace=e,i}function i(e){t.save(e);for(var r=(e||"").split(/[\s,]+/),n=r.length,o=0;o<n;o++)r[o]&&(e=r[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function s(){t.enable("")}function a(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o,t.coerce=u,t.disable=s,t.enable=i,t.enabled=a,t.humanize=r(5),t.names=[],t.skips=[],t.formatters={};var c,l=0},function(e,t){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*l;case"days":case"day":case"d":return r*c;case"hours":case"hour":case"hrs":case"hr":case"h":return r*u;case"minutes":case"minute":case"mins":case"min":case"m":return r*a;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function n(e){return e>=c?Math.round(e/c)+"d":e>=u?Math.round(e/u)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return i(e,c,"day")||i(e,u,"hour")||i(e,a,"minute")||i(e,s,"second")||e+" ms"}function i(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var s=1e3,a=60*s,u=60*a,c=24*u,l=365.25*c;e.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?o(e):n(e)}},function(e,t,r){function n(){}function o(e){var r="",n=!1;return r+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(r+=e.attachments,r+="-"),e.nsp&&"/"!=e.nsp&&(n=!0,r+=e.nsp),null!=e.id&&(n&&(r+=",",n=!1),r+=e.id),null!=e.data&&(n&&(r+=","),r+=f.stringify(e.data)),l("encoded %j as %s",e,r),r}function i(e,t){function r(e){var r=h.deconstructPacket(e),n=o(r.packet),i=r.buffers;i.unshift(n),t(i)}h.removeBlobs(e,r)}function s(){this.reconstructor=null}function a(e){var r={},n=0;if(r.type=Number(e.charAt(0)),null==t.types[r.type])return c();if(t.BINARY_EVENT==r.type||t.BINARY_ACK==r.type){for(var o="";"-"!=e.charAt(++n)&&(o+=e.charAt(n),n!=e.length););if(o!=Number(o)||"-"!=e.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"==e.charAt(n+1))for(r.nsp="";++n;){var i=e.charAt(n);if(","==i)break;if(r.nsp+=i,n==e.length)break}else r.nsp="/";var s=e.charAt(n+1);if(""!==s&&Number(s)==s){for(r.id="";++n;){var i=e.charAt(n);if(null==i||Number(i)!=i){--n;break}if(r.id+=e.charAt(n),n==e.length)break}r.id=Number(r.id)}if(e.charAt(++n))try{r.data=f.parse(e.substr(n))}catch(a){return c()}return l("decoded %s as %j",e,r),r}function u(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:t.ERROR,data:"parser error"}}var l=r(3)("socket.io-parser"),f=r(7),d=(r(9),r(10)),h=r(11),p=r(12);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=n,t.Decoder=s,n.prototype.encode=function(e,r){if(l("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type)i(e,r);else{var n=o(e);r([n])}},d(s.prototype),s.prototype.add=function(e){var r;if("string"==typeof e)r=a(e),t.BINARY_EVENT==r.type||t.BINARY_ACK==r.type?(this.reconstructor=new u(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!p(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,this.emit("decoded",r))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=h.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,r){(function(e,r){var n=!1;(function(){function o(e,t){function r(e){if(r[e]!==v)return r[e];var o;if("bug-string-char-index"==e)o="a"!="a"[0];else if("json"==e)o=r("json-stringify")&&r("json-parse");else{var s,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u=t.stringify,l="function"==typeof u&&g;if(l){(s=function(){return 1}).toJSON=s;try{l="0"===u(0)&&"0"===u(new n)&&'""'==u(new i)&&u(b)===v&&u(v)===v&&u()===v&&"1"===u(s)&&"[1]"==u([s])&&"[null]"==u([v])&&"null"==u(null)&&"[null,null,null]"==u([v,b,null])&&u({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===u(null,s)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new c((-864e13)))&&'"+275760-09-13T00:00:00.000Z"'==u(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new c((-621987552e5)))&&'"1969-12-31T23:59:59.999Z"'==u(new c((-1)))}catch(f){l=!1}}o=l}if("json-parse"==e){var d=t.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){s=d(a);var h=5==s.a.length&&1===s.a[0];if(h){try{h=!d('"\t"')}catch(f){}if(h)try{h=1!==d("01")}catch(f){}if(h)try{h=1!==d("1.")}catch(f){}}}}catch(f){h=!1}o=h}}return r[e]=!!o}e||(e=u.Object()),t||(t=u.Object());var n=e.Number||u.Number,i=e.String||u.String,a=e.Object||u.Object,c=e.Date||u.Date,l=e.SyntaxError||u.SyntaxError,f=e.TypeError||u.TypeError,d=e.Math||u.Math,h=e.JSON||u.JSON;"object"==typeof h&&h&&(t.stringify=h.stringify,t.parse=h.parse);var p,y,v,_=a.prototype,b=_.toString,g=new c((-0xc782b5b800cec));try{g=g.getUTCFullYear()==-109252&&0===g.getUTCMonth()&&1===g.getUTCDate()&&10==g.getUTCHours()&&37==g.getUTCMinutes()&&6==g.getUTCSeconds()&&708==g.getUTCMilliseconds()}catch(m){}if(!r("json")){var k="[object Function]",C="[object Date]",w="[object Number]",j="[object String]",S="[object Array]",O="[object Boolean]",E=r("bug-string-char-index");if(!g)var A=d.floor,P=[0,31,59,90,120,151,181,212,243,273,304,334],T=function(e,t){return P[t]+365*(e-1970)+A((e-1969+(t=+(t>1)))/4)-A((e-1901+t)/100)+A((e-1601+t)/400)};if((p=_.hasOwnProperty)||(p=function(e){var t,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=b?p=function(e){var t=this.__proto__,r=e in(this.__proto__=null,this);return this.__proto__=t,r}:(t=r.constructor,p=function(e){var r=(this.constructor||t).prototype;return e in this&&!(e in r&&this[e]===r[e])}),r=null,p.call(this,e)}),y=function(e,t){var r,n,o,i=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,n=new r;for(o in n)p.call(n,o)&&i++;return r=n=null,i?y=2==i?function(e,t){var r,n={},o=b.call(e)==k;for(r in e)o&&"prototype"==r||p.call(n,r)||!(n[r]=1)||!p.call(e,r)||t(r)}:function(e,t){var r,n,o=b.call(e)==k;for(r in e)o&&"prototype"==r||!p.call(e,r)||(n="constructor"===r)||t(r);(n||p.call(e,r="constructor"))&&t(r)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],y=function(e,t){var r,o,i=b.call(e)==k,a=!i&&"function"!=typeof e.constructor&&s[typeof e.hasOwnProperty]&&e.hasOwnProperty||p;for(r in e)i&&"prototype"==r||!a.call(e,r)||t(r);for(o=n.length;r=n[--o];a.call(e,r)&&t(r));}),y(e,t)},!r("json-stringify")){var N={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},I="000000",R=function(e,t){return(I+(t||0)).slice(-e)},x="\\u00",M=function(e){for(var t='"',r=0,n=e.length,o=!E||n>10,i=o&&(E?e.split(""):e);r<n;r++){var s=e.charCodeAt(r);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=N[s];break;default:if(s<32){t+=x+R(2,s.toString(16));break}t+=o?i[r]:e.charAt(r)}}return t+'"'},U=function(e,t,r,n,o,i,s){var a,u,c,l,d,h,_,g,m,k,E,P,N,I,x,D;try{a=t[e]}catch(L){}if("object"==typeof a&&a)if(u=b.call(a),u!=C||p.call(a,"toJSON"))"function"==typeof a.toJSON&&(u!=w&&u!=j&&u!=S||p.call(a,"toJSON"))&&(a=a.toJSON(e));else if(a>-1/0&&a<1/0){if(T){for(d=A(a/864e5),c=A(d/365.2425)+1970-1;T(c+1,0)<=d;c++);for(l=A((d-T(c,0))/30.42);T(c,l+1)<=d;l++);d=1+d-T(c,l),h=(a%864e5+864e5)%864e5,_=A(h/36e5)%24,g=A(h/6e4)%60,m=A(h/1e3)%60,k=h%1e3}else c=a.getUTCFullYear(),l=a.getUTCMonth(),d=a.getUTCDate(),_=a.getUTCHours(),g=a.getUTCMinutes(),m=a.getUTCSeconds(),k=a.getUTCMilliseconds();a=(c<=0||c>=1e4?(c<0?"-":"+")+R(6,c<0?-c:c):R(4,c))+"-"+R(2,l+1)+"-"+R(2,d)+"T"+R(2,_)+":"+R(2,g)+":"+R(2,m)+"."+R(3,k)+"Z"}else a=null;if(r&&(a=r.call(t,e,a)),null===a)return"null";if(u=b.call(a),u==O)return""+a;if(u==w)return a>-1/0&&a<1/0?""+a:"null";if(u==j)return M(""+a);if("object"==typeof a){for(I=s.length;I--;)if(s[I]===a)throw f();if(s.push(a),E=[],x=i,i+=o,u==S){for(N=0,I=a.length;N<I;N++)P=U(N,a,r,n,o,i,s),E.push(P===v?"null":P);D=E.length?o?"[\n"+i+E.join(",\n"+i)+"\n"+x+"]":"["+E.join(",")+"]":"[]"}else y(n||a,function(e){var t=U(e,a,r,n,o,i,s);t!==v&&E.push(M(e)+":"+(o?" ":"")+t)}),D=E.length?o?"{\n"+i+E.join(",\n"+i)+"\n"+x+"}":"{"+E.join(",")+"}":"{}";return s.pop(),D}};t.stringify=function(e,t,r){var n,o,i,a;if(s[typeof t]&&t)if((a=b.call(t))==k)o=t;else if(a==S){i={};for(var u,c=0,l=t.length;c<l;u=t[c++],a=b.call(u),(a==j||a==w)&&(i[u]=1));}if(r)if((a=b.call(r))==w){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else a==j&&(n=r.length<=10?r:r.slice(0,10));return U("",(u={},u[""]=e,u),o,i,n,"",[])}}if(!r("json-parse")){var D,L,B=i.fromCharCode,q={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},F=function(){throw D=L=null,l()},J=function(){for(var e,t,r,n,o,i=L,s=i.length;D<s;)switch(o=i.charCodeAt(D)){case 9:case 10:case 13:case 32:D++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=E?i.charAt(D):i[D],D++,e;case 34:for(e="@",D++;D<s;)if(o=i.charCodeAt(D),o<32)F();else if(92==o)switch(o=i.charCodeAt(++D)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=q[o],D++;break;case 117:for(t=++D,r=D+4;D<r;D++)o=i.charCodeAt(D),o>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||F();e+=B("0x"+i.slice(t,D));break;default:F()}else{if(34==o)break;for(o=i.charCodeAt(D),t=D;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++D);e+=i.slice(t,D)}if(34==i.charCodeAt(D))return D++,e;F();default:if(t=D,45==o&&(n=!0,o=i.charCodeAt(++D)),o>=48&&o<=57){for(48==o&&(o=i.charCodeAt(D+1),o>=48&&o<=57)&&F(),n=!1;D<s&&(o=i.charCodeAt(D),o>=48&&o<=57);D++);if(46==i.charCodeAt(D)){for(r=++D;r<s&&(o=i.charCodeAt(r),o>=48&&o<=57);r++);r==D&&F(),D=r}if(o=i.charCodeAt(D),101==o||69==o){for(o=i.charCodeAt(++D),43!=o&&45!=o||D++,r=D;r<s&&(o=i.charCodeAt(r),o>=48&&o<=57);r++);r==D&&F(),D=r}return+i.slice(t,D)}if(n&&F(),"true"==i.slice(D,D+4))return D+=4,!0;if("false"==i.slice(D,D+5))return D+=5,!1;if("null"==i.slice(D,D+4))return D+=4,null;F()}return"$"},K=function(e){var t,r;if("$"==e&&F(),"string"==typeof e){if("@"==(E?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=J(),"]"!=e;r||(r=!0))r&&(","==e?(e=J(),"]"==e&&F()):F()),","==e&&F(),t.push(K(e));return t}if("{"==e){for(t={};e=J(),"}"!=e;r||(r=!0))r&&(","==e?(e=J(),"}"==e&&F()):F()),","!=e&&"string"==typeof e&&"@"==(E?e.charAt(0):e[0])&&":"==J()||F(),t[e.slice(1)]=K(J());return t}F()}return e},W=function(e,t,r){var n=z(e,t,r);n===v?delete e[t]:e[t]=n},z=function(e,t,r){var n,o=e[t];if("object"==typeof o&&o)if(b.call(o)==S)for(n=o.length;n--;)W(o,n,r);else y(o,function(e){W(o,e,r)});return r.call(e,t,o)};t.parse=function(e,t){var r,n;return D=0,L=""+e,r=K(J()),"$"!=J()&&F(),D=L=null,t&&b.call(t)==k?z((n={},n[""]=r,n),"",t):r}}}return t.runInContext=o,t}var i="function"==typeof n&&n.amd,s={"function":!0,object:!0},a=s[typeof t]&&t&&!t.nodeType&&t,u=s[typeof window]&&window||this,c=a&&s[typeof e]&&e&&!e.nodeType&&"object"==typeof r&&r;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(u=c),a&&!i)o(u,a);else{var l=u.JSON,f=u.JSON3,d=!1,h=o(u,u.JSON3={noConflict:function(){return d||(d=!0,u.JSON=l,u.JSON3=f,l=f=null),h}});u.JSON={parse:h.parse,stringify:h.stringify}}i&&n(function(){return h})}).call(this)}).call(t,r(8)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t){function r(e){if(e)return n(e)}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){(function(e){var n=r(9),o=r(12);t.deconstructPacket=function(e){function t(e){if(!e)return e;if(o(e)){var i={_placeholder:!0,num:r.length};return r.push(e),i}if(n(e)){for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=t(e[a]);return s}if("object"==typeof e&&!(e instanceof Date)){var s={};for(var u in e)s[u]=t(e[u]);return s}return e}var r=[],i=e.data,s=e;return s.data=t(i),s.attachments=r.length,{packet:s,buffers:r}},t.reconstructPacket=function(e,t){function r(e){if(e&&e._placeholder){var o=t[e.num];return o}if(n(e)){for(var i=0;i<e.length;i++)e[i]=r(e[i]);return e}if(e&&"object"==typeof e){for(var s in e)e[s]=r(e[s]);return e}return e}return e.data=r(e.data),e.attachments=void 0,e},t.removeBlobs=function(t,r){function i(t,u,c){if(!t)return t;if(e.Blob&&t instanceof Blob||e.File&&t instanceof File){s++;var l=new FileReader;l.onload=function(){c?c[u]=this.result:a=this.result,--s||r(a)},l.readAsArrayBuffer(t)}else if(n(t))for(var f=0;f<t.length;f++)i(t[f],f,t);else if(t&&"object"==typeof t&&!o(t))for(var d in t)i(t[d],d,t)}var s=0,a=t;i(a),s||r(a)}}).call(t,function(){return this}())},function(e,t){(function(t){function r(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}e.exports=r}).call(t,function(){return this}())},function(e,t,r){"use strict";function n(e,t){return this instanceof n?(e&&"object"===("undefined"==typeof e?"undefined":o(e))&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new u.Encoder,this.decoder=new u.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new n(e,t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(14),s=r(40),a=r(41),u=r(6),c=r(43),l=r(44),f=r(3)("socket.io-client:manager"),d=r(38),h=r(46),p=Object.prototype.hasOwnProperty;e.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},n.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},a(n.prototype),n.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},n.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},n.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(e,t){if(f("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=i(this.uri,this.opts);var r=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=c(r,"open",function(){n.onopen(),e&&e()}),s=c(r,"error",function(t){if(f("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;f("connect attempt will timeout after %d",a);var u=setTimeout(function(){f("connect attempt timed out after %d",a),o.destroy(),r.close(),r.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(o),this.subs.push(s),this},n.prototype.onopen=function(){f("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",l(this,"ondata"))),this.subs.push(c(e,"ping",l(this,"onping"))),this.subs.push(c(e,"pong",l(this,"onpong"))),this.subs.push(c(e,"error",l(this,"onerror"))),this.subs.push(c(e,"close",l(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",l(this,"ondecoded")))},n.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},n.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},n.prototype.ondata=function(e){this.decoder.add(e)},n.prototype.ondecoded=function(e){this.emit("packet",e)},n.prototype.onerror=function(e){f("error",e),this.emitAll("error",e)},n.prototype.socket=function(e,t){function r(){~d(o.connecting,n)||o.connecting.push(n)}var n=this.nsps[e];if(!n){n=new s(this,e,t),this.nsps[e]=n;var o=this;n.on("connecting",r),n.on("connect",function(){n.id=o.engine.id}),this.autoConnect&&r()}return n},n.prototype.destroy=function(e){var t=d(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},n.prototype.packet=function(e){f("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},n.prototype.cleanup=function(){f("cleanup");for(var e=this.subs.length,t=0;t<e;t++){var r=this.subs.shift();r.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){f("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(e){f("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();f("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout(function(){e.skipReconnect||(f("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(f("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(f("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(r)}})}},n.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,r){e.exports=r(15)},function(e,t,r){e.exports=r(16),e.exports.parser=r(23)},function(e,t,r){(function(t){function n(e,r){if(!(this instanceof n))return new n(e,r);r=r||{},e&&"object"==typeof e&&(r=e,e=null),e?(e=l(e),r.hostname=e.host,r.secure="https"===e.protocol||"wss"===e.protocol,r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=l(r.host).host),this.secure=null!=r.secure?r.secure:t.location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.agent=r.agent||!1,this.hostname=r.hostname||(t.location?location.hostname:"localhost"),this.port=r.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=r.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==r.upgrade,this.path=(r.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!r.forceJSONP,this.jsonp=!1!==r.jsonp,this.forceBase64=!!r.forceBase64,this.enablesXDR=!!r.enablesXDR,this.timestampParam=r.timestampParam||"t",this.timestampRequests=r.timestampRequests,this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=r.policyPort||843,this.rememberUpgrade=r.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=r.onlyBinaryUpgrades,this.perMessageDeflate=!1!==r.perMessageDeflate&&(r.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=r.pfx||null,this.key=r.key||null,this.passphrase=r.passphrase||null,this.cert=r.cert||null,this.ca=r.ca||null,this.ciphers=r.ciphers||null,this.rejectUnauthorized=void 0===r.rejectUnauthorized?null:r.rejectUnauthorized;var o="object"==typeof t&&t;o.global===o&&r.extraHeaders&&Object.keys(r.extraHeaders).length>0&&(this.extraHeaders=r.extraHeaders),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function o(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var i=r(17),s=r(31),a=r(3)("engine.io-client:socket"),u=r(38),c=r(23),l=r(2),f=r(39),d=r(32);e.exports=n,n.priorWebsocketSuccess=!1,s(n.prototype),n.protocol=c.protocol,n.Socket=n,n.Transport=r(22),n.transports=r(17),n.parser=r(23),n.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=o(this.query);t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id);var r=new i[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return r},n.prototype.open=function(){var e;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(r){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},n.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},n.prototype.probe=function(e){function t(){if(d.onlyBinaryUpgrades){var t=!this.supportsBinary&&d.transport.supportsBinary;f=f||t}f||(a('probe transport "%s" opened',e),l.send([{type:"ping",data:"probe"}]),l.once("packet",function(t){if(!f)if("pong"===t.type&&"probe"===t.data){if(a('probe transport "%s" pong',e),d.upgrading=!0,d.emit("upgrading",l),!l)return;n.priorWebsocketSuccess="websocket"===l.name,a('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){f||"closed"!==d.readyState&&(a("changing transport and sending upgrade packet"),c(),d.setTransport(l),l.send([{type:"upgrade"}]),d.emit("upgrade",l),l=null,d.upgrading=!1,d.flush())})}else{a('probe transport "%s" failed',e);var r=new Error("probe error");r.transport=l.name,d.emit("upgradeError",r)}}))}function r(){f||(f=!0,c(),l.close(),l=null)}function o(t){var n=new Error("probe error: "+t);n.transport=l.name,r(),a('probe transport "%s" failed because of error: %s',e,t),d.emit("upgradeError",n)}function i(){o("transport closed")}function s(){o("socket closed")}function u(e){l&&e.name!==l.name&&(a('"%s" works - aborting "%s"',e.name,l.name),r())}function c(){l.removeListener("open",t),l.removeListener("error",o),l.removeListener("close",i),d.removeListener("close",s),d.removeListener("upgrading",u)}a('probing transport "%s"',e);var l=this.createTransport(e,{probe:1}),f=!1,d=this;n.priorWebsocketSuccess=!1,l.once("open",t),l.once("error",o),l.once("close",i),this.once("close",s),this.once("upgrading",u),l.open()},n.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},n.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(f(e.data));
break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},n.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},n.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},n.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this},n.prototype.sendPacket=function(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){r=r||{},r.compress=!1!==r.compress;var o={type:e,data:t,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},n.prototype.close=function(){function e(){n.onClose("forced close"),a("socket closing - telling transport to close"),n.transport.close()}function t(){n.removeListener("upgrade",t),n.removeListener("upgradeError",t),e()}function r(){n.once("upgrade",t),n.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():e()}):this.upgrading?r():e()}return this},n.prototype.onError=function(e){a("socket error %j",e),n.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},n.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),r.writeBuffer=[],r.prevBufferLen=0}},n.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~u(this.transports,e[r])&&t.push(e[r]);return t}}).call(t,function(){return this}())},function(e,t,r){(function(e){function n(t){var r,n=!1,a=!1,u=!1!==t.jsonp;if(e.location){var c="https:"===location.protocol,l=location.port;l||(l=c?443:80),n=t.hostname!==location.hostname||l!==t.port,a=t.secure!==c}if(t.xdomain=n,t.xscheme=a,r=new o(t),"open"in r&&!t.forceJSONP)return new i(t);if(!u)throw new Error("JSONP disabled");return new s(t)}var o=r(18),i=r(20),s=r(35),a=r(36);t.polling=n,t.websocket=a}).call(t,function(){return this}())},function(e,t,r){var n=r(19);e.exports=function(e){var t=e.xdomain,r=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(i){}try{if("undefined"!=typeof XDomainRequest&&!r&&o)return new XDomainRequest}catch(i){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(i){}}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(r){e.exports=!1}},function(e,t,r){(function(t){function n(){}function o(e){if(u.call(this,e),t.location){var r="https:"===location.protocol,n=location.port;n||(n=r?443:80),this.xd=e.hostname!==t.location.hostname||n!==e.port,this.xs=e.secure!==r}else this.extraHeaders=e.extraHeaders}function i(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function s(){for(var e in i.requests)i.requests.hasOwnProperty(e)&&i.requests[e].abort()}var a=r(18),u=r(21),c=r(31),l=r(33),f=r(3)("engine.io-client:polling-xhr");e.exports=o,e.exports.Request=i,l(o,u),o.prototype.supportsBinary=!0,o.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.extraHeaders=this.extraHeaders,new i(e)},o.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),o=this;n.on("success",t),n.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=n},o.prototype.doPoll=function(){f("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},c(i.prototype),i.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var r=this.xhr=new a(e),n=this;try{f("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.extraHeaders){r.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this.extraHeaders[o])}}catch(s){}if(this.supportsBinary&&(r.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?r.setRequestHeader("Content-type","application/octet-stream"):r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}"withCredentials"in r&&(r.withCredentials=!0),this.hasXDR()?(r.onload=function(){n.onLoad()},r.onerror=function(){n.onError(r.responseText)}):r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?n.onLoad():setTimeout(function(){n.onError(r.status)},0))},f("xhr data %s",this.data),r.send(this.data)}catch(s){return void setTimeout(function(){n.onError(s)},0)}t.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},i.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},i.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,e)try{this.xhr.abort()}catch(r){}t.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(r){}if("application/octet-stream"===t)e=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(r){for(var n=new Uint8Array(this.xhr.response),o=[],i=0,s=n.length;i<s;i++)o.push(n[i]);e=String.fromCharCode.apply(null,o)}else e=this.xhr.responseText}catch(r){this.onError(r)}null!=e&&this.onData(e)},i.prototype.hasXDR=function(){return"undefined"!=typeof t.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},t.document&&(t.attachEvent?t.attachEvent("onunload",s):t.addEventListener&&t.addEventListener("beforeunload",s,!1))}).call(t,function(){return this}())},function(e,t,r){function n(e){var t=e&&e.forceBase64;l&&!t||(this.supportsBinary=!1),o.call(this,e)}var o=r(22),i=r(32),s=r(23),a=r(33),u=r(34),c=r(3)("engine.io-client:polling");e.exports=n;var l=function(){var e=r(18),t=new e({xdomain:!1});return null!=t.responseType}();a(n,o),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(e){function t(){c("paused"),r.readyState="paused",e()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(c("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){c("pre-pause polling complete"),--n||t()})),this.writable||(c("we are currently writing - waiting to pause"),n++,this.once("drain",function(){c("pre-pause writing complete"),--n||t()}))}else t()},n.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(e){var t=this;c("polling got data %s",e);var r=function(e,r,n){return"opening"===t.readyState&&t.onOpen(),"close"===e.type?(t.onClose(),!1):void t.onPacket(e)};s.decodePayload(e,this.socket.binaryType,r),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function e(){c("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},n.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")};s.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,r)})},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";!1!==this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==this.port||"http"===t&&80!==this.port)&&(r=":"+this.port),e.length&&(e="?"+e);var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e}},function(e,t,r){function n(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}var o=r(23),i=r(31);e.exports=n,i(n.prototype),n.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},n.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(e){var t=o.decodePacket(e,this.socket.binaryType);this.onPacket(t)},n.prototype.onPacket=function(e){this.emit("packet",e)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,r){(function(e){function n(e,r){var n="b"+t.packets[e.type]+e.data.data;return r(n)}function o(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var o=e.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=b[e.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return n(s.buffer)}function i(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var o=new FileReader;return o.onload=function(){e.data=o.result,t.encodePacket(e,r,!0,n)},o.readAsArrayBuffer(e.data)}function s(e,r,n){if(!r)return t.encodeBase64Packet(e,n);if(_)return i(e,r,n);var o=new Uint8Array(1);o[0]=b[e.type];var s=new k([o.buffer,e.data]);return n(s)}function a(e){try{e=p.decode(e)}catch(t){return!1}return e}function u(e,t,r){for(var n=new Array(e.length),o=h(e.length,r),i=function(e,r,o){t(r,function(t,r){n[e]=r,o(t,n)})},s=0;s<e.length;s++)i(s,e[s],o)}var c,l=r(24),f=r(25),d=r(26),h=r(27),p=r(28);e&&e.ArrayBuffer&&(c=r(29));var y="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),v="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),_=y||v;t.protocol=3;var b=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},g=l(b),m={type:"error",data:"parser error"},k=r(30);t.encodePacket=function(t,r,i,a){"function"==typeof r&&(a=r,r=!1),"function"==typeof i&&(a=i,i=null);var u=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&u instanceof ArrayBuffer)return o(t,r,a);if(k&&u instanceof e.Blob)return s(t,r,a);if(u&&u.base64)return n(t,a);var c=b[t.type];return void 0!==t.data&&(c+=i?p.encode(String(t.data)):String(t.data)),a(""+c)},t.encodeBase64Packet=function(r,n){var o="b"+t.packets[r.type];if(k&&r.data instanceof e.Blob){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];n(o+e)},i.readAsDataURL(r.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(r.data))}catch(a){for(var u=new Uint8Array(r.data),c=new Array(u.length),l=0;l<u.length;l++)c[l]=u[l];s=String.fromCharCode.apply(null,c)}return o+=e.btoa(s),n(o)},t.decodePacket=function(e,r,n){if(void 0===e)return m;if("string"==typeof e){if("b"==e.charAt(0))return t.decodeBase64Packet(e.substr(1),r);if(n&&(e=a(e),e===!1))return m;var o=e.charAt(0);return Number(o)==o&&g[o]?e.length>1?{type:g[o],data:e.substring(1)}:{type:g[o]}:m}var i=new Uint8Array(e),o=i[0],s=d(e,1);return k&&"blob"===r&&(s=new k([s])),{type:g[o],data:s}},t.decodeBase64Packet=function(e,t){var r=g[e.charAt(0)];if(!c)return{type:r,data:{base64:!0,data:e.substr(1)}};var n=c.decode(e.substr(1));return"blob"===t&&k&&(n=new k([n])),{type:r,data:n}},t.encodePayload=function(e,r,n){function o(e){return e.length+":"+e}function i(e,n){t.encodePacket(e,!!s&&r,!0,function(e){n(null,o(e))})}"function"==typeof r&&(n=r,r=null);var s=f(e);return r&&s?k&&!_?t.encodePayloadAsBlob(e,n):t.encodePayloadAsArrayBuffer(e,n):e.length?void u(e,i,function(e,t){return n(t.join(""))}):n("0:")},t.decodePayload=function(e,r,n){if("string"!=typeof e)return t.decodePayloadAsBinary(e,r,n);"function"==typeof r&&(n=r,r=null);var o;if(""==e)return n(m,0,1);for(var i,s,a="",u=0,c=e.length;u<c;u++){var l=e.charAt(u);if(":"!=l)a+=l;else{if(""==a||a!=(i=Number(a)))return n(m,0,1);if(s=e.substr(u+1,i),a!=s.length)return n(m,0,1);if(s.length){if(o=t.decodePacket(s,r,!0),m.type==o.type&&m.data==o.data)return n(m,0,1);var f=n(o,u+i,c);if(!1===f)return}u+=i,a=""}}return""!=a?n(m,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,r){function n(e,r){t.encodePacket(e,!0,!0,function(e){return r(null,e)})}return e.length?void u(e,n,function(e,t){var n=t.reduce(function(e,t){var r;return r="string"==typeof t?t.length:t.byteLength,e+r.toString().length+r+2},0),o=new Uint8Array(n),i=0;return t.forEach(function(e){var t="string"==typeof e,r=e;if(t){for(var n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);r=n.buffer}t?o[i++]=0:o[i++]=1;for(var a=r.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var n=new Uint8Array(r),s=0;s<n.length;s++)o[i++]=n[s]}),r(o.buffer)}):r(new ArrayBuffer(0))},t.encodePayloadAsBlob=function(e,r){function n(e,r){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);e=n.buffer,t[0]=0}for(var i=e instanceof ArrayBuffer?e.byteLength:e.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,k){var u=new k([t.buffer,a.buffer,e]);r(null,u)}})}u(e,n,function(e,t){return r(new k(t))})},t.decodePayloadAsBinary=function(e,r,n){"function"==typeof r&&(n=r,r=null);for(var o=e,i=[],s=!1;o.byteLength>0;){for(var a=new Uint8Array(o),u=0===a[0],c="",l=1;255!=a[l];l++){if(c.length>310){s=!0;break}c+=a[l]}if(s)return n(m,0,1);o=d(o,2+c.length),c=parseInt(c);var f=d(o,0,c);if(u)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(h){var p=new Uint8Array(f);f="";for(var l=0;l<p.length;l++)f+=String.fromCharCode(p[l])}i.push(f),o=d(o,c)}var y=i.length;i.forEach(function(e,o){n(t.decodePacket(e,r,!0),o,y)})}}).call(t,function(){return this}())},function(e,t){e.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&t.push(n);return t}},function(e,t,r){(function(t){function n(e){function r(e){if(!e)return!1;if(t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer||t.Blob&&e instanceof Blob||t.File&&e instanceof File)return!0;if(o(e)){for(var n=0;n<e.length;n++)if(r(e[n]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&r(e[i]))return!0}return!1}return r(e)}var o=r(9);e.exports=n}).call(t,function(){return this}())},function(e,t){e.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(t<0&&(t+=n),r<0&&(r+=n),r>n&&(r=n),t>=n||t>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(r-t),s=t,a=0;s<r;s++,a++)i[a]=o[s];return i.buffer}},function(e,t){function r(e,t,r){function o(e,n){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=r):0!==o.count||i||t(null,n)}var i=!1;return r=r||n,o.count=e,0===e?t():o}function n(){}e.exports=r},function(e,t,r){var n;(function(e,o){!function(i){function s(e){for(var t,r,n=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function a(e){for(var t,r=e.length,n=-1,o="";++n<r;)t=e[n],t>65535&&(t-=65536,o+=g(t>>>10&1023|55296),t=56320|1023&t),o+=g(t);return o}function u(e,t){return g(e>>t&63|128)}function c(e){if(0==(4294967168&e))return g(e);var t="";return 0==(4294965248&e)?t=g(e>>6&31|192):0==(4294901760&e)?(t=g(e>>12&15|224),t+=u(e,6)):0==(4292870144&e)&&(t=g(e>>18&7|240),t+=u(e,12),t+=u(e,6)),t+=g(63&e|128)}function l(e){for(var t,r=s(e),n=r.length,o=-1,i="";++o<n;)t=r[o],i+=c(t);return i}function f(){if(b>=_)throw Error("Invalid byte index");var e=255&v[b];if(b++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(){var e,t,r,n,o;if(b>_)throw Error("Invalid byte index");if(b==_)return!1;if(e=255&v[b],b++,0==(128&e))return e;if(192==(224&e)){var t=f();if(o=(31&e)<<6|t,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=f(),r=f(),o=(15&e)<<12|t<<6|r,o>=2048)return o;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=f(),r=f(),n=f(),o=(15&e)<<18|t<<12|r<<6|n,o>=65536&&o<=1114111))return o;throw Error("Invalid WTF-8 detected")}function h(e){v=s(e),_=v.length,b=0;for(var t,r=[];(t=d())!==!1;)r.push(t);return a(r)}var p="object"==typeof t&&t,y=("object"==typeof e&&e&&e.exports==p&&e,"object"==typeof o&&o);y.global!==y&&y.window!==y||(i=y);var v,_,b,g=String.fromCharCode,m={version:"1.0.0",encode:l,decode:h};n=function(){return m}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))}(this)}).call(t,r(8)(e),function(){return this}())},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),n=0;n<e.length;n++)r[e.charCodeAt(n)]=n;t.encode=function(t){var r,n=new Uint8Array(t),o=n.length,i="";for(r=0;r<o;r+=3)i+=e[n[r]>>2],i+=e[(3&n[r])<<4|n[r+1]>>4],i+=e[(15&n[r+1])<<2|n[r+2]>>6],i+=e[63&n[r+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(e){var t,n,o,i,s,a=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),f=new Uint8Array(l);for(t=0;t<u;t+=4)n=r[e.charCodeAt(t)],o=r[e.charCodeAt(t+1)],i=r[e.charCodeAt(t+2)],s=r[e.charCodeAt(t+3)],f[c++]=n<<2|o>>4,f[c++]=(15&o)<<4|i>>2,f[c++]=(3&i)<<6|63&s;return l}}()},function(e,t){(function(t){function r(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var o=new Uint8Array(r.byteLength);o.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=o.buffer}e[t]=n}}}function n(e,t){t=t||{};var n=new i;r(e);for(var o=0;o<e.length;o++)n.append(e[o]);return t.type?n.getBlob(t.type):n.getBlob()}function o(e,t){return r(e),new Blob(e,t||{})}var i=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,s=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(t){return!1}}(),a=s&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),u=i&&i.prototype.append&&i.prototype.getBlob;e.exports=function(){return s?a?t.Blob:o:u?n:void 0}()}).call(t,function(){return this}())},function(e,t){function r(e){if(e)return n(e)}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){t.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},t.decode=function(e){for(var t={},r=e.split("&"),n=0,o=r.length;n<o;n++){var i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},function(e,t){e.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t){"use strict";function r(e){var t="";do t=s[e%a]+t,e=Math.floor(e/a);while(e>0);return t}function n(e){var t=0;for(l=0;l<e.length;l++)t=t*a+u[e.charAt(l)];return t}function o(){var e=r(+new Date);return e!==i?(c=0,i=e):e+"."+r(c++)}for(var i,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,u={},c=0,l=0;l<a;l++)u[s[l]]=l;o.encode=r,o.decode=n,e.exports=o},function(e,t,r){(function(t){function n(){}function o(e){i.call(this,e),this.query=this.query||{},a||(t.___eio||(t.___eio=[]),a=t.___eio),this.index=a.length;var r=this;a.push(function(e){r.onData(e)}),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener("beforeunload",function(){r.script&&(r.script.onerror=n)},!1)}var i=r(21),s=r(33);e.exports=o;var a,u=/\n/g,c=/\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},o.prototype.doWrite=function(e,t){function r(){n(),t()}function n(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(t)}catch(e){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=l,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),n(),e=e.replace(c,"\\\n"),this.area.value=e.replace(u,"\\n");try{this.form.submit()}catch(f){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&r()}:this.iframe.onload=r}}).call(t,function(){return this}())},function(e,t,r){(function(t){function n(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,o.call(this,e)}var o=r(22),i=r(23),s=r(32),a=r(33),u=r(34),c=r(3)("engine.io-client:websocket"),l=t.WebSocket||t.MozWebSocket,f=l;if(!f&&"undefined"==typeof window)try{f=r(37)}catch(d){}e.exports=n,a(n,o),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders);try{this.ws=l?new f(e):new f(e,t,r)}catch(n){return this.emit("error",n)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(n.prototype.onData=function(e){var t=this;setTimeout(function(){o.prototype.onData.call(t,e)},0)}),n.prototype.write=function(e){function r(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}var n=this;this.writable=!1;for(var o=e.length,s=0,a=o;s<a;s++)!function(e){i.encodePacket(e,n.supportsBinary,function(i){if(!l){var s={};if(e.options&&(s.compress=e.options.compress),n.perMessageDeflate){var a="string"==typeof i?t.Buffer.byteLength(i):i.length;a<n.perMessageDeflate.threshold&&(s.compress=!1)}}try{l?n.ws.send(i):n.ws.send(i,s)}catch(u){c("websocket closed before onclose event")}--o||r()})}(e[s])},n.prototype.onClose=function(){o.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";this.port&&("wss"===t&&443!==this.port||"ws"===t&&80!==this.port)&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||(e.b64=1),e=s.encode(e),e.length&&(e="?"+e);var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e},n.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===n.prototype.name)}}).call(t,function(){return this}())},function(e,t){},function(e,t){var r=[].indexOf;e.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},function(e,t){(function(t){var r=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(s,"").replace(a,""),t.JSON&&JSON.parse?JSON.parse(e):r.test(e.replace(n,"@").replace(o,"]").replace(i,""))?new Function("return "+e)():void 0):null}}).call(t,function(){return this}())},function(e,t,r){"use strict";function n(e,t,r){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}var o=r(6),i=r(41),s=r(42),a=r(43),u=r(44),c=r(3)("socket.io-client:socket"),l=r(45);e.exports=t=n;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=i.prototype.emit;i(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",u(this,"onopen")),a(e,"packet",u(this,"onpacket")),a(e,"close",u(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},n.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},n.prototype.emit=function(e){if(f.hasOwnProperty(e))return d.apply(this,arguments),this;var t=s(arguments),r=o.EVENT;l(t)&&(r=o.BINARY_EVENT);var n={type:r,data:t};return n.options={},n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),delete this.flags,this},n.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},n.prototype.onopen=function(){c("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:o.CONNECT,query:this.query}):this.packet({type:o.CONNECT}))},n.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},n.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case o.CONNECT:this.onconnect();break;case o.EVENT:this.onevent(e);break;case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:this.onack(e);break;case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",e.data)}},n.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},n.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var n=s(arguments);c("sending ack %j",n);var i=l(n)?o.BINARY_ACK:o.ACK;t.packet({type:i,id:e,data:n})}}},n.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,
this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},function(e,t){function r(e){if(e)return n(e)}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){function r(e,t){var r=[];t=t||0;for(var n=t||0;n<e.length;n++)r[n-t]=e[n];return r}e.exports=r},function(e,t){"use strict";function r(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}e.exports=r},function(e,t){var r=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},function(e,t,r){(function(t){function n(e){function r(e){if(!e)return!1;if(t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer||t.Blob&&e instanceof Blob||t.File&&e instanceof File)return!0;if(o(e)){for(var n=0;n<e.length;n++)if(r(e[n]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&r(e[i]))return!0}return!1}return r(e)}var o=r(9);e.exports=n}).call(t,function(){return this}())},function(e,t){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}}])}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Parse=e()}}(function(){return function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return o(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,r){if(e=e||"",e=e.replace(/^\s*/,""),e=e.replace(/\s*$/,""),0===e.length)throw new TypeError("A name for the custom event must be provided");for(var n in t)if("string"!=typeof n||"string"!=typeof t[n])throw new TypeError('track() dimensions expects keys and values of type "string".');return r=r||{},s["default"].getAnalyticsController().track(e,t)._thenRunCallbacks(r)}Object.defineProperty(r,"__esModule",{value:!0}),r.track=o;var i=e("./CoreManager"),s=n(i),a={track:function(e,t){var r=s["default"].getRESTController();return r.request("POST","events/"+e,{dimensions:t})}};s["default"].setAnalyticsController(a)},{"./CoreManager":3}],2:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,r){if(r=r||{},"string"!=typeof e||0===e.length)throw new TypeError("Cloud function name must be a string.");var n={};return r.useMasterKey&&(n.useMasterKey=r.useMasterKey),r.sessionToken&&(n.sessionToken=r.sessionToken),s["default"].getCloudController().run(e,t,n)._thenRunCallbacks(r)}Object.defineProperty(r,"__esModule",{value:!0}),r.run=o;var i=e("./CoreManager"),s=n(i),a=e("./decode"),u=n(a),c=e("./encode"),l=n(c),f=e("./ParseError"),d=n(f),h=e("./ParsePromise"),p=n(h),y={run:function(e,t,r){var n=s["default"].getRESTController(),o=(0,l["default"])(t,!0),i={};r.hasOwnProperty("useMasterKey")&&(i.useMasterKey=r.useMasterKey),r.hasOwnProperty("sessionToken")&&(i.sessionToken=r.sessionToken);var a=n.request("POST","functions/"+e,o,i);return a.then(function(e){var t=(0,u["default"])(e);return t&&t.hasOwnProperty("result")?p["default"].as(t.result):p["default"].error(new d["default"](d["default"].INVALID_JSON,"The server returned an invalid response."))})._thenRunCallbacks(r)}};s["default"].setCloudController(y)},{"./CoreManager":3,"./ParseError":13,"./ParsePromise":20,"./decode":35,"./encode":36}],3:[function(e,t,r){(function(e){"use strict";function r(e,t,r){t.forEach(function(t){if("function"!=typeof r[t])throw new Error(e+" must implement "+t+"()")})}var n={IS_NODE:"undefined"!=typeof e&&!!e.versions&&!!e.versions.node&&!e.versions.electron,REQUEST_ATTEMPT_LIMIT:5,SERVER_URL:"https://api.parse.com/1",LIVEQUERY_SERVER_URL:null,VERSION:"js1.9.2",APPLICATION_ID:null,JAVASCRIPT_KEY:null,MASTER_KEY:null,USE_MASTER_KEY:!1,PERFORM_USER_REWRITE:!0,FORCE_REVOCABLE_SESSION:!1};t.exports={get:function(e){if(n.hasOwnProperty(e))return n[e];throw new Error("Configuration key not found: "+e)},set:function(e,t){n[e]=t},setAnalyticsController:function(e){r("AnalyticsController",["track"],e),n.AnalyticsController=e},getAnalyticsController:function(){return n.AnalyticsController},setCloudController:function(e){r("CloudController",["run"],e),n.CloudController=e},getCloudController:function(){return n.CloudController},setConfigController:function(e){r("ConfigController",["current","get"],e),n.ConfigController=e},getConfigController:function(){return n.ConfigController},setFileController:function(e){r("FileController",["saveFile","saveBase64"],e),n.FileController=e},getFileController:function(){return n.FileController},setInstallationController:function(e){r("InstallationController",["currentInstallationId"],e),n.InstallationController=e},getInstallationController:function(){return n.InstallationController},setObjectController:function(e){r("ObjectController",["save","fetch","destroy"],e),n.ObjectController=e},getObjectController:function(){return n.ObjectController},setObjectStateController:function(e){r("ObjectStateController",["getState","initializeState","removeState","getServerData","setServerData","getPendingOps","setPendingOp","pushPendingState","popPendingState","mergeFirstPendingState","getObjectCache","estimateAttribute","estimateAttributes","commitServerChanges","enqueueTask","clearAllState"],e),n.ObjectStateController=e},getObjectStateController:function(){return n.ObjectStateController},setPushController:function(e){r("PushController",["send"],e),n.PushController=e},getPushController:function(){return n.PushController},setQueryController:function(e){r("QueryController",["find"],e),n.QueryController=e},getQueryController:function(){return n.QueryController},setRESTController:function(e){r("RESTController",["request","ajax"],e),n.RESTController=e},getRESTController:function(){return n.RESTController},setSessionController:function(e){r("SessionController",["getSession"],e),n.SessionController=e},getSessionController:function(){return n.SessionController},setStorageController:function(e){e.async?r("An async StorageController",["getItemAsync","setItemAsync","removeItemAsync"],e):r("A synchronous StorageController",["getItem","setItem","removeItem"],e),n.StorageController=e},getStorageController:function(){return n.StorageController},setUserController:function(e){r("UserController",["setCurrentUser","currentUser","currentUserAsync","signUp","logIn","become","logOut","requestPasswordReset","upgradeToRevocableSession","linkWith"],e),n.UserController=e},getUserController:function(){return n.UserController},setLiveQueryController:function(e){r("LiveQueryController",["subscribe","unsubscribe","open","close"],e),n.LiveQueryController=e},getLiveQueryController:function(){return n.LiveQueryController},setHooksController:function(e){r("HooksController",["create","get","update","remove"],e),n.HooksController=e},getHooksController:function(){return n.HooksController}}}).call(this,e("_process"))},{_process:168}],4:[function(e,t,r){"use strict";t.exports=e("events").EventEmitter},{events:169}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o,i,s=e("./parseDate"),a=n(s),u=e("./ParseUser"),c=n(u),l=!1,f={authenticate:function(e){var t=this;"undefined"==typeof FB&&e.error(this,"Facebook SDK not found."),FB.login(function(r){r.authResponse?e.success&&e.success(t,{id:r.authResponse.userID,access_token:r.authResponse.accessToken,expiration_date:new Date(1e3*r.authResponse.expiresIn+(new Date).getTime()).toJSON()}):e.error&&e.error(t,r)},{scope:o})},restoreAuthentication:function(e){if(e){var t=(0,a["default"])(e.expiration_date),r=t?(t.getTime()-(new Date).getTime())/1e3:0,n={userID:e.id,accessToken:e.access_token,expiresIn:r},o={};if(i)for(var s in i)o[s]=i[s];o.authResponse=n,o.status=!1;var u=FB.getAuthResponse();u&&u.userID!==n.userID&&FB.logout(),FB.init(o)}return!0},getAuthType:function(){return"facebook"},deauthenticate:function(){this.restoreAuthentication(null)}},d={init:function(e){if("undefined"==typeof FB)throw new Error("The Facebook JavaScript SDK must be loaded before calling init.");if(i={},e)for(var t in e)i[t]=e[t];if(i.status&&"undefined"!=typeof console){var r=console.warn||console.log||function(){};r.call(console,'The "status" flag passed into FB.init, when set to true, can interfere with Parse Facebook integration, so it has been suppressed. Please call FB.getLoginStatus() explicitly if you require this behavior.')}i.status=!1,FB.init(i),c["default"]._registerAuthenticationProvider(f),l=!0},isLinked:function(e){return e._isLinked("facebook")},logIn:function(e,t){if(e&&"string"!=typeof e){var r={};if(t)for(var n in t)r[n]=t[n];return r.authData=e,c["default"]._logInWith("facebook",r)}if(!l)throw new Error("You must initialize FacebookUtils before calling logIn.");return o=e,c["default"]._logInWith("facebook",t)},link:function(e,t,r){if(t&&"string"!=typeof t){var n={};if(r)for(var i in r)n[i]=r[i];return n.authData=t,e._linkWith("facebook",n)}if(!l)throw new Error("You must initialize FacebookUtils before calling link.");return o=t,e._linkWith("facebook",r)},unlink:function(e,t){if(!l)throw new Error("You must initialize FacebookUtils before calling unlink.");return e._unlinkFrom("facebook",t)}};r["default"]=d},{"./ParseUser":25,"./parseDate":40}],6:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function i(){return o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o()}var s=e("./CoreManager"),a=(n(s),e("./ParsePromise")),u=n(a),c=e("./Storage"),l=n(c),f=null,d={currentInstallationId:function(){if("string"==typeof f)return u["default"].as(f);var e=l["default"].generatePath("installationId");return l["default"].getItemAsync(e).then(function(t){return t?(f=t,t):(t=i(),l["default"].setItemAsync(e,t).then(function(){return f=t,t}))})},_clearCache:function(){f=null},_setInstallationIdCache:function(e){f=e}};t.exports=d},{"./CoreManager":3,"./ParsePromise":20,"./Storage":29}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/helpers/typeof"),i=n(o),s=e("babel-runtime/core-js/get-iterator"),a=n(s),u=e("babel-runtime/core-js/json/stringify"),c=n(u),l=e("babel-runtime/core-js/map"),f=n(l),d=e("babel-runtime/core-js/object/get-prototype-of"),h=n(d),p=e("babel-runtime/helpers/classCallCheck"),y=n(p),v=e("babel-runtime/helpers/createClass"),_=n(v),b=e("babel-runtime/helpers/possibleConstructorReturn"),g=n(b),m=e("babel-runtime/helpers/inherits"),k=n(m),C=e("./EventEmitter"),w=n(C),j=e("./ParsePromise"),S=n(j),O=e("./ParseObject"),E=n(O),A=e("./LiveQuerySubscription"),P=n(A),T={INITIALIZED:"initialized",CONNECTING:"connecting",CONNECTED:"connected",CLOSED:"closed",RECONNECTING:"reconnecting",DISCONNECTED:"disconnected"},N={CONNECT:"connect",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",ERROR:"error"},I={CONNECTED:"connected",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed",ERROR:"error",CREATE:"create",UPDATE:"update",ENTER:"enter",LEAVE:"leave",DELETE:"delete"},R={CLOSE:"close",ERROR:"error",OPEN:"open"},x={OPEN:"open",CLOSE:"close",ERROR:"error",CREATE:"create",UPDATE:"update",ENTER:"enter",LEAVE:"leave",DELETE:"delete"},M=function(e){return Math.random()*Math.min(30,Math.pow(2,e)-1)*1e3},U=function(e){function t(e){var r=e.applicationId,n=e.serverURL,o=e.javascriptKey,i=e.masterKey,s=e.sessionToken;(0,y["default"])(this,t);var a=(0,g["default"])(this,(t.__proto__||(0,h["default"])(t)).call(this));if(!n||0!==n.indexOf("ws"))throw new Error("You need to set a proper Parse LiveQuery server url before using LiveQueryClient");return a.reconnectHandle=null,a.attempts=1,a.id=0,a.requestId=1,a.serverURL=n,a.applicationId=r,a.javascriptKey=o,a.masterKey=i,a.sessionToken=s,a.connectPromise=new S["default"],a.subscriptions=new f["default"],a.state=T.INITIALIZED,a}return(0,k["default"])(t,e),(0,_["default"])(t,[{key:"shouldOpen",value:function(){return this.state===T.INITIALIZED||this.state===T.DISCONNECTED}},{key:"subscribe",value:function(e,t){var r=this;if(e){var n=e.toJSON().where,o=e.className,i={op:N.SUBSCRIBE,requestId:this.requestId,query:{className:o,where:n}};t&&(i.sessionToken=t);var s=new P["default"](this.requestId,e,t);return this.subscriptions.set(this.requestId,s),this.requestId+=1,this.connectPromise.then(function(){r.socket.send((0,c["default"])(i))}),s.on("error",function(){}),s}}},{key:"unsubscribe",value:function(e){var t=this;if(e){this.subscriptions["delete"](e.id);var r={op:N.UNSUBSCRIBE,requestId:e.id};this.connectPromise.then(function(){t.socket.send((0,c["default"])(r))})}}},{key:"open",value:function(){var e=this,t=this._getWebSocketImplementation();return t?(this.state!==T.RECONNECTING&&(this.state=T.CONNECTING),this.socket=new t(this.serverURL),this.socket.onopen=function(){e._handleWebSocketOpen()},this.socket.onmessage=function(t){e._handleWebSocketMessage(t)},this.socket.onclose=function(){e._handleWebSocketClose()},void(this.socket.onerror=function(t){e._handleWebSocketError(t)})):void this.emit(R.ERROR,"Can not find WebSocket implementation")}},{key:"resubscribe",value:function(){var e=this;this.subscriptions.forEach(function(t,r){var n=t.query,o=n.toJSON().where,i=n.className,s=t.sessionToken,a={op:N.SUBSCRIBE,requestId:r,query:{className:i,where:o}};s&&(a.sessionToken=s),e.connectPromise.then(function(){e.socket.send((0,c["default"])(a))})})}},{key:"close",value:function(){if(this.state!==T.INITIALIZED&&this.state!==T.DISCONNECTED){this.state=T.DISCONNECTED,this.socket.close();var e=!0,t=!1,r=void 0;try{for(var n,o=(0,a["default"])(this.subscriptions.values());!(e=(n=o.next()).done);e=!0){var i=n.value;i.emit(x.CLOSE)}}catch(s){t=!0,r=s}finally{try{!e&&o["return"]&&o["return"]()}finally{if(t)throw r}}this._handleReset(),this.emit(R.CLOSE)}}},{key:"_getWebSocketImplementation",value:function(){return"function"==typeof WebSocket||"object"===("undefined"==typeof WebSocket?"undefined":(0,i["default"])(WebSocket))?WebSocket:null}},{key:"_handleReset",value:function(){this.attempts=1,this.id=0,this.requestId=1,this.connectPromise=new S["default"],this.subscriptions=new f["default"]}},{key:"_handleWebSocketOpen",value:function(){this.attempts=1;var e={op:N.CONNECT,applicationId:this.applicationId,javascriptKey:this.javascriptKey,masterKey:this.masterKey,sessionToken:this.sessionToken};this.socket.send((0,c["default"])(e))}},{key:"_handleWebSocketMessage",value:function(e){var t=e.data;"string"==typeof t&&(t=JSON.parse(t));var r=null;switch(t.requestId&&(r=this.subscriptions.get(t.requestId)),t.op){case I.CONNECTED:this.state===T.RECONNECTING&&this.resubscribe(),this.emit(R.OPEN),this.id=t.clientId,this.connectPromise.resolve(),this.state=T.CONNECTED;break;case I.SUBSCRIBED:r&&r.emit(x.OPEN);break;case I.ERROR:t.requestId?r&&r.emit(x.ERROR,t.error):this.emit(R.ERROR,t.error);break;case I.UNSUBSCRIBED:break;default:var n=t.object.className;delete t.object.__type,delete t.object.className;var o=new E["default"](n);if(o._finishFetch(t.object),!r)break;r.emit(t.op,o)}}},{key:"_handleWebSocketClose",value:function(){if(this.state!==T.DISCONNECTED){this.state=T.CLOSED,this.emit(R.CLOSE);var e=!0,t=!1,r=void 0;try{for(var n,o=(0,a["default"])(this.subscriptions.values());!(e=(n=o.next()).done);e=!0){var i=n.value;i.emit(x.CLOSE)}}catch(s){t=!0,r=s}finally{try{!e&&o["return"]&&o["return"]()}finally{if(t)throw r}}this._handleReconnect()}}},{key:"_handleWebSocketError",value:function(e){this.emit(R.ERROR,e);var t=!0,r=!1,n=void 0;try{for(var o,i=(0,a["default"])(this.subscriptions.values());!(t=(o=i.next()).done);t=!0){var s=o.value;s.emit(x.ERROR)}}catch(u){r=!0,n=u}finally{try{!t&&i["return"]&&i["return"]()}finally{if(r)throw n}}this._handleReconnect()}},{key:"_handleReconnect",value:function(){var e=this;if(this.state!==T.DISCONNECTED){this.state=T.RECONNECTING;var t=M(this.attempts);this.reconnectHandle&&clearTimeout(this.reconnectHandle),this.reconnectHandle=setTimeout(function(){e.attempts++,e.connectPromise=new S["default"],e.open()}.bind(this),t)}}}]),t}(w["default"]);r["default"]=U},{"./EventEmitter":4,"./LiveQuerySubscription":8,"./ParseObject":18,"./ParsePromise":20,"babel-runtime/core-js/get-iterator":43,"babel-runtime/core-js/json/stringify":44,"babel-runtime/core-js/map":45,"babel-runtime/core-js/object/get-prototype-of":50,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57,"babel-runtime/helpers/inherits":59,"babel-runtime/helpers/possibleConstructorReturn":60,"babel-runtime/helpers/typeof":61}],8:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/core-js/object/get-prototype-of"),i=n(o),s=e("babel-runtime/helpers/classCallCheck"),a=n(s),u=e("babel-runtime/helpers/createClass"),c=n(u),l=e("babel-runtime/helpers/possibleConstructorReturn"),f=n(l),d=e("babel-runtime/helpers/inherits"),h=n(d),p=e("./EventEmitter"),y=n(p),v=e("./CoreManager"),_=n(v),b=function(e){function t(e,r,n){(0,a["default"])(this,t);var o=(0,f["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this));return o.id=e,o.query=r,o.sessionToken=n,o}return(0,h["default"])(t,e),(0,c["default"])(t,[{key:"unsubscribe",value:function(){var e=this,t=this;_["default"].getLiveQueryController().getDefaultLiveQueryClient().then(function(r){r.unsubscribe(t),t.emit("close"),e.resolve()})}}]),t}(y["default"]);r["default"]=b},{"./CoreManager":3,"./EventEmitter":4,"babel-runtime/core-js/object/get-prototype-of":50,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57,"babel-runtime/helpers/inherits":59,"babel-runtime/helpers/possibleConstructorReturn":60}],9:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(){return{serverData:{},pendingOps:[{}],objectCache:{},tasks:new E["default"],existed:!1}}function i(e,t){for(var r in t)"undefined"!=typeof t[r]?e[r]=t[r]:delete e[r]}function s(e,t,r){var n=e.length-1;r?e[n][t]=r:delete e[n][t]}function a(e){e.push({})}function u(e){var t=e.shift();return e.length||(e[0]={}),t}function c(e){var t=u(e),r=e[0];for(var n in t)if(r[n]&&t[n]){var o=r[n].mergeWith(t[n]);o&&(r[n]=o)}else r[n]=t[n]}function l(e,t,r,n,o){for(var i=e[o],s=0;s<t.length;s++)t[s][o]&&(t[s][o]instanceof A.RelationOp?n&&(i=t[s][o].applyTo(i,{className:r,id:n},o)):i=t[s][o].applyTo(i));return i}function f(e,t,r,n){var o={},i=void 0;for(i in e)o[i]=e[i];for(var s=0;s<t.length;s++)for(i in t[s])t[s][i]instanceof A.RelationOp?n&&(o[i]=t[s][i].applyTo(o[i],{className:r,id:n},i)):o[i]=t[s][i].applyTo(o[i]);return o}function d(e,t,r){for(var n in r){var o=r[n];if(e[n]=o,o&&"object"===("undefined"==typeof o?"undefined":(0,v["default"])(o))&&!(o instanceof C["default"])&&!(o instanceof m["default"])&&!(o instanceof S["default"])){var i=(0,b["default"])(o,!1,!0);t[n]=(0,p["default"])(i)}}}Object.defineProperty(r,"__esModule",{value:!0});var h=e("babel-runtime/core-js/json/stringify"),p=n(h),y=e("babel-runtime/helpers/typeof"),v=n(y);r.defaultState=o,r.setServerData=i,r.setPendingOp=s,r.pushPendingState=a,r.popPendingState=u,r.mergeFirstPendingState=c,r.estimateAttribute=l,r.estimateAttributes=f,r.commitServerChanges=d;var _=e("./encode"),b=n(_),g=e("./ParseFile"),m=n(g),k=e("./ParseObject"),C=n(k),w=e("./ParsePromise"),j=(n(w),e("./ParseRelation")),S=n(j),O=e("./TaskQueue"),E=n(O),A=e("./ParseOp")},{"./ParseFile":14,"./ParseObject":18,"./ParseOp":19,"./ParsePromise":20,"./ParseRelation":22,"./TaskQueue":31,"./encode":36,"babel-runtime/core-js/json/stringify":44,"babel-runtime/helpers/typeof":61}],10:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}var i=e("./decode"),s=o(i),a=e("./encode"),u=o(a),c=e("./CoreManager"),l=o(c),f=e("./InstallationController"),d=o(f),h=e("./ParseOp"),p=n(h),y=e("./RESTController"),v=o(y),_={initialize:function(e,t){l["default"].get("IS_NODE")&&console.log("It looks like you're using the browser version of the SDK in a node.js environment. You should require('parse/node') instead."),_._initialize(e,t)},_initialize:function(e,t,r){l["default"].set("APPLICATION_ID",e),l["default"].set("JAVASCRIPT_KEY",t),l["default"].set("MASTER_KEY",r),l["default"].set("USE_MASTER_KEY",!1)}};Object.defineProperty(_,"applicationId",{get:function(){return l["default"].get("APPLICATION_ID")},set:function(e){l["default"].set("APPLICATION_ID",e)}}),Object.defineProperty(_,"javaScriptKey",{get:function(){return l["default"].get("JAVASCRIPT_KEY")},set:function(e){l["default"].set("JAVASCRIPT_KEY",e)}}),Object.defineProperty(_,"masterKey",{get:function(){return l["default"].get("MASTER_KEY")},set:function(e){l["default"].set("MASTER_KEY",e)}}),Object.defineProperty(_,"serverURL",{get:function(){return l["default"].get("SERVER_URL")},set:function(e){l["default"].set("SERVER_URL",e)}}),Object.defineProperty(_,"liveQueryServerURL",{get:function(){return l["default"].get("LIVEQUERY_SERVER_URL")},set:function(e){l["default"].set("LIVEQUERY_SERVER_URL",e)}}),_.ACL=e("./ParseACL")["default"],_.Analytics=e("./Analytics"),_.Cloud=e("./Cloud"),_.CoreManager=e("./CoreManager"),_.Config=e("./ParseConfig")["default"],_.Error=e("./ParseError")["default"],_.FacebookUtils=e("./FacebookUtils")["default"],_.File=e("./ParseFile")["default"],_.GeoPoint=e("./ParseGeoPoint")["default"],_.Installation=e("./ParseInstallation")["default"],_.Object=e("./ParseObject")["default"],_.Op={Set:p.SetOp,Unset:p.UnsetOp,Increment:p.IncrementOp,Add:p.AddOp,Remove:p.RemoveOp,AddUnique:p.AddUniqueOp,Relation:p.RelationOp},_.Promise=e("./ParsePromise")["default"],_.Push=e("./Push"),_.Query=e("./ParseQuery")["default"],_.Relation=e("./ParseRelation")["default"],_.Role=e("./ParseRole")["default"],_.Session=e("./ParseSession")["default"],_.Storage=e("./Storage"),_.User=e("./ParseUser")["default"],_.LiveQuery=e("./ParseLiveQuery")["default"],_.LiveQueryClient=e("./LiveQueryClient")["default"],_._request=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return l["default"].getRESTController().request.apply(null,t)},_._ajax=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return l["default"].getRESTController().ajax.apply(null,t)},_._decode=function(e,t){return(0,s["default"])(t)},_._encode=function(e,t,r){return(0,u["default"])(e,r)},_._getInstallationId=function(){return l["default"].getInstallationController().currentInstallationId()},l["default"].setInstallationController(d["default"]),l["default"].setRESTController(v["default"]),_.Parse=_,t.exports=_},{"./Analytics":1,"./Cloud":2,"./CoreManager":3,"./FacebookUtils":5,"./InstallationController":6,"./LiveQueryClient":7,"./ParseACL":11,"./ParseConfig":12,"./ParseError":13,"./ParseFile":14,"./ParseGeoPoint":15,"./ParseInstallation":16,"./ParseLiveQuery":17,"./ParseObject":18,"./ParseOp":19,"./ParsePromise":20,"./ParseQuery":21,"./ParseRelation":22,"./ParseRole":23,"./ParseSession":24,"./ParseUser":25,"./Push":26,"./RESTController":27,"./Storage":29,"./decode":35,"./encode":36}],11:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/core-js/object/keys"),i=n(o),s=e("babel-runtime/helpers/typeof"),a=n(s),u=e("babel-runtime/helpers/classCallCheck"),c=n(u),l=e("babel-runtime/helpers/createClass"),f=n(l),d=e("./ParseRole"),h=n(d),p=e("./ParseUser"),y=n(p),v="*",_=function(){function e(t){if((0,c["default"])(this,e),this.permissionsById={},t&&"object"===("undefined"==typeof t?"undefined":(0,a["default"])(t)))if(t instanceof y["default"])this.setReadAccess(t,!0),this.setWriteAccess(t,!0);else for(var r in t){var n=t[r];if("string"!=typeof r)throw new TypeError("Tried to create an ACL with an invalid user id.");this.permissionsById[r]={};for(var o in n){var i=n[o];if("read"!==o&&"write"!==o)throw new TypeError("Tried to create an ACL with an invalid permission type.");if("boolean"!=typeof i)throw new TypeError("Tried to create an ACL with an invalid permission value.");this.permissionsById[r][o]=i}}else if("function"==typeof t)throw new TypeError("ParseACL constructed with a function. Did you forget ()?")}return(0,f["default"])(e,[{key:"toJSON",value:function(){var e={};for(var t in this.permissionsById)e[t]=this.permissionsById[t];return e}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var r=(0,i["default"])(this.permissionsById),n=(0,i["default"])(t.permissionsById);if(r.length!==n.length)return!1;for(var o in this.permissionsById){if(!t.permissionsById[o])return!1;if(this.permissionsById[o].read!==t.permissionsById[o].read)return!1;if(this.permissionsById[o].write!==t.permissionsById[o].write)return!1}return!0}},{key:"_setAccess",value:function(e,t,r){if(t instanceof y["default"])t=t.id;else if(t instanceof h["default"]){var n=t.getName();if(!n)throw new TypeError("Role must have a name");t="role:"+n}if("string"!=typeof t)throw new TypeError("userId must be a string.");if("boolean"!=typeof r)throw new TypeError("allowed must be either true or false.");var o=this.permissionsById[t];if(!o){if(!r)return;o={},this.permissionsById[t]=o}r?this.permissionsById[t][e]=!0:(delete o[e],0===(0,i["default"])(o).length&&delete this.permissionsById[t])}},{key:"_getAccess",value:function(e,t){if(t instanceof y["default"]){if(t=t.id,!t)throw new Error("Cannot get access for a ParseUser without an ID")}else if(t instanceof h["default"]){var r=t.getName();if(!r)throw new TypeError("Role must have a name");t="role:"+r}var n=this.permissionsById[t];return!!n&&!!n[e]}},{key:"setReadAccess",value:function(e,t){this._setAccess("read",e,t)}},{key:"getReadAccess",value:function(e){return this._getAccess("read",e)}},{key:"setWriteAccess",value:function(e,t){this._setAccess("write",e,t)}},{key:"getWriteAccess",value:function(e){return this._getAccess("write",e)}},{key:"setPublicReadAccess",value:function(e){this.setReadAccess(v,e)}},{key:"getPublicReadAccess",value:function(){return this.getReadAccess(v)}},{key:"setPublicWriteAccess",value:function(e){this.setWriteAccess(v,e)}},{key:"getPublicWriteAccess",value:function(){return this.getWriteAccess(v)}},{key:"getRoleReadAccess",value:function(e){if(e instanceof h["default"]&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");return this.getReadAccess("role:"+e)}},{key:"getRoleWriteAccess",value:function(e){if(e instanceof h["default"]&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");return this.getWriteAccess("role:"+e)}},{key:"setRoleReadAccess",value:function(e,t){if(e instanceof h["default"]&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");this.setReadAccess("role:"+e,t)}},{key:"setRoleWriteAccess",value:function(e,t){if(e instanceof h["default"]&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");this.setWriteAccess("role:"+e,t)}}]),e}();r["default"]=_},{"./ParseRole":23,"./ParseUser":25,"babel-runtime/core-js/object/keys":51,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57,"babel-runtime/helpers/typeof":61}],12:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){try{var t=JSON.parse(e);if(t&&"object"===("undefined"==typeof t?"undefined":(0,u["default"])(t)))return(0,v["default"])(t)}catch(r){return null}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/core-js/json/stringify"),s=n(i),a=e("babel-runtime/helpers/typeof"),u=n(a),c=e("babel-runtime/helpers/classCallCheck"),l=n(c),f=e("babel-runtime/helpers/createClass"),d=n(f),h=e("./CoreManager"),p=n(h),y=e("./decode"),v=n(y),_=e("./encode"),b=(n(_),e("./escape")),g=n(b),m=e("./ParseError"),k=n(m),C=e("./ParsePromise"),w=n(C),j=e("./Storage"),S=n(j),O=function(){function e(){(0,l["default"])(this,e),this.attributes={},this._escapedAttributes={}}return(0,d["default"])(e,[{key:"get",value:function(e){return this.attributes[e]}},{key:"escape",value:function(e){var t=this._escapedAttributes[e];if(t)return t;var r=this.attributes[e],n="";return null!=r&&(n=(0,g["default"])(r.toString())),this._escapedAttributes[e]=n,n}}],[{key:"current",value:function(){var e=p["default"].getConfigController();return e.current()}},{key:"get",value:function(e){e=e||{};var t=p["default"].getConfigController();return t.get()._thenRunCallbacks(e)}}]),e}();r["default"]=O;var E=null,A="currentConfig",P={current:function(){if(E)return E;var e,t=new O,r=S["default"].generatePath(A);if(!S["default"].async()){if(e=S["default"].getItem(r)){var n=o(e);n&&(t.attributes=n,E=t)}return t}return S["default"].getItemAsync(r).then(function(e){
if(e){var r=o(e);r&&(t.attributes=r,E=t)}return t})},get:function(){var e=p["default"].getRESTController();return e.request("GET","config",{},{}).then(function(e){if(!e||!e.params){var t=new k["default"](k["default"].INVALID_JSON,"Config JSON response invalid.");return w["default"].error(t)}var r=new O;r.attributes={};for(var n in e.params)r.attributes[n]=(0,v["default"])(e.params[n]);return E=r,S["default"].setItemAsync(S["default"].generatePath(A),(0,s["default"])(e.params)).then(function(){return r})})}};p["default"].setConfigController(P)},{"./CoreManager":3,"./ParseError":13,"./ParsePromise":20,"./Storage":29,"./decode":35,"./encode":36,"./escape":38,"babel-runtime/core-js/json/stringify":44,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57,"babel-runtime/helpers/typeof":61}],13:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/helpers/classCallCheck"),i=n(o),s=function a(e,t){(0,i["default"])(this,a),this.code=e,this.message=t};r["default"]=s,s.OTHER_CAUSE=-1,s.INTERNAL_SERVER_ERROR=1,s.CONNECTION_FAILED=100,s.OBJECT_NOT_FOUND=101,s.INVALID_QUERY=102,s.INVALID_CLASS_NAME=103,s.MISSING_OBJECT_ID=104,s.INVALID_KEY_NAME=105,s.INVALID_POINTER=106,s.INVALID_JSON=107,s.COMMAND_UNAVAILABLE=108,s.NOT_INITIALIZED=109,s.INCORRECT_TYPE=111,s.INVALID_CHANNEL_NAME=112,s.PUSH_MISCONFIGURED=115,s.OBJECT_TOO_LARGE=116,s.OPERATION_FORBIDDEN=119,s.CACHE_MISS=120,s.INVALID_NESTED_KEY=121,s.INVALID_FILE_NAME=122,s.INVALID_ACL=123,s.TIMEOUT=124,s.INVALID_EMAIL_ADDRESS=125,s.MISSING_CONTENT_TYPE=126,s.MISSING_CONTENT_LENGTH=127,s.INVALID_CONTENT_LENGTH=128,s.FILE_TOO_LARGE=129,s.FILE_SAVE_ERROR=130,s.DUPLICATE_VALUE=137,s.INVALID_ROLE_NAME=139,s.EXCEEDED_QUOTA=140,s.SCRIPT_FAILED=141,s.VALIDATION_ERROR=142,s.INVALID_IMAGE_DATA=143,s.UNSAVED_FILE_ERROR=151,s.INVALID_PUSH_TIME_ERROR=152,s.FILE_DELETE_ERROR=153,s.REQUEST_LIMIT_EXCEEDED=155,s.INVALID_EVENT_NAME=160,s.USERNAME_MISSING=200,s.PASSWORD_MISSING=201,s.USERNAME_TAKEN=202,s.EMAIL_TAKEN=203,s.EMAIL_MISSING=204,s.EMAIL_NOT_FOUND=205,s.SESSION_MISSING=206,s.MUST_CREATE_USER_THROUGH_SIGNUP=207,s.ACCOUNT_ALREADY_LINKED=208,s.INVALID_SESSION_TOKEN=209,s.LINKED_ID_MISSING=250,s.INVALID_LINKED_SESSION=251,s.UNSUPPORTED_SERVICE=252,s.AGGREGATE_ERROR=600,s.FILE_READ_ERROR=601,s.X_DOMAIN_REQUEST=602},{"babel-runtime/helpers/classCallCheck":56}],14:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e<26)return String.fromCharCode(65+e);if(e<52)return String.fromCharCode(97+(e-26));if(e<62)return String.fromCharCode(48+(e-52));if(62===e)return"+";if(63===e)return"/";throw new TypeError("Tried to encode large digit "+e+" in base64.")}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/helpers/classCallCheck"),s=n(i),a=e("babel-runtime/helpers/createClass"),u=n(a),c=e("./CoreManager"),l=n(c),f=e("./ParsePromise"),d=(n(f),/^data:([a-zA-Z]*\/[a-zA-Z+.-]*);(charset=[a-zA-Z0-9\-\/\s]*,)?base64,/),h=function(){function e(t,r,n){(0,s["default"])(this,e);var o=n||"";if(this._name=t,void 0!==r)if(Array.isArray(r))this._source={format:"base64",base64:e.encodeBase64(r),type:o};else if("undefined"!=typeof File&&r instanceof File)this._source={format:"file",file:r,type:o};else{if(!r||"string"!=typeof r.base64)throw new TypeError("Cannot create a Parse.File with that data.");var i=r.base64,a=i.indexOf(",");if(a!==-1){var u=d.exec(i.slice(0,a+1));this._source={format:"base64",base64:i.slice(a+1),type:u[1]}}else this._source={format:"base64",base64:i,type:o}}}return(0,u["default"])(e,[{key:"name",value:function(){return this._name}},{key:"url",value:function(e){if(e=e||{},this._url)return e.forceSecure?this._url.replace(/^http:\/\//i,"https://"):this._url}},{key:"save",value:function(e){var t=this;e=e||{};var r=l["default"].getFileController();if(this._previousSave||("file"===this._source.format?this._previousSave=r.saveFile(this._name,this._source).then(function(e){return t._name=e.name,t._url=e.url,t}):this._previousSave=r.saveBase64(this._name,this._source).then(function(e){return t._name=e.name,t._url=e.url,t})),this._previousSave)return this._previousSave._thenRunCallbacks(e)}},{key:"toJSON",value:function(){return{__type:"File",name:this._name,url:this._url}}},{key:"equals",value:function(t){return this===t||t instanceof e&&this.name()===t.name()&&this.url()===t.url()&&"undefined"!=typeof this.url()}}],[{key:"fromJSON",value:function(t){if("File"!==t.__type)throw new TypeError("JSON object does not represent a ParseFile");var r=new e(t.name);return r._url=t.url,r}},{key:"encodeBase64",value:function(e){var t=[];t.length=Math.ceil(e.length/3);for(var r=0;r<t.length;r++){var n=e[3*r],i=e[3*r+1]||0,s=e[3*r+2]||0,a=3*r+1<e.length,u=3*r+2<e.length;t[r]=[o(n>>2&63),o(n<<4&48|i>>4&15),a?o(i<<2&60|s>>6&3):"=",u?o(63&s):"="].join("")}return t.join("")}}]),e}();r["default"]=h;var p={saveFile:function(e,t){if("file"!==t.format)throw new Error("saveFile can only be used with File-type sources.");var r={"X-Parse-Application-ID":l["default"].get("APPLICATION_ID"),"X-Parse-JavaScript-Key":l["default"].get("JAVASCRIPT_KEY"),"Content-Type":t.type||(t.file?t.file.type:null)},n=l["default"].get("SERVER_URL");return"/"!==n[n.length-1]&&(n+="/"),n+="files/"+e,l["default"].getRESTController().ajax("POST",n,t.file,r)},saveBase64:function(e,t){if("base64"!==t.format)throw new Error("saveBase64 can only be used with Base64-type sources.");var r={base64:t.base64};return t.type&&(r._ContentType=t.type),l["default"].getRESTController().request("POST","files/"+e,r)}};l["default"].setFileController(p)},{"./CoreManager":3,"./ParsePromise":20,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57}],15:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/helpers/typeof"),i=n(o),s=e("babel-runtime/helpers/classCallCheck"),a=n(s),u=e("babel-runtime/helpers/createClass"),c=n(u),l=e("./ParsePromise"),f=n(l),d=function(){function e(t,r){(0,a["default"])(this,e),Array.isArray(t)?(e._validate(t[0],t[1]),this._latitude=t[0],this._longitude=t[1]):"object"===("undefined"==typeof t?"undefined":(0,i["default"])(t))?(e._validate(t.latitude,t.longitude),this._latitude=t.latitude,this._longitude=t.longitude):"number"==typeof t&&"number"==typeof r?(e._validate(t,r),this._latitude=t,this._longitude=r):(this._latitude=0,this._longitude=0)}return(0,c["default"])(e,[{key:"toJSON",value:function(){return e._validate(this._latitude,this._longitude),{__type:"GeoPoint",latitude:this._latitude,longitude:this._longitude}}},{key:"equals",value:function(t){return t instanceof e&&this.latitude===t.latitude&&this.longitude===t.longitude}},{key:"radiansTo",value:function(e){var t=Math.PI/180,r=this.latitude*t,n=this.longitude*t,o=e.latitude*t,i=e.longitude*t,s=Math.sin((r-o)/2),a=Math.sin((n-i)/2),u=s*s+Math.cos(r)*Math.cos(o)*a*a;return u=Math.min(1,u),2*Math.asin(Math.sqrt(u))}},{key:"kilometersTo",value:function(e){return 6371*this.radiansTo(e)}},{key:"milesTo",value:function(e){return 3958.8*this.radiansTo(e)}},{key:"latitude",get:function(){return this._latitude},set:function(t){e._validate(t,this.longitude),this._latitude=t}},{key:"longitude",get:function(){return this._longitude},set:function(t){e._validate(this.latitude,t),this._longitude=t}}],[{key:"_validate",value:function(e,t){if(e!==e||t!==t)throw new TypeError("GeoPoint latitude and longitude must be valid numbers");if(e<-90)throw new TypeError("GeoPoint latitude out of bounds: "+e+" < -90.0.");if(e>90)throw new TypeError("GeoPoint latitude out of bounds: "+e+" > 90.0.");if(t<-180)throw new TypeError("GeoPoint longitude out of bounds: "+t+" < -180.0.");if(t>180)throw new TypeError("GeoPoint longitude out of bounds: "+t+" > 180.0.")}},{key:"current",value:function(t){var r=new f["default"];return navigator.geolocation.getCurrentPosition(function(t){r.resolve(new e(t.coords.latitude,t.coords.longitude))},function(e){r.reject(e)}),r._thenRunCallbacks(t)}}]),e}();r["default"]=d},{"./ParsePromise":20,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57,"babel-runtime/helpers/typeof":61}],16:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/helpers/typeof"),i=n(o),s=e("babel-runtime/core-js/object/get-prototype-of"),a=n(s),u=e("babel-runtime/helpers/classCallCheck"),c=n(u),l=e("babel-runtime/helpers/possibleConstructorReturn"),f=n(l),d=e("babel-runtime/helpers/inherits"),h=n(d),p=e("./ParseObject"),y=n(p),v=function(e){function t(e){(0,c["default"])(this,t);var r=(0,f["default"])(this,(t.__proto__||(0,a["default"])(t)).call(this,"_Installation"));if(e&&"object"===("undefined"==typeof e?"undefined":(0,i["default"])(e))&&!r.set(e||{}))throw new Error("Can't create an invalid Session");return r}return(0,h["default"])(t,e),t}(y["default"]);r["default"]=v,y["default"].registerSubclass("_Installation",v)},{"./ParseObject":18,"babel-runtime/core-js/object/get-prototype-of":50,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/inherits":59,"babel-runtime/helpers/possibleConstructorReturn":60,"babel-runtime/helpers/typeof":61}],17:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=h["default"].getLiveQueryController();e.open()}function i(){var e=h["default"].getLiveQueryController();e.close()}function s(){var e=h["default"].getUserController();return e.currentUserAsync().then(function(e){return e?e.getSessionToken():void 0})}function a(){return h["default"].getLiveQueryController().getDefaultLiveQueryClient()}Object.defineProperty(r,"__esModule",{value:!0});var u=e("./EventEmitter"),c=n(u),l=e("./LiveQueryClient"),f=n(l),d=e("./CoreManager"),h=n(d),p=e("./ParsePromise"),y=n(p),v=new c["default"];v.open=o,v.close=i,v.on("error",function(){}),r["default"]=v;var _=void 0,b={setDefaultLiveQueryClient:function(e){_=e},getDefaultLiveQueryClient:function(){return _?y["default"].as(_):s().then(function(e){var t=h["default"].get("LIVEQUERY_SERVER_URL");if(t&&0!==t.indexOf("ws"))throw new Error("You need to set a proper Parse LiveQuery server url before using LiveQueryClient");if(!t){var r=h["default"].get("SERVER_URL"),n="ws://";0===r.indexOf("https")&&(n="wss://");var o=r.replace(/^https?:\/\//,"");t=n+o,h["default"].set("LIVEQUERY_SERVER_URL",t)}var i=h["default"].get("APPLICATION_ID"),s=h["default"].get("JAVASCRIPT_KEY"),a=h["default"].get("MASTER_KEY");return _=new f["default"]({applicationId:i,serverURL:t,javascriptKey:s,masterKey:a,sessionToken:e}),_.on("error",function(e){v.emit("error",e)}),_.on("open",function(){v.emit("open")}),_.on("close",function(){v.emit("close")}),_})},open:function(){var e=this;a().then(function(t){e.resolve(t.open())})},close:function(){var e=this;a().then(function(t){e.resolve(t.close())})},subscribe:function(e){var t=this,r=new c["default"];return a().then(function(n){n.shouldOpen()&&n.open();var o=s();return o.then(function(o){var i=n.subscribe(e,o);r.id=i.id,r.query=i.query,r.sessionToken=i.sessionToken,r.unsubscribe=i.unsubscribe,i.on("open",function(){r.emit("open")}),i.on("create",function(e){r.emit("create",e)}),i.on("update",function(e){r.emit("update",e)}),i.on("enter",function(e){r.emit("enter",e)}),i.on("leave",function(e){r.emit("leave",e)}),i.on("delete",function(e){r.emit("delete",e)}),t.resolve()})}),r},unsubscribe:function(e){var t=this;a().then(function(r){t.resolve(r.unsubscribe(e))})},_clearCachedDefaultClient:function(){_=null}};h["default"].setLiveQueryController(b)},{"./CoreManager":3,"./EventEmitter":4,"./LiveQueryClient":7,"./ParsePromise":20}],18:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(){var e=w["default"].get("SERVER_URL");"/"!==e[e.length-1]&&(e+="/");var t=e.replace(/https?:\/\//,"");return t.substr(t.indexOf("/"))}Object.defineProperty(r,"__esModule",{value:!0});var s=e("babel-runtime/core-js/object/define-property"),a=o(s),u=e("babel-runtime/core-js/object/create"),c=o(u),l=e("babel-runtime/core-js/object/freeze"),f=o(l),d=e("babel-runtime/core-js/json/stringify"),h=o(d),p=e("babel-runtime/core-js/object/keys"),y=o(p),v=e("babel-runtime/helpers/typeof"),_=o(v),b=e("babel-runtime/helpers/classCallCheck"),g=o(b),m=e("babel-runtime/helpers/createClass"),k=o(m),C=e("./CoreManager"),w=o(C),j=e("./canBeSerialized"),S=o(j),O=e("./decode"),E=o(O),A=e("./encode"),P=o(A),T=e("./equals"),N=(o(T),e("./escape")),I=o(N),R=e("./ParseACL"),x=o(R),M=e("./parseDate"),U=o(M),D=e("./ParseError"),L=o(D),B=e("./ParseFile"),q=o(B),F=e("./ParseOp"),J=e("./ParsePromise"),K=o(J),W=e("./ParseQuery"),z=o(W),Q=e("./ParseRelation"),H=o(Q),G=e("./SingleInstanceStateController"),V=n(G),Y=e("./unique"),X=o(Y),$=e("./UniqueInstanceStateController"),Z=n($),ee=e("./unsavedChildren"),te=o(ee),re={},ne=0,oe=0,ie=!w["default"].get("IS_NODE");ie?w["default"].setObjectStateController(V):w["default"].setObjectStateController(Z);var se=function(){function e(t,r,n){(0,g["default"])(this,e),"function"==typeof this.initialize&&this.initialize.apply(this,arguments);var o=null;if(this._objCount=oe++,"string"==typeof t)this.className=t,r&&"object"===("undefined"==typeof r?"undefined":(0,_["default"])(r))&&(o=r);else if(t&&"object"===("undefined"==typeof t?"undefined":(0,_["default"])(t))){this.className=t.className,o={};for(var i in t)"className"!==i&&(o[i]=t[i]);r&&"object"===("undefined"==typeof r?"undefined":(0,_["default"])(r))&&(n=r)}if(o&&!this.set(o,n))throw new Error("Can't create an invalid Parse Object")}return(0,k["default"])(e,[{key:"_getId",value:function(){if("string"==typeof this.id)return this.id;if("string"==typeof this._localId)return this._localId;var e="local"+String(ne++);return this._localId=e,e}},{key:"_getStateIdentifier",value:function(){if(ie){var e=this.id;return e||(e=this._getId()),{id:e,className:this.className}}return this}},{key:"_getServerData",value:function(){var e=w["default"].getObjectStateController();return e.getServerData(this._getStateIdentifier())}},{key:"_clearServerData",value:function(){var e=this._getServerData(),t={};for(var r in e)t[r]=void 0;var n=w["default"].getObjectStateController();n.setServerData(this._getStateIdentifier(),t)}},{key:"_getPendingOps",value:function(){var e=w["default"].getObjectStateController();return e.getPendingOps(this._getStateIdentifier())}},{key:"_clearPendingOps",value:function(){var e=this._getPendingOps(),t=e[e.length-1],r=(0,y["default"])(t);r.forEach(function(e){delete t[e]})}},{key:"_getDirtyObjectAttributes",value:function(){var t=this.attributes,r=w["default"].getObjectStateController(),n=r.getObjectCache(this._getStateIdentifier()),o={};for(var i in t){var s=t[i];if(s&&"object"===("undefined"==typeof s?"undefined":(0,_["default"])(s))&&!(s instanceof e)&&!(s instanceof q["default"])&&!(s instanceof H["default"]))try{var a=(0,P["default"])(s,!1,!0),u=(0,h["default"])(a);n[i]!==u&&(o[i]=s)}catch(c){o[i]=s}}return o}},{key:"_toFullJSON",value:function(e){var t=this.toJSON(e);return t.__type="Object",t.className=this.className,t}},{key:"_getSaveJSON",value:function(){var e=this._getPendingOps(),t=this._getDirtyObjectAttributes(),r={};for(var n in t)r[n]=new F.SetOp(t[n]).toJSON();for(n in e[0])r[n]=e[0][n].toJSON();return r}},{key:"_getSaveParams",value:function(){var e=this.id?"PUT":"POST",t=this._getSaveJSON(),r="classes/"+this.className;return this.id?r+="/"+this.id:"_User"===this.className&&(r="users"),{method:e,body:t,path:r}}},{key:"_finishFetch",value:function(e){!this.id&&e.objectId&&(this.id=e.objectId);var t=w["default"].getObjectStateController();t.initializeState(this._getStateIdentifier());var r={};for(var n in e)"ACL"===n?r[n]=new x["default"](e[n]):"objectId"!==n&&(r[n]=(0,E["default"])(e[n]),r[n]instanceof H["default"]&&r[n]._ensureParentAndKey(this,n));r.createdAt&&"string"==typeof r.createdAt&&(r.createdAt=(0,U["default"])(r.createdAt)),r.updatedAt&&"string"==typeof r.updatedAt&&(r.updatedAt=(0,U["default"])(r.updatedAt)),!r.updatedAt&&r.createdAt&&(r.updatedAt=r.createdAt),t.commitServerChanges(this._getStateIdentifier(),r)}},{key:"_setExisted",value:function(e){var t=w["default"].getObjectStateController(),r=t.getState(this._getStateIdentifier());r&&(r.existed=e)}},{key:"_migrateId",value:function(e){if(this._localId&&e)if(ie){var t=w["default"].getObjectStateController(),r=t.removeState(this._getStateIdentifier());this.id=e,delete this._localId,r&&t.initializeState(this._getStateIdentifier(),r)}else this.id=e,delete this._localId}},{key:"_handleSaveResponse",value:function(e,t){var r={},n=w["default"].getObjectStateController(),o=n.popPendingState(this._getStateIdentifier());for(var i in o)o[i]instanceof F.RelationOp?r[i]=o[i].applyTo(void 0,this,i):i in e||(r[i]=o[i].applyTo(void 0));for(i in e)"createdAt"!==i&&"updatedAt"!==i||"string"!=typeof e[i]?"ACL"===i?r[i]=new x["default"](e[i]):"objectId"!==i&&(r[i]=(0,E["default"])(e[i]),r[i]instanceof F.UnsetOp&&(r[i]=void 0)):r[i]=(0,U["default"])(e[i]);r.createdAt&&!r.updatedAt&&(r.updatedAt=r.createdAt),this._migrateId(e.objectId),201!==t&&this._setExisted(!0),n.commitServerChanges(this._getStateIdentifier(),r)}},{key:"_handleSaveError",value:function(){this._getPendingOps();var e=w["default"].getObjectStateController();e.mergeFirstPendingState(this._getStateIdentifier())}},{key:"initialize",value:function(){}},{key:"toJSON",value:function(e){var t=this.id?this.className+":"+this.id:this,e=e||[t],r={},n=this.attributes;for(var o in n)"createdAt"!==o&&"updatedAt"!==o||!n[o].toJSON?r[o]=(0,P["default"])(n[o],!1,!1,e):r[o]=n[o].toJSON();var i=this._getPendingOps();for(var o in i[0])r[o]=i[0][o].toJSON();return this.id&&(r.objectId=this.id),r}},{key:"equals",value:function(t){return this===t||t instanceof e&&this.className===t.className&&this.id===t.id&&"undefined"!=typeof this.id}},{key:"dirty",value:function(e){if(!this.id)return!0;var t=this._getPendingOps(),r=this._getDirtyObjectAttributes();if(e){if(r.hasOwnProperty(e))return!0;for(var n=0;n<t.length;n++)if(t[n].hasOwnProperty(e))return!0;return!1}return 0!==(0,y["default"])(t[0]).length||0!==(0,y["default"])(r).length}},{key:"dirtyKeys",value:function(){for(var e=this._getPendingOps(),t={},r=0;r<e.length;r++)for(var n in e[r])t[n]=!0;var o=this._getDirtyObjectAttributes();for(var n in o)t[n]=!0;return(0,y["default"])(t)}},{key:"toPointer",value:function(){if(!this.id)throw new Error("Cannot create a pointer to an unsaved ParseObject");return{__type:"Pointer",className:this.className,objectId:this.id}}},{key:"get",value:function(e){return this.attributes[e]}},{key:"relation",value:function(e){var t=this.get(e);if(t){if(!(t instanceof H["default"]))throw new Error("Called relation() on non-relation field "+e);return t._ensureParentAndKey(this,e),t}return new H["default"](this,e)}},{key:"escape",value:function(e){var t=this.attributes[e];if(null==t)return"";if("string"!=typeof t){if("function"!=typeof t.toString)return"";t=t.toString()}return(0,I["default"])(t)}},{key:"has",value:function(e){var t=this.attributes;return!!t.hasOwnProperty(e)&&null!=t[e]}},{key:"set",value:function(e,t,r){var n={},o={};if(e&&"object"===("undefined"==typeof e?"undefined":(0,_["default"])(e)))n=e,r=t;else{if("string"!=typeof e)return this;n[e]=t}r=r||{};var i=[];"function"==typeof this.constructor.readOnlyAttributes&&(i=i.concat(this.constructor.readOnlyAttributes()));for(var s in n)if("createdAt"!==s&&"updatedAt"!==s){if(i.indexOf(s)>-1)throw new Error("Cannot modify readonly attribute: "+s);r.unset?o[s]=new F.UnsetOp:n[s]instanceof F.Op?o[s]=n[s]:n[s]&&"object"===(0,_["default"])(n[s])&&"string"==typeof n[s].__op?o[s]=(0,F.opFromJSON)(n[s]):"objectId"===s||"id"===s?"string"==typeof n[s]&&(this.id=n[s]):"ACL"!==s||"object"!==(0,_["default"])(n[s])||n[s]instanceof x["default"]?o[s]=new F.SetOp(n[s]):o[s]=new F.SetOp(new x["default"](n[s]))}var a=this.attributes,u={};for(var c in o)o[c]instanceof F.RelationOp?u[c]=o[c].applyTo(a[c],this,c):o[c]instanceof F.UnsetOp||(u[c]=o[c].applyTo(a[c]));if(!r.ignoreValidation){var l=this.validate(u);if(l)return"function"==typeof r.error&&r.error(this,l),!1}var f=this._getPendingOps(),d=f.length-1,h=w["default"].getObjectStateController();for(var c in o){var p=o[c].mergeWith(f[d][c]);h.setPendingOp(this._getStateIdentifier(),c,p)}return this}},{key:"unset",value:function(e,t){return t=t||{},t.unset=!0,this.set(e,null,t)}},{key:"increment",value:function(e,t){if("undefined"==typeof t&&(t=1),"number"!=typeof t)throw new Error("Cannot increment by a non-numeric amount.");return this.set(e,new F.IncrementOp(t))}},{key:"add",value:function(e,t){return this.set(e,new F.AddOp([t]))}},{key:"addUnique",value:function(e,t){return this.set(e,new F.AddUniqueOp([t]))}},{key:"remove",value:function(e,t){return this.set(e,new F.RemoveOp([t]))}},{key:"op",value:function(e){for(var t=this._getPendingOps(),r=t.length;r--;)if(t[r][e])return t[r][e]}},{key:"clone",value:function(){var e=new this.constructor;e.className||(e.className=this.className);var t=this.attributes;if("function"==typeof this.constructor.readOnlyAttributes){var r=this.constructor.readOnlyAttributes()||[],n={};for(var o in t)r.indexOf(o)<0&&(n[o]=t[o]);t=n}return e.set&&e.set(t),e}},{key:"newInstance",value:function(){var e=new this.constructor;if(e.className||(e.className=this.className),e.id=this.id,ie)return e;var t=w["default"].getObjectStateController();return t&&t.duplicateState(this._getStateIdentifier(),e._getStateIdentifier()),e}},{key:"isNew",value:function(){return!this.id}},{key:"existed",value:function(){if(!this.id)return!1;var e=w["default"].getObjectStateController(),t=e.getState(this._getStateIdentifier());return!!t&&t.existed}},{key:"isValid",value:function(){return!this.validate(this.attributes)}},{key:"validate",value:function(e){if(e.hasOwnProperty("ACL")&&!(e.ACL instanceof x["default"]))return new L["default"](L["default"].OTHER_CAUSE,"ACL must be a Parse ACL.");for(var t in e)if(!/^[A-Za-z][0-9A-Za-z_]*$/.test(t))return new L["default"](L["default"].INVALID_KEY_NAME);return!1}},{key:"getACL",value:function(){var e=this.get("ACL");return e instanceof x["default"]?e:null}},{key:"setACL",value:function(e,t){return this.set("ACL",e,t)}},{key:"revert",value:function(){this._clearPendingOps()}},{key:"clear",value:function(){var e=this.attributes,t={},r=["createdAt","updatedAt"];"function"==typeof this.constructor.readOnlyAttributes&&(r=r.concat(this.constructor.readOnlyAttributes()));for(var n in e)r.indexOf(n)<0&&(t[n]=!0);return this.set(t,{unset:!0})}},{key:"fetch",value:function(e){e=e||{};var t={};e.hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken);var r=w["default"].getObjectController();return r.fetch(this,!0,t)._thenRunCallbacks(e)}},{key:"save",value:function(e,t,r){var n,o,i=this;if("object"===("undefined"==typeof e?"undefined":(0,_["default"])(e))||"undefined"==typeof e?(n=e,"object"===("undefined"==typeof t?"undefined":(0,_["default"])(t))&&(o=t)):(n={},n[e]=t,o=r),!o&&n&&(o={},"function"==typeof n.success&&(o.success=n.success,delete n.success),"function"==typeof n.error&&(o.error=n.error,delete n.error)),n){var s=this.validate(n);if(s)return o&&"function"==typeof o.error&&o.error(this,s),K["default"].error(s);this.set(n,o)}o=o||{};var a={};o.hasOwnProperty("useMasterKey")&&(a.useMasterKey=!!o.useMasterKey),o.hasOwnProperty("sessionToken")&&"string"==typeof o.sessionToken&&(a.sessionToken=o.sessionToken);var u=w["default"].getObjectController(),c=(0,te["default"])(this);return u.save(c,a).then(function(){return u.save(i,a)})._thenRunCallbacks(o,this)}},{key:"destroy",value:function(e){e=e||{};var t={};return e.hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken),this.id?w["default"].getObjectController().destroy(this,t)._thenRunCallbacks(e):K["default"].as()._thenRunCallbacks(e)}},{key:"attributes",get:function(){var e=w["default"].getObjectStateController();return(0,f["default"])(e.estimateAttributes(this._getStateIdentifier()))}},{key:"createdAt",get:function(){return this._getServerData().createdAt}},{key:"updatedAt",get:function(){return this._getServerData().updatedAt}}],[{key:"_clearAllState",value:function(){var e=w["default"].getObjectStateController();e.clearAllState()}},{key:"fetchAll",value:function(e,t){var t=t||{},r={};return t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),w["default"].getObjectController().fetch(e,!0,r)._thenRunCallbacks(t)}},{key:"fetchAllIfNeeded",value:function(e,t){var t=t||{},r={};return t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),w["default"].getObjectController().fetch(e,!1,r)._thenRunCallbacks(t)}},{key:"destroyAll",value:function(e,t){var t=t||{},r={};return t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),w["default"].getObjectController().destroy(e,r)._thenRunCallbacks(t)}},{key:"saveAll",value:function(e,t){var t=t||{},r={};return t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),w["default"].getObjectController().save(e,r)._thenRunCallbacks(t)}},{key:"createWithoutData",value:function(e){var t=new this;return t.id=e,t}},{key:"fromJSON",value:function(t,r){if(!t.className)throw new Error("Cannot create an object without a className");var n=re[t.className],o=n?new n:new e(t.className),i={};for(var s in t)"className"!==s&&"__type"!==s&&(i[s]=t[s]);if(r){i.objectId&&(o.id=i.objectId);var a=null;"function"==typeof o._preserveFieldsOnFetch&&(a=o._preserveFieldsOnFetch()),o._clearServerData(),a&&o._finishFetch(a)}return o._finishFetch(i),t.objectId&&o._setExisted(!0),o}},{key:"registerSubclass",value:function(e,t){if("string"!=typeof e)throw new TypeError("The first argument must be a valid class name.");if("undefined"==typeof t)throw new TypeError("You must supply a subclass constructor.");if("function"!=typeof t)throw new TypeError("You must register the subclass constructor. Did you attempt to register an instance of the subclass?");re[e]=t,t.className||(t.className=e)}},{key:"extend",value:function(t,r,n){if("string"!=typeof t){if(t&&"string"==typeof t.className)return e.extend(t.className,t,r);throw new Error("Parse.Object.extend's first argument should be the className.")}var o=t;"User"===o&&w["default"].get("PERFORM_USER_REWRITE")&&(o="_User");var i=e.prototype;this.hasOwnProperty("__super__")&&this.__super__?i=this.prototype:re[o]&&(i=re[o].prototype);var s=function(e,t){if(this.className=o,this._objCount=oe++,"function"==typeof this.initialize&&this.initialize.apply(this,arguments),e&&"object"===("undefined"==typeof e?"undefined":(0,_["default"])(e))&&!this.set(e||{},t))throw new Error("Can't create an invalid Parse Object")};if(s.className=o,s.__super__=i,s.prototype=(0,c["default"])(i,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),r)for(var u in r)"className"!==u&&(0,a["default"])(s.prototype,u,{value:r[u],enumerable:!1,writable:!0,configurable:!0});if(n)for(var u in n)"className"!==u&&(0,a["default"])(s,u,{value:n[u],enumerable:!1,writable:!0,configurable:!0});return s.extend=function(t,r,n){return"string"==typeof t?e.extend.call(s,t,r,n):e.extend.call(s,o,t,r)},s.createWithoutData=e.createWithoutData,re[o]=s,s}},{key:"enableSingleInstance",value:function(){ie=!0,w["default"].setObjectStateController(V)}},{key:"disableSingleInstance",value:function(){ie=!1,w["default"].setObjectStateController(Z)}}]),e}();r["default"]=se;var ae={fetch:function(e,t,r){if(Array.isArray(e)){if(e.length<1)return K["default"].as([]);var n=[],o=[],i=null,s=[],a=null;if(e.forEach(function(e,r){a||(i||(i=e.className),i!==e.className&&(a=new L["default"](L["default"].INVALID_CLASS_NAME,"All objects should be of the same class")),e.id||(a=new L["default"](L["default"].MISSING_OBJECT_ID,"All objects must have an ID")),(t||0===(0,y["default"])(e._getServerData()).length)&&(o.push(e.id),n.push(e)),s.push(e))}),a)return K["default"].error(a);var u=new z["default"](i);return u.containedIn("objectId",o),u._limit=o.length,u.find(r).then(function(e){var r={};e.forEach(function(e){r[e.id]=e});for(var o=0;o<n.length;o++){var i=n[o];if((!i||!i.id||!r[i.id])&&t)return K["default"].error(new L["default"](L["default"].OBJECT_NOT_FOUND,"All objects must exist on the server."))}if(!ie)for(var o=0;o<s.length;o++){var i=s[o];if(i&&i.id&&r[i.id]){var a=i.id;i._finishFetch(r[a].toJSON()),s[o]=r[a]}}return K["default"].as(s)})}var c=w["default"].getRESTController();return c.request("GET","classes/"+e.className+"/"+e._getId(),{},r).then(function(t,r,n){return e instanceof se&&(e._clearPendingOps(),e._clearServerData(),e._finishFetch(t)),e})},destroy:function(e,t){var r=w["default"].getRESTController();if(Array.isArray(e)){if(e.length<1)return K["default"].as([]);var n=[[]];e.forEach(function(e){e.id&&(n[n.length-1].push(e),n[n.length-1].length>=20&&n.push([]))}),0===n[n.length-1].length&&n.pop();var o=K["default"].as(),s=[];return n.forEach(function(e){o=o.then(function(){return r.request("POST","batch",{requests:e.map(function(e){return{method:"DELETE",path:i()+"classes/"+e.className+"/"+e._getId(),body:{}}})},t).then(function(t){for(var r=0;r<t.length;r++)if(t[r]&&t[r].hasOwnProperty("error")){var n=new L["default"](t[r].error.code,t[r].error.error);n.object=e[r],s.push(n)}})})}),o.then(function(){if(s.length){var t=new L["default"](L["default"].AGGREGATE_ERROR);return t.errors=s,K["default"].error(t)}return K["default"].as(e)})}return e instanceof se?r.request("DELETE","classes/"+e.className+"/"+e._getId(),{},t).then(function(){return K["default"].as(e)}):K["default"].as(e)},save:function(e,t){var r=w["default"].getRESTController(),n=w["default"].getObjectStateController();if(Array.isArray(e)){if(e.length<1)return K["default"].as([]);for(var o=e.concat(),s=0;s<e.length;s++)e[s]instanceof se&&(o=o.concat((0,te["default"])(e[s],!0)));o=(0,X["default"])(o);var a=K["default"].as(),u=[];return o.forEach(function(e){e instanceof q["default"]?a=a.then(function(){return e.save()}):e instanceof se&&u.push(e)}),a.then(function(){var o=null;return K["default"]._continueWhile(function(){return u.length>0},function(){var e=[],s=[];if(u.forEach(function(t){e.length<20&&(0,S["default"])(t)?e.push(t):s.push(t)}),u=s,e.length<1)return K["default"].error(new L["default"](L["default"].OTHER_CAUSE,"Tried to save a batch with a cycle."));var a=new K["default"],c=[],l=[];return e.forEach(function(e,t){var r=new K["default"];c.push(r),n.pushPendingState(e._getStateIdentifier()),l.push(n.enqueueTask(e._getStateIdentifier(),function(){return r.resolve(),a.then(function(r,n){if(r[t].hasOwnProperty("success"))e._handleSaveResponse(r[t].success,n);else{if(!o&&r[t].hasOwnProperty("error")){var i=r[t].error;o=new L["default"](i.code,i.error),u=[]}e._handleSaveError()}})}))}),K["default"].when(c).then(function(){return r.request("POST","batch",{requests:e.map(function(e){var t=e._getSaveParams();return t.path=i()+t.path,t})},t)}).then(function(e,t,r){a.resolve(e,t)}),K["default"].when(l)}).then(function(){return o?K["default"].error(o):K["default"].as(e)})})}if(e instanceof se){var c=e,l=function(){var e=c._getSaveParams();return r.request(e.method,e.path,e.body,t).then(function(e,t){c._handleSaveResponse(e,t)},function(e){return c._handleSaveError(),K["default"].error(e)});
};return n.pushPendingState(e._getStateIdentifier()),n.enqueueTask(e._getStateIdentifier(),l).then(function(){return e},function(e){return K["default"].error(e)})}return K["default"].as()}};w["default"].setObjectController(ae)},{"./CoreManager":3,"./ParseACL":11,"./ParseError":13,"./ParseFile":14,"./ParseOp":19,"./ParsePromise":20,"./ParseQuery":21,"./ParseRelation":22,"./SingleInstanceStateController":28,"./UniqueInstanceStateController":32,"./canBeSerialized":34,"./decode":35,"./encode":36,"./equals":37,"./escape":38,"./parseDate":40,"./unique":41,"./unsavedChildren":42,"babel-runtime/core-js/json/stringify":44,"babel-runtime/core-js/object/create":46,"babel-runtime/core-js/object/define-property":47,"babel-runtime/core-js/object/freeze":48,"babel-runtime/core-js/object/keys":51,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57,"babel-runtime/helpers/typeof":61}],19:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(!e||!e.__op)return null;switch(e.__op){case"Delete":return new P;case"Increment":return new T(e.amount);case"Add":return new N((0,b["default"])(e.objects));case"AddUnique":return new I((0,b["default"])(e.objects));case"Remove":return new R((0,b["default"])(e.objects));case"AddRelation":var t=(0,b["default"])(e.objects);return Array.isArray(t)?new x(t,[]):new x([],[]);case"RemoveRelation":var r=(0,b["default"])(e.objects);return Array.isArray(r)?new x([],r):new x([],[]);case"Batch":for(var t=[],r=[],n=0;n<e.ops.length;n++)"AddRelation"===e.ops[n].__op?t=t.concat((0,b["default"])(e.ops[n].objects)):"RemoveRelation"===e.ops[n].__op&&(r=r.concat((0,b["default"])(e.ops[n].objects)));return new x(t,r)}return null}Object.defineProperty(r,"__esModule",{value:!0}),r.RelationOp=r.RemoveOp=r.AddUniqueOp=r.AddOp=r.IncrementOp=r.UnsetOp=r.SetOp=r.Op=void 0;var i=e("babel-runtime/core-js/object/get-prototype-of"),s=n(i),a=e("babel-runtime/helpers/possibleConstructorReturn"),u=n(a),c=e("babel-runtime/helpers/inherits"),l=n(c),f=e("babel-runtime/helpers/classCallCheck"),d=n(f),h=e("babel-runtime/helpers/createClass"),p=n(h);r.opFromJSON=o;var y=e("./arrayContainsObject"),v=n(y),_=e("./decode"),b=n(_),g=e("./encode"),m=n(g),k=e("./ParseObject"),C=n(k),w=e("./ParseRelation"),j=n(w),S=e("./unique"),O=n(S),E=r.Op=function(){function e(){(0,d["default"])(this,e)}return(0,p["default"])(e,[{key:"applyTo",value:function(e){}},{key:"mergeWith",value:function(e){}},{key:"toJSON",value:function(){}}]),e}(),A=r.SetOp=function(e){function t(e){(0,d["default"])(this,t);var r=(0,u["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this));return r._value=e,r}return(0,l["default"])(t,e),(0,p["default"])(t,[{key:"applyTo",value:function(e){return this._value}},{key:"mergeWith",value:function(e){return new t(this._value)}},{key:"toJSON",value:function(){return(0,m["default"])(this._value,!1,!0)}}]),t}(E),P=r.UnsetOp=function(e){function t(){return(0,d["default"])(this,t),(0,u["default"])(this,(t.__proto__||(0,s["default"])(t)).apply(this,arguments))}return(0,l["default"])(t,e),(0,p["default"])(t,[{key:"applyTo",value:function(e){}},{key:"mergeWith",value:function(e){return new t}},{key:"toJSON",value:function(){return{__op:"Delete"}}}]),t}(E),T=r.IncrementOp=function(e){function t(e){(0,d["default"])(this,t);var r=(0,u["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this));if("number"!=typeof e)throw new TypeError("Increment Op must be initialized with a numeric amount.");return r._amount=e,r}return(0,l["default"])(t,e),(0,p["default"])(t,[{key:"applyTo",value:function(e){if("undefined"==typeof e)return this._amount;if("number"!=typeof e)throw new TypeError("Cannot increment a non-numeric value.");return this._amount+e}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof A)return new A(this.applyTo(e._value));if(e instanceof P)return new A(this._amount);if(e instanceof t)return new t(this.applyTo(e._amount));throw new Error("Cannot merge Increment Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Increment",amount:this._amount}}}]),t}(E),N=r.AddOp=function(e){function t(e){(0,d["default"])(this,t);var r=(0,u["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this));return r._value=Array.isArray(e)?e:[e],r}return(0,l["default"])(t,e),(0,p["default"])(t,[{key:"applyTo",value:function(e){if(null==e)return this._value;if(Array.isArray(e))return e.concat(this._value);throw new Error("Cannot add elements to a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof A)return new A(this.applyTo(e._value));if(e instanceof P)return new A(this._value);if(e instanceof t)return new t(this.applyTo(e._value));throw new Error("Cannot merge Add Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Add",objects:(0,m["default"])(this._value,!1,!0)}}}]),t}(E),I=r.AddUniqueOp=function(e){function t(e){(0,d["default"])(this,t);var r=(0,u["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this));return r._value=(0,O["default"])(Array.isArray(e)?e:[e]),r}return(0,l["default"])(t,e),(0,p["default"])(t,[{key:"applyTo",value:function(e){if(null==e)return this._value||[];if(Array.isArray(e)){var t=e,r=[];return this._value.forEach(function(e){e instanceof C["default"]?(0,v["default"])(t,e)||r.push(e):t.indexOf(e)<0&&r.push(e)}),e.concat(r)}throw new Error("Cannot add elements to a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof A)return new A(this.applyTo(e._value));if(e instanceof P)return new A(this._value);if(e instanceof t)return new t(this.applyTo(e._value));throw new Error("Cannot merge AddUnique Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"AddUnique",objects:(0,m["default"])(this._value,!1,!0)}}}]),t}(E),R=r.RemoveOp=function(e){function t(e){(0,d["default"])(this,t);var r=(0,u["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this));return r._value=(0,O["default"])(Array.isArray(e)?e:[e]),r}return(0,l["default"])(t,e),(0,p["default"])(t,[{key:"applyTo",value:function(e){if(null==e)return[];if(Array.isArray(e)){for(var t=e.indexOf(this._value),r=e.concat([]),t=0;t<this._value.length;t++){for(var n=r.indexOf(this._value[t]);n>-1;)r.splice(n,1),n=r.indexOf(this._value[t]);if(this._value[t]instanceof C["default"]&&this._value[t].id)for(var o=0;o<r.length;o++)r[o]instanceof C["default"]&&this._value[t].id===r[o].id&&(r.splice(o,1),o--)}return r}throw new Error("Cannot remove elements from a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof A)return new A(this.applyTo(e._value));if(e instanceof P)return new P;if(e instanceof t){for(var r=e._value.concat([]),n=0;n<this._value.length;n++)this._value[n]instanceof C["default"]?(0,v["default"])(r,this._value[n])||r.push(this._value[n]):r.indexOf(this._value[n])<0&&r.push(this._value[n]);return new t(r)}throw new Error("Cannot merge Remove Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Remove",objects:(0,m["default"])(this._value,!1,!0)}}}]),t}(E),x=r.RelationOp=function(e){function t(e,r){(0,d["default"])(this,t);var n=(0,u["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this));return n._targetClassName=null,Array.isArray(e)&&(n.relationsToAdd=(0,O["default"])(e.map(n._extractId,n))),Array.isArray(r)&&(n.relationsToRemove=(0,O["default"])(r.map(n._extractId,n))),n}return(0,l["default"])(t,e),(0,p["default"])(t,[{key:"_extractId",value:function(e){if("string"==typeof e)return e;if(!e.id)throw new Error("You cannot add or remove an unsaved Parse Object from a relation");if(this._targetClassName||(this._targetClassName=e.className),this._targetClassName!==e.className)throw new Error("Tried to create a Relation with 2 different object types: "+this._targetClassName+" and "+e.className+".");return e.id}},{key:"applyTo",value:function(e,t,r){if(!e){if(!t||!r)throw new Error("Cannot apply a RelationOp without either a previous value, or an object and a key");var n=new C["default"](t.className);t.id&&0===t.id.indexOf("local")?n._localId=t.id:t.id&&(n.id=t.id);var o=new j["default"](n,r);return o.targetClassName=this._targetClassName,o}if(e instanceof j["default"]){if(this._targetClassName)if(e.targetClassName){if(this._targetClassName!==e.targetClassName)throw new Error("Related object must be a "+e.targetClassName+", but a "+this._targetClassName+" was passed in.")}else e.targetClassName=this._targetClassName;return e}throw new Error("Relation cannot be applied to a non-relation field")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof P)throw new Error("You cannot modify a relation after deleting it.");if(e instanceof t){if(e._targetClassName&&e._targetClassName!==this._targetClassName)throw new Error("Related object must be of class "+e._targetClassName+", but "+(this._targetClassName||"null")+" was passed in.");var r=e.relationsToAdd.concat([]);this.relationsToRemove.forEach(function(e){var t=r.indexOf(e);t>-1&&r.splice(t,1)}),this.relationsToAdd.forEach(function(e){var t=r.indexOf(e);t<0&&r.push(e)});var n=e.relationsToRemove.concat([]);this.relationsToAdd.forEach(function(e){var t=n.indexOf(e);t>-1&&n.splice(t,1)}),this.relationsToRemove.forEach(function(e){var t=n.indexOf(e);t<0&&n.push(e)});var o=new t(r,n);return o._targetClassName=this._targetClassName,o}throw new Error("Cannot merge Relation Op with the previous Op")}},{key:"toJSON",value:function(){var e=this,t=function(t){return{__type:"Pointer",className:e._targetClassName,objectId:t}},r=null,n=null,o=null;return this.relationsToAdd.length>0&&(o=this.relationsToAdd.map(t),r={__op:"AddRelation",objects:o}),this.relationsToRemove.length>0&&(o=this.relationsToRemove.map(t),n={__op:"RemoveRelation",objects:o}),r&&n?{__op:"Batch",ops:[r,n]}:r||n||{}}}]),t}(E)},{"./ParseObject":18,"./ParseRelation":22,"./arrayContainsObject":33,"./decode":35,"./encode":36,"./unique":41,"babel-runtime/core-js/object/get-prototype-of":50,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57,"babel-runtime/helpers/inherits":59,"babel-runtime/helpers/possibleConstructorReturn":60}],20:[function(e,t,r){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/core-js/get-iterator"),i=n(o),s=e("babel-runtime/helpers/typeof"),a=n(s),u=e("babel-runtime/helpers/classCallCheck"),c=n(u),l=e("babel-runtime/helpers/createClass"),f=n(l),d=!0,h=function(){function e(t){(0,c["default"])(this,e),this._resolved=!1,this._rejected=!1,this._resolvedCallbacks=[],this._rejectedCallbacks=[],"function"==typeof t&&t(this.resolve.bind(this),this.reject.bind(this))}return(0,f["default"])(e,[{key:"resolve",value:function(){if(this._resolved||this._rejected)throw new Error("A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+".");this._resolved=!0;for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this._result=t;for(var n=0;n<this._resolvedCallbacks.length;n++)this._resolvedCallbacks[n].apply(this,t);this._resolvedCallbacks=[],this._rejectedCallbacks=[]}},{key:"reject",value:function(e){if(this._resolved||this._rejected)throw new Error("A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+".");this._rejected=!0,this._error=e;for(var t=0;t<this._rejectedCallbacks.length;t++)this._rejectedCallbacks[t](e);this._resolvedCallbacks=[],this._rejectedCallbacks=[]}},{key:"then",value:function(r,n){var o=this,i=new e,s=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];if("function"==typeof r)if(d)try{n=[r.apply(this,n)]}catch(s){n=[e.error(s)]}else n=[r.apply(this,n)];1===n.length&&e.is(n[0])?n[0].then(function(){i.resolve.apply(i,arguments)},function(e){i.reject(e)}):i.resolve.apply(i,n)},a=function(t){var r=[];if("function"==typeof n){if(d)try{r=[n(t)]}catch(o){r=[e.error(o)]}else r=[n(t)];1===r.length&&e.is(r[0])?r[0].then(function(){i.resolve.apply(i,arguments)},function(e){i.reject(e)}):d?i.resolve.apply(i,r):i.reject(r[0])}else i.reject(t)},u=function(e){e.call()};return d&&("undefined"!=typeof t&&"function"==typeof t.nextTick?u=function(e){t.nextTick(e)}:"function"==typeof setTimeout&&(u=function(e){setTimeout(e,0)})),this._resolved?u(function(){s.apply(o,o._result)}):this._rejected?u(function(){a(o._error)}):(this._resolvedCallbacks.push(s),this._rejectedCallbacks.push(a)),i}},{key:"always",value:function(e){return this.then(e,e)}},{key:"done",value:function(e){return this.then(e)}},{key:"fail",value:function(e){return this.then(null,e)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_thenRunCallbacks",value:function(t,r){var n={};return"function"==typeof t?(n.success=function(e){t(e,null)},n.error=function(e){t(null,e)}):"object"===("undefined"==typeof t?"undefined":(0,a["default"])(t))&&("function"==typeof t.success&&(n.success=t.success),"function"==typeof t.error&&(n.error=t.error)),this.then(function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return n.success&&n.success.apply(this,r),e.as.apply(e,arguments)},function(t){return n.error&&("undefined"!=typeof r?n.error(r,t):n.error(t)),e.error(t)})}},{key:"_continueWith",value:function(e){return this.then(function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e(r,null)},function(t){return e(null,t)})}}],[{key:"is",value:function(e){return null!=e&&"function"==typeof e.then}},{key:"as",value:function(){for(var t=new e,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.resolve.apply(t,n),t}},{key:"resolve",value:function(t){return new e(function(r,n){e.is(t)?t.then(r,n):r(t)})}},{key:"error",value:function(){for(var t=new e,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.reject.apply(t,n),t}},{key:"reject",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.error.apply(null,r)}},{key:"when",value:function(t){var r,n=Array.isArray(t);r=n?t:arguments;var o=r.length,i=!1,s=[],a=n?[s]:s,u=[];if(s.length=r.length,u.length=r.length,0===o)return e.as.apply(this,a);for(var c=new e,l=function(){o--,o<=0&&(i?c.reject(u):c.resolve.apply(c,a))},f=function(t,r){e.is(t)?t.then(function(e){s[r]=e,l()},function(e){u[r]=e,i=!0,l()}):(s[d]=t,l())},d=0;d<r.length;d++)f(r[d],d);return c}},{key:"all",value:function(t){var r=0,n=[],o=!0,s=!1,a=void 0;try{for(var u,c=(0,i["default"])(t);!(o=(u=c.next()).done);o=!0){var l=u.value;n[r++]=l}}catch(f){s=!0,a=f}finally{try{!o&&c["return"]&&c["return"]()}finally{if(s)throw a}}if(0===r)return e.as([]);var d=!1,h=new e,p=0,y=[];return n.forEach(function(t,n){e.is(t)?t.then(function(e){return!d&&(y[n]=e,p++,void(p>=r&&h.resolve(y)))},function(e){h.reject(e),d=!0}):(y[n]=t,p++,!d&&p>=r&&h.resolve(y))}),h}},{key:"race",value:function(t){var r=!1,n=new e,o=!0,s=!1,a=void 0;try{for(var u,c=(0,i["default"])(t);!(o=(u=c.next()).done);o=!0){var l=u.value;e.is(l)?l.then(function(e){r||(r=!0,n.resolve(e))},function(e){r||(r=!0,n.reject(e))}):r||(r=!0,n.resolve(l))}}catch(f){s=!0,a=f}finally{try{!o&&c["return"]&&c["return"]()}finally{if(s)throw a}}return n}},{key:"_continueWhile",value:function(t,r){return t()?r().then(function(){return e._continueWhile(t,r)}):e.as()}},{key:"isPromisesAPlusCompliant",value:function(){return d}},{key:"enableAPlusCompliant",value:function(){d=!0}},{key:"disableAPlusCompliant",value:function(){d=!1}}]),e}();r["default"]=h}).call(this,e("_process"))},{_process:168,"babel-runtime/core-js/get-iterator":43,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57,"babel-runtime/helpers/typeof":61}],21:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){return"\\Q"+e.replace("\\E","\\E\\\\E\\Q")+"\\E"}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/helpers/typeof"),s=n(i),a=e("babel-runtime/helpers/classCallCheck"),u=n(a),c=e("babel-runtime/helpers/createClass"),l=n(c),f=e("./CoreManager"),d=n(f),h=e("./encode"),p=n(h),y=e("./ParseError"),v=n(y),_=e("./ParseGeoPoint"),b=n(_),g=e("./ParseObject"),m=n(g),k=e("./ParsePromise"),C=n(k),w=function(){function e(t){if((0,u["default"])(this,e),"string"==typeof t)"User"===t&&d["default"].get("PERFORM_USER_REWRITE")?this.className="_User":this.className=t;else if(t instanceof m["default"])this.className=t.className;else{if("function"!=typeof t)throw new TypeError("A ParseQuery must be constructed with a ParseObject or class name.");if("string"==typeof t.className)this.className=t.className;else{var r=new t;this.className=r.className}}this._where={},this._include=[],this._limit=-1,this._skip=0,this._extraOptions={}}return(0,l["default"])(e,[{key:"_orQuery",value:function(e){var t=e.map(function(e){return e.toJSON().where});return this._where.$or=t,this}},{key:"_addCondition",value:function(e,t,r){return this._where[e]&&"string"!=typeof this._where[e]||(this._where[e]={}),this._where[e][t]=(0,p["default"])(r,!1,!0),this}},{key:"toJSON",value:function(){var e={where:this._where};this._include.length&&(e.include=this._include.join(",")),this._select&&(e.keys=this._select.join(",")),this._limit>=0&&(e.limit=this._limit),this._skip>0&&(e.skip=this._skip),this._order&&(e.order=this._order.join(","));for(var t in this._extraOptions)e[t]=this._extraOptions[t];return e}},{key:"get",value:function(e,t){this.equalTo("objectId",e);var r={};return t&&t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t&&t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),this.first(r).then(function(e){if(e)return e;var t=new v["default"](v["default"].OBJECT_NOT_FOUND,"Object not found.");return C["default"].error(t)})._thenRunCallbacks(t,null)}},{key:"find",value:function(e){var t=this;e=e||{};var r={};e.hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(r.sessionToken=e.sessionToken);var n=d["default"].getQueryController();return n.find(this.className,this.toJSON(),r).then(function(e){return e.results.map(function(r){var n=e.className||t.className;return r.className||(r.className=n),m["default"].fromJSON(r,!0)})})._thenRunCallbacks(e)}},{key:"count",value:function(e){e=e||{};var t={};e.hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken);var r=d["default"].getQueryController(),n=this.toJSON();return n.limit=0,n.count=1,r.find(this.className,n,t).then(function(e){return e.count})._thenRunCallbacks(e)}},{key:"first",value:function(e){var t=this;e=e||{};var r={};e.hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(r.sessionToken=e.sessionToken);var n=d["default"].getQueryController(),o=this.toJSON();return o.limit=1,n.find(this.className,o,r).then(function(e){var r=e.results;if(r[0])return r[0].className||(r[0].className=t.className),m["default"].fromJSON(r[0],!0)})._thenRunCallbacks(e)}},{key:"each",value:function(t,r){if(r=r||{},this._order||this._skip||this._limit>=0)return C["default"].error("Cannot iterate on a query with sort, skip, or limit.")._thenRunCallbacks(r);new C["default"];var n=new e(this.className);n._limit=r.batchSize||100,n._include=this._include.map(function(e){return e}),this._select&&(n._select=this._select.map(function(e){return e})),n._where={};for(var o in this._where){var i=this._where[o];if(Array.isArray(i))n._where[o]=i.map(function(e){return e});else if(i&&"object"===("undefined"==typeof i?"undefined":(0,s["default"])(i))){var a={};n._where[o]=a;for(var u in i)a[u]=i[u]}else n._where[o]=i}n.ascending("objectId");var c={};r.hasOwnProperty("useMasterKey")&&(c.useMasterKey=r.useMasterKey),r.hasOwnProperty("sessionToken")&&(c.sessionToken=r.sessionToken);var l=!1;return C["default"]._continueWhile(function(){return!l},function(){return n.find(c).then(function(e){var r=C["default"].as();return e.forEach(function(e){r=r.then(function(){return t(e)})}),r.then(function(){e.length>=n._limit?n.greaterThan("objectId",e[e.length-1].id):l=!0})})})._thenRunCallbacks(r)}},{key:"equalTo",value:function(e,t){return"undefined"==typeof t?this.doesNotExist(e):(this._where[e]=(0,p["default"])(t,!1,!0),this)}},{key:"notEqualTo",value:function(e,t){return this._addCondition(e,"$ne",t)}},{key:"lessThan",value:function(e,t){return this._addCondition(e,"$lt",t)}},{key:"greaterThan",value:function(e,t){return this._addCondition(e,"$gt",t)}},{key:"lessThanOrEqualTo",value:function(e,t){return this._addCondition(e,"$lte",t)}},{key:"greaterThanOrEqualTo",value:function(e,t){return this._addCondition(e,"$gte",t)}},{key:"containedIn",value:function(e,t){return this._addCondition(e,"$in",t)}},{key:"notContainedIn",value:function(e,t){return this._addCondition(e,"$nin",t)}},{key:"containsAll",value:function(e,t){return this._addCondition(e,"$all",t)}},{key:"exists",value:function(e){return this._addCondition(e,"$exists",!0)}},{key:"doesNotExist",value:function(e){return this._addCondition(e,"$exists",!1)}},{key:"matches",value:function(e,t,r){return this._addCondition(e,"$regex",t),r||(r=""),t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),r.length&&this._addCondition(e,"$options",r),this}},{key:"matchesQuery",value:function(e,t){var r=t.toJSON();return r.className=t.className,this._addCondition(e,"$inQuery",r)}},{key:"doesNotMatchQuery",value:function(e,t){var r=t.toJSON();return r.className=t.className,this._addCondition(e,"$notInQuery",r)}},{key:"matchesKeyInQuery",value:function(e,t,r){var n=r.toJSON();return n.className=r.className,this._addCondition(e,"$select",{key:t,query:n})}},{key:"doesNotMatchKeyInQuery",value:function(e,t,r){var n=r.toJSON();return n.className=r.className,this._addCondition(e,"$dontSelect",{key:t,query:n})}},{key:"contains",value:function(e,t){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this._addCondition(e,"$regex",o(t))}},{key:"startsWith",value:function(e,t){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this._addCondition(e,"$regex","^"+o(t))}},{key:"endsWith",value:function(e,t){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this._addCondition(e,"$regex",o(t)+"$")}},{key:"near",value:function(e,t){return t instanceof b["default"]||(t=new b["default"](t)),this._addCondition(e,"$nearSphere",t)}},{key:"withinRadians",value:function(e,t,r){return this.near(e,t),this._addCondition(e,"$maxDistance",r)}},{key:"withinMiles",value:function(e,t,r){return this.withinRadians(e,t,r/3958.8)}},{key:"withinKilometers",value:function(e,t,r){return this.withinRadians(e,t,r/6371)}},{key:"withinGeoBox",value:function(e,t,r){return t instanceof b["default"]||(t=new b["default"](t)),r instanceof b["default"]||(r=new b["default"](r)),this._addCondition(e,"$within",{$box:[t,r]}),this}},{key:"ascending",value:function(){this._order=[];for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addAscending.apply(this,t)}},{key:"addAscending",value:function(){var e=this;this._order||(this._order=[]);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){Array.isArray(t)&&(t=t.join()),e._order=e._order.concat(t.replace(/\s/g,"").split(","))}),this}},{key:"descending",value:function(){this._order=[];for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addDescending.apply(this,t)}},{key:"addDescending",value:function(){var e=this;this._order||(this._order=[]);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){Array.isArray(t)&&(t=t.join()),e._order=e._order.concat(t.replace(/\s/g,"").split(",").map(function(e){return"-"+e}))}),this}},{key:"skip",value:function(e){if("number"!=typeof e||e<0)throw new Error("You can only skip by a positive number");return this._skip=e,this}},{key:"limit",value:function(e){if("number"!=typeof e)throw new Error("You can only set the limit to a numeric value");return this._limit=e,this}},{key:"include",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){Array.isArray(t)?e._include=e._include.concat(t):e._include.push(t)}),this}},{key:"select",value:function(){var e=this;this._select||(this._select=[]);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){Array.isArray(t)?e._select=e._select.concat(t):e._select.push(t)}),this}},{key:"subscribe",value:function(){var e=d["default"].getLiveQueryController();return e.subscribe(this)}}],[{key:"or",value:function(){for(var t=null,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];n.forEach(function(e){if(t||(t=e.className),t!==e.className)throw new Error("All queries must be for the same class.")});var i=new e(t);return i._orQuery(n),i}}]),e}();r["default"]=w;var j={find:function(e,t,r){var n=d["default"].getRESTController();return n.request("GET","classes/"+e,t,r)}};d["default"].setQueryController(j)},{"./CoreManager":3,"./ParseError":13,"./ParseGeoPoint":15,"./ParseObject":18,"./ParsePromise":20,"./encode":36,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57,"babel-runtime/helpers/typeof":61}],22:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/helpers/classCallCheck"),i=n(o),s=e("babel-runtime/helpers/createClass"),a=n(s),u=e("./ParseOp"),c=e("./ParseObject"),l=(n(c),e("./ParseQuery")),f=n(l),d=function(){function e(t,r){(0,i["default"])(this,e),this.parent=t,this.key=r,this.targetClassName=null}return(0,a["default"])(e,[{key:"_ensureParentAndKey",value:function(e,t){if(this.key=this.key||t,this.key!==t)throw new Error("Internal Error. Relation retrieved from two different keys.");if(this.parent){if(this.parent.className!==e.className)throw new Error("Internal Error. Relation retrieved from two different Objects.");if(this.parent.id){if(this.parent.id!==e.id)throw new Error("Internal Error. Relation retrieved from two different Objects.")}else e.id&&(this.parent=e)}else this.parent=e}},{key:"add",value:function(e){Array.isArray(e)||(e=[e]);var t=new u.RelationOp(e,[]),r=this.parent;if(!r)throw new Error("Cannot add to a Relation without a parent");return r.set(this.key,t),this.targetClassName=t._targetClassName,r}},{key:"remove",value:function(e){Array.isArray(e)||(e=[e]);var t=new u.RelationOp([],e);if(!this.parent)throw new Error("Cannot remove from a Relation without a parent");this.parent.set(this.key,t),this.targetClassName=t._targetClassName}},{key:"toJSON",value:function(){return{__type:"Relation",className:this.targetClassName}}},{key:"query",value:function(){var e,t=this.parent;if(!t)throw new Error("Cannot construct a query for a Relation without a parent");return this.targetClassName?e=new f["default"](this.targetClassName):(e=new f["default"](t.className),e._extraOptions.redirectClassNameForKey=this.key),e._addCondition("$relatedTo","object",{__type:"Pointer",className:t.className,objectId:t.id}),e._addCondition("$relatedTo","key",this.key),e}}]),e}();r["default"]=d},{"./ParseObject":18,"./ParseOp":19,"./ParseQuery":21,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57}],23:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/core-js/object/get-prototype-of"),i=n(o),s=e("babel-runtime/helpers/classCallCheck"),a=n(s),u=e("babel-runtime/helpers/createClass"),c=n(u),l=e("babel-runtime/helpers/possibleConstructorReturn"),f=n(l),d=e("babel-runtime/helpers/get"),h=n(d),p=e("babel-runtime/helpers/inherits"),y=n(p),v=e("./ParseACL"),_=n(v),b=e("./ParseError"),g=n(b),m=e("./ParseObject"),k=n(m),C=function(e){function t(e,r){(0,a["default"])(this,t);var n=(0,f["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,"_Role"));return"string"==typeof e&&r instanceof _["default"]&&(n.setName(e),n.setACL(r)),n}return(0,y["default"])(t,e),(0,c["default"])(t,[{key:"getName",value:function(){var e=this.get("name");return null==e||"string"==typeof e?e:""}},{key:"setName",value:function(e,t){return this.set("name",e,t)}},{key:"getUsers",value:function(){return this.relation("users")}},{key:"getRoles",value:function(){return this.relation("roles")}},{key:"validate",value:function(e,r){var n=(0,h["default"])(t.prototype.__proto__||(0,i["default"])(t.prototype),"validate",this).call(this,e,r);if(n)return n;if("name"in e&&e.name!==this.getName()){var o=e.name;if(this.id&&this.id!==e.objectId)return new g["default"](g["default"].OTHER_CAUSE,"A role's name can only be set before it has been saved.");if("string"!=typeof o)return new g["default"](g["default"].OTHER_CAUSE,"A role's name must be a String.");if(!/^[0-9a-zA-Z\-_ ]+$/.test(o))return new g["default"](g["default"].OTHER_CAUSE,"A role's name can be only contain alphanumeric characters, _, -, and spaces.")}return!1}}]),t}(k["default"]);r["default"]=C,k["default"].registerSubclass("_Role",C)},{"./ParseACL":11,"./ParseError":13,"./ParseObject":18,"babel-runtime/core-js/object/get-prototype-of":50,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57,"babel-runtime/helpers/get":58,"babel-runtime/helpers/inherits":59,"babel-runtime/helpers/possibleConstructorReturn":60}],24:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/helpers/typeof"),i=n(o),s=e("babel-runtime/core-js/object/get-prototype-of"),a=n(s),u=e("babel-runtime/helpers/classCallCheck"),c=n(u),l=e("babel-runtime/helpers/createClass"),f=n(l),d=e("babel-runtime/helpers/possibleConstructorReturn"),h=n(d),p=e("babel-runtime/helpers/inherits"),y=n(p),v=e("./CoreManager"),_=n(v),b=e("./isRevocableSession"),g=n(b),m=e("./ParseObject"),k=n(m),C=e("./ParsePromise"),w=n(C),j=e("./ParseUser"),S=n(j),O=function(e){function t(e){(0,c["default"])(this,t);var r=(0,h["default"])(this,(t.__proto__||(0,a["default"])(t)).call(this,"_Session"));if(e&&"object"===("undefined"==typeof e?"undefined":(0,i["default"])(e))&&!r.set(e||{}))throw new Error("Can't create an invalid Session");return r}return(0,y["default"])(t,e),(0,f["default"])(t,[{key:"getSessionToken",value:function(){var e=this.get("sessionToken");return"string"==typeof e?e:""}}],[{key:"readOnlyAttributes",value:function(){return["createdWith","expiresAt","installationId","restricted","sessionToken","user"]}},{key:"current",value:function(e){e=e||{};var t=_["default"].getSessionController(),r={};return e.hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),S["default"].currentAsync().then(function(e){return e?(e.getSessionToken(),r.sessionToken=e.getSessionToken(),t.getSession(r)):w["default"].error("There is no current user.")})}},{key:"isCurrentSessionRevocable",value:function(){var e=S["default"].current();return!!e&&(0,g["default"])(e.getSessionToken()||"")}}]),t}(k["default"]);r["default"]=O,k["default"].registerSubclass("_Session",O);var E={getSession:function(e){var t=_["default"].getRESTController(),r=new O;return t.request("GET","sessions/me",{},e).then(function(e){return r._finishFetch(e),r._setExisted(!0),r})}};_["default"].setSessionController(E)},{"./CoreManager":3,"./ParseObject":18,"./ParsePromise":20,"./ParseUser":25,"./isRevocableSession":39,"babel-runtime/core-js/object/get-prototype-of":50,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57,"babel-runtime/helpers/inherits":59,"babel-runtime/helpers/possibleConstructorReturn":60,"babel-runtime/helpers/typeof":61}],25:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{
value:!0});var o=e("babel-runtime/core-js/json/stringify"),i=n(o),s=e("babel-runtime/core-js/object/define-property"),a=n(s),u=e("babel-runtime/helpers/typeof"),c=n(u),l=e("babel-runtime/core-js/object/get-prototype-of"),f=n(l),d=e("babel-runtime/helpers/classCallCheck"),h=n(d),p=e("babel-runtime/helpers/createClass"),y=n(p),v=e("babel-runtime/helpers/possibleConstructorReturn"),_=n(v),b=e("babel-runtime/helpers/get"),g=n(b),m=e("babel-runtime/helpers/inherits"),k=n(m),C=e("./CoreManager"),w=n(C),j=e("./isRevocableSession"),S=n(j),O=e("./ParseError"),E=n(O),A=e("./ParseObject"),P=n(A),T=e("./ParsePromise"),N=n(T),I=e("./ParseSession"),R=n(I),x=e("./Storage"),M=n(x),U="currentUser",D=!w["default"].get("IS_NODE"),L=!1,B=null,q={},F=function(e){function t(e){(0,h["default"])(this,t);var r=(0,_["default"])(this,(t.__proto__||(0,f["default"])(t)).call(this,"_User"));if(e&&"object"===("undefined"==typeof e?"undefined":(0,c["default"])(e))&&!r.set(e||{}))throw new Error("Can't create an invalid Parse User");return r}return(0,k["default"])(t,e),(0,y["default"])(t,[{key:"_upgradeToRevocableSession",value:function(e){e=e||{};var t={};e.hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey);var r=w["default"].getUserController();return r.upgradeToRevocableSession(this,t)._thenRunCallbacks(e)}},{key:"_linkWith",value:function(e,t){var r,n=this;if("string"==typeof e?(r=e,e=q[e]):r=e.getAuthType(),t&&t.hasOwnProperty("authData")){var o=this.get("authData")||{};if("object"!==("undefined"==typeof o?"undefined":(0,c["default"])(o)))throw new Error("Invalid type: authData field should be an object");o[r]=t.authData;var i=w["default"].getUserController();return i.linkWith(this,o)._thenRunCallbacks(t,this)}var s=new N["default"];return e.authenticate({success:function(e,r){var o={};o.authData=r,t.success&&(o.success=t.success),t.error&&(o.error=t.error),n._linkWith(e,o).then(function(){s.resolve(n)},function(e){s.reject(e)})},error:function(e,r){"function"==typeof t.error&&t.error(n,r),s.reject(r)}}),s}},{key:"_synchronizeAuthData",value:function(e){if(this.isCurrent()&&e){var t;"string"==typeof e?(t=e,e=q[t]):t=e.getAuthType();var r=this.get("authData");if(e&&r&&"object"===("undefined"==typeof r?"undefined":(0,c["default"])(r))){var n=e.restoreAuthentication(r[t]);n||this._unlinkFrom(e)}}}},{key:"_synchronizeAllAuthData",value:function(){var e=this.get("authData");if("object"===("undefined"==typeof e?"undefined":(0,c["default"])(e)))for(var t in e)this._synchronizeAuthData(t)}},{key:"_cleanupAuthData",value:function(){if(this.isCurrent()){var e=this.get("authData");if("object"===("undefined"==typeof e?"undefined":(0,c["default"])(e)))for(var t in e)e[t]||delete e[t]}}},{key:"_unlinkFrom",value:function(e,t){var r=this;return"string"==typeof e?e=q[e]:e.getAuthType(),this._linkWith(e,{authData:null}).then(function(){return r._synchronizeAuthData(e),N["default"].as(r)})._thenRunCallbacks(t)}},{key:"_isLinked",value:function(e){var t;t="string"==typeof e?e:e.getAuthType();var r=this.get("authData")||{};return"object"===("undefined"==typeof r?"undefined":(0,c["default"])(r))&&!!r[t]}},{key:"_logOutWithAll",value:function(){var e=this.get("authData");if("object"===("undefined"==typeof e?"undefined":(0,c["default"])(e)))for(var t in e)this._logOutWith(t)}},{key:"_logOutWith",value:function(e){this.isCurrent()&&("string"==typeof e&&(e=q[e]),e&&e.deauthenticate&&e.deauthenticate())}},{key:"_preserveFieldsOnFetch",value:function(){return{sessionToken:this.get("sessionToken")}}},{key:"isCurrent",value:function(){var e=t.current();return!!e&&e.id===this.id}},{key:"getUsername",value:function(){var e=this.get("username");return null==e||"string"==typeof e?e:""}},{key:"setUsername",value:function(e){var t=this.get("authData");t&&"object"===("undefined"==typeof t?"undefined":(0,c["default"])(t))&&t.hasOwnProperty("anonymous")&&(t.anonymous=null),this.set("username",e)}},{key:"setPassword",value:function(e){this.set("password",e)}},{key:"getEmail",value:function(){var e=this.get("email");return null==e||"string"==typeof e?e:""}},{key:"setEmail",value:function(e){this.set("email",e)}},{key:"getSessionToken",value:function(){var e=this.get("sessionToken");return null==e||"string"==typeof e?e:""}},{key:"authenticated",value:function(){var e=t.current();return!!this.get("sessionToken")&&!!e&&e.id===this.id}},{key:"signUp",value:function(e,t){t=t||{};var r={};t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("installationId")&&(r.installationId=t.installationId);var n=w["default"].getUserController();return n.signUp(this,e,r)._thenRunCallbacks(t,this)}},{key:"logIn",value:function(e){e=e||{};var t={};e.hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("installationId")&&(t.installationId=e.installationId);var r=w["default"].getUserController();return r.logIn(this,t)._thenRunCallbacks(e,this)}},{key:"save",value:function(){for(var e=this,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return(0,g["default"])(t.prototype.__proto__||(0,f["default"])(t.prototype),"save",this).apply(this,n).then(function(){return e.isCurrent()?w["default"].getUserController().updateUserOnDisk(e):e})}},{key:"destroy",value:function(){for(var e=this,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return(0,g["default"])(t.prototype.__proto__||(0,f["default"])(t.prototype),"destroy",this).apply(this,n).then(function(){return e.isCurrent()?w["default"].getUserController().removeUserFromDisk():e})}},{key:"fetch",value:function(){for(var e=this,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return(0,g["default"])(t.prototype.__proto__||(0,f["default"])(t.prototype),"fetch",this).apply(this,n).then(function(){return e.isCurrent()?w["default"].getUserController().updateUserOnDisk(e):e})}}],[{key:"readOnlyAttributes",value:function(){return["sessionToken"]}},{key:"extend",value:function(e,r){if(e)for(var n in e)"className"!==n&&(0,a["default"])(t.prototype,n,{value:e[n],enumerable:!1,writable:!0,configurable:!0});if(r)for(var n in r)"className"!==n&&(0,a["default"])(t,n,{value:r[n],enumerable:!1,writable:!0,configurable:!0});return t}},{key:"current",value:function(){if(!D)return null;var e=w["default"].getUserController();return e.currentUser()}},{key:"currentAsync",value:function(){if(!D)return N["default"].as(null);var e=w["default"].getUserController();return e.currentUserAsync()}},{key:"signUp",value:function(e,r,n,o){n=n||{},n.username=e,n.password=r;var i=new t(n);return i.signUp({},o)}},{key:"logIn",value:function(e,r,n){if("string"!=typeof e)return N["default"].error(new E["default"](E["default"].OTHER_CAUSE,"Username must be a string."));if("string"!=typeof r)return N["default"].error(new E["default"](E["default"].OTHER_CAUSE,"Password must be a string."));var o=new t;return o._finishFetch({username:e,password:r}),o.logIn(n)}},{key:"become",value:function(e,t){if(!D)throw new Error("It is not memory-safe to become a user in a server environment");t=t||{};var r={sessionToken:e};t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey);var n=w["default"].getUserController();return n.become(r)._thenRunCallbacks(t)}},{key:"logInWith",value:function(e,r){return t._logInWith(e,r)}},{key:"logOut",value:function(){if(!D)throw new Error("There is no current user user on a node.js server environment.");var e=w["default"].getUserController();return e.logOut()}},{key:"requestPasswordReset",value:function(e,t){t=t||{};var r={};t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey);var n=w["default"].getUserController();return n.requestPasswordReset(e,r)._thenRunCallbacks(t)}},{key:"allowCustomUserClass",value:function(e){w["default"].set("PERFORM_USER_REWRITE",!e)}},{key:"enableRevocableSession",value:function(e){if(e=e||{},w["default"].set("FORCE_REVOCABLE_SESSION",!0),D){var r=t.current();if(r)return r._upgradeToRevocableSession(e)}return N["default"].as()._thenRunCallbacks(e)}},{key:"enableUnsafeCurrentUser",value:function(){D=!0}},{key:"disableUnsafeCurrentUser",value:function(){D=!1}},{key:"_registerAuthenticationProvider",value:function(e){q[e.getAuthType()]=e,t.currentAsync().then(function(t){t&&t._synchronizeAuthData(e.getAuthType())})}},{key:"_logInWith",value:function(e,r){var n=new t;return n._linkWith(e,r)}},{key:"_clearCache",value:function(){B=null,L=!1}},{key:"_setCurrentUserCache",value:function(e){B=e}}]),t}(P["default"]);r["default"]=F,P["default"].registerSubclass("_User",F);var J={updateUserOnDisk:function(e){var t=M["default"].generatePath(U),r=e.toJSON();return r.className="_User",M["default"].setItemAsync(t,(0,i["default"])(r)).then(function(){return e})},removeUserFromDisk:function(){var e=M["default"].generatePath(U);return L=!0,B=null,M["default"].removeItemAsync(e)},setCurrentUser:function(e){return B=e,e._cleanupAuthData(),e._synchronizeAllAuthData(),J.updateUserOnDisk(e)},currentUser:function(){if(B)return B;if(L)return null;if(M["default"].async())throw new Error("Cannot call currentUser() when using a platform with an async storage system. Call currentUserAsync() instead.");var e=M["default"].generatePath(U),t=M["default"].getItem(e);if(L=!0,!t)return B=null,null;t=JSON.parse(t),t.className||(t.className="_User"),t._id&&(t.objectId!==t._id&&(t.objectId=t._id),delete t._id),t._sessionToken&&(t.sessionToken=t._sessionToken,delete t._sessionToken);var r=P["default"].fromJSON(t);return B=r,r._synchronizeAllAuthData(),r},currentUserAsync:function(){if(B)return N["default"].as(B);if(L)return N["default"].as(null);var e=M["default"].generatePath(U);return M["default"].getItemAsync(e).then(function(e){if(L=!0,!e)return B=null,N["default"].as(null);e=JSON.parse(e),e.className||(e.className="_User"),e._id&&(e.objectId!==e._id&&(e.objectId=e._id),delete e._id),e._sessionToken&&(e.sessionToken=e._sessionToken,delete e._sessionToken);var t=P["default"].fromJSON(e);return B=t,t._synchronizeAllAuthData(),N["default"].as(t)})},signUp:function(e,t,r){var n=t&&t.username||e.get("username"),o=t&&t.password||e.get("password");return n&&n.length?o&&o.length?e.save(t,r).then(function(){return e._finishFetch({password:void 0}),D?J.setCurrentUser(e):e}):N["default"].error(new E["default"](E["default"].OTHER_CAUSE,"Cannot sign up user with an empty password.")):N["default"].error(new E["default"](E["default"].OTHER_CAUSE,"Cannot sign up user with an empty name."))},logIn:function(e,t){var r=w["default"].getRESTController(),n=w["default"].getObjectStateController(),o={username:e.get("username"),password:e.get("password")};return r.request("GET","login",o,t).then(function(t,r){return e._migrateId(t.objectId),e._setExisted(!0),n.setPendingOp(e._getStateIdentifier(),"username",void 0),n.setPendingOp(e._getStateIdentifier(),"password",void 0),t.password=void 0,e._finishFetch(t),D?J.setCurrentUser(e):N["default"].as(e)})},become:function(e){var t=new F,r=w["default"].getRESTController();return r.request("GET","users/me",{},e).then(function(e,r){return t._finishFetch(e),t._setExisted(!0),J.setCurrentUser(t)})},logOut:function(){return J.currentUserAsync().then(function(e){var t=M["default"].generatePath(U),r=M["default"].removeItemAsync(t),n=w["default"].getRESTController();if(null!==e){var o=e.getSessionToken();o&&(0,S["default"])(o)&&(r=r.then(function(){return n.request("POST","logout",{},{sessionToken:o})})),e._logOutWithAll(),e._finishFetch({sessionToken:void 0})}return L=!0,B=null,r})},requestPasswordReset:function(e,t){var r=w["default"].getRESTController();return r.request("POST","requestPasswordReset",{email:e},t)},upgradeToRevocableSession:function(e,t){var r=e.getSessionToken();if(!r)return N["default"].error(new E["default"](E["default"].SESSION_MISSING,"Cannot upgrade a user with no session token"));t.sessionToken=r;var n=w["default"].getRESTController();return n.request("POST","upgradeToRevocableSession",{},t).then(function(t){var r=new R["default"];return r._finishFetch(t),e._finishFetch({sessionToken:r.getSessionToken()}),e.isCurrent()?J.setCurrentUser(e):N["default"].as(e)})},linkWith:function(e,t){return e.save({authData:t}).then(function(){return D?J.setCurrentUser(e):e})}};w["default"].setUserController(J)},{"./CoreManager":3,"./ParseError":13,"./ParseObject":18,"./ParsePromise":20,"./ParseSession":24,"./Storage":29,"./isRevocableSession":39,"babel-runtime/core-js/json/stringify":44,"babel-runtime/core-js/object/define-property":47,"babel-runtime/core-js/object/get-prototype-of":50,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57,"babel-runtime/helpers/get":58,"babel-runtime/helpers/inherits":59,"babel-runtime/helpers/possibleConstructorReturn":60,"babel-runtime/helpers/typeof":61}],26:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(t=t||{},e.where&&e.where instanceof l["default"]&&(e.where=e.where.toJSON().where),e.push_time&&"object"===(0,s["default"])(e.push_time)&&(e.push_time=e.push_time.toJSON()),e.expiration_time&&"object"===(0,s["default"])(e.expiration_time)&&(e.expiration_time=e.expiration_time.toJSON()),e.expiration_time&&e.expiration_interval)throw new Error("expiration_time and expiration_interval cannot both be set.");return u["default"].getPushController().send(e,{useMasterKey:t.useMasterKey})._thenRunCallbacks(t)}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/helpers/typeof"),s=n(i);r.send=o;var a=e("./CoreManager"),u=n(a),c=e("./ParseQuery"),l=n(c),f={send:function(e,t){var r=u["default"].getRESTController(),n=r.request("POST","push",e,{useMasterKey:!!t.useMasterKey});return n._thenRunCallbacks(t)}};u["default"].setPushController(f)},{"./CoreManager":3,"./ParseQuery":21,"babel-runtime/helpers/typeof":61}],27:[function(e,t,r){(function(r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,r){var n=new p["default"],o=new XDomainRequest;return o.onload=function(){var e;try{e=JSON.parse(o.responseText)}catch(t){n.reject(t)}e&&n.resolve(e)},o.onerror=o.ontimeout=function(){var e={responseText:(0,u["default"])({code:d["default"].X_DOMAIN_REQUEST,error:"IE's XDomainRequest does not supply error info."})};n.reject(e)},o.onprogress=function(){},o.open(e,t),o.send(r),n}var i=e("babel-runtime/helpers/typeof"),s=n(i),a=e("babel-runtime/core-js/json/stringify"),u=n(a),c=e("./CoreManager"),l=n(c),f=e("./ParseError"),d=n(f),h=e("./ParsePromise"),p=n(h),y=e("./Storage"),v=(n(y),null);"undefined"!=typeof XMLHttpRequest&&(v=XMLHttpRequest);var _=!1;"undefined"==typeof XDomainRequest||"withCredentials"in new XMLHttpRequest||(_=!0);var b={ajax:function(e,t,n,i){if(_)return o(e,t,n,i);var s=new p["default"],a=0;return function u(){if(null==v)throw new Error("Cannot make a request: No definition of XMLHttpRequest was found.");var o=!1,c=new v;c.onreadystatechange=function(){if(4===c.readyState&&!o)if(o=!0,c.status>=200&&c.status<300){var e;try{e=JSON.parse(c.responseText)}catch(t){s.reject(t.toString())}e&&s.resolve(e,c.status,c)}else if(c.status>=500||0===c.status)if(++a<l["default"].get("REQUEST_ATTEMPT_LIMIT")){var r=Math.round(125*Math.random()*Math.pow(2,a));setTimeout(u,r)}else 0===c.status?s.reject("Unable to connect to the Parse API"):s.reject(c);else s.reject(c)},i=i||{},"string"!=typeof i["Content-Type"]&&(i["Content-Type"]="text/plain"),l["default"].get("IS_NODE")&&(i["User-Agent"]="Parse/"+l["default"].get("VERSION")+" (NodeJS "+r.versions.node+")"),c.open(e,t,!0);for(var f in i)c.setRequestHeader(f,i[f]);c.send(n)}(),s},request:function(e,t,r,n){n=n||{};var o=l["default"].get("SERVER_URL");"/"!==o[o.length-1]&&(o+="/"),o+=t;var i={};if(r&&"object"===("undefined"==typeof r?"undefined":(0,s["default"])(r)))for(var a in r)i[a]=r[a];"POST"!==e&&(i._method=e,e="POST"),i._ApplicationId=l["default"].get("APPLICATION_ID");var c=l["default"].get("JAVASCRIPT_KEY");c&&(i._JavaScriptKey=c),i._ClientVersion=l["default"].get("VERSION");var f=n.useMasterKey;if("undefined"==typeof f&&(f=l["default"].get("USE_MASTER_KEY")),f){if(!l["default"].get("MASTER_KEY"))throw new Error("Cannot use the Master Key, it has not been provided.");delete i._JavaScriptKey,i._MasterKey=l["default"].get("MASTER_KEY")}l["default"].get("FORCE_REVOCABLE_SESSION")&&(i._RevocableSession="1");var h,y=n.installationId;if(y&&"string"==typeof y)h=p["default"].as(y);else{var v=l["default"].getInstallationController();h=v.currentInstallationId()}return h.then(function(e){i._InstallationId=e;var t=l["default"].getUserController();return n&&"string"==typeof n.sessionToken?p["default"].as(n.sessionToken):t?t.currentUserAsync().then(function(e){return e?p["default"].as(e.getSessionToken()):p["default"].as(null)}):p["default"].as(null)}).then(function(t){t&&(i._SessionToken=t);var r=(0,u["default"])(i);return b.ajax(e,o,r)}).then(null,function(e){var t;if(e&&e.responseText)try{var r=JSON.parse(e.responseText);t=new d["default"](r.code,r.error)}catch(n){t=new d["default"](d["default"].INVALID_JSON,"Received an error with invalid JSON from Parse: "+e.responseText)}else t=new d["default"](d["default"].CONNECTION_FAILED,"XMLHttpRequest failed: "+(0,u["default"])(e));return p["default"].error(t)})},_setXHR:function(e){v=e}};t.exports=b}).call(this,e("_process"))},{"./CoreManager":3,"./ParseError":13,"./ParsePromise":20,"./Storage":29,_process:168,"babel-runtime/core-js/json/stringify":44,"babel-runtime/helpers/typeof":61}],28:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){var t=w[e.className];return t?t[e.id]||null:null}function i(e,t){var r=o(e);return r?r:(w[e.className]||(w[e.className]={}),t||(t=C.defaultState()),r=w[e.className][e.id]=t)}function s(e){var t=o(e);return null===t?null:(delete w[e.className][e.id],t)}function a(e){var t=o(e);return t?t.serverData:{}}function u(e,t){var r=i(e).serverData;C.setServerData(r,t)}function c(e){var t=o(e);return t?t.pendingOps:[{}]}function l(e,t,r){var n=i(e).pendingOps;C.setPendingOp(n,t,r)}function f(e){var t=i(e).pendingOps;C.pushPendingState(t)}function d(e){var t=i(e).pendingOps;return C.popPendingState(t)}function h(e){var t=c(e);C.mergeFirstPendingState(t)}function p(e){var t=o(e);return t?t.objectCache:{}}function y(e,t){var r=a(e),n=c(e);return C.estimateAttribute(r,n,e.className,e.id,t)}function v(e){var t=a(e),r=c(e);return C.estimateAttributes(t,r,e.className,e.id)}function _(e,t){var r=i(e);C.commitServerChanges(r.serverData,r.objectCache,t)}function b(e,t){var r=i(e);return r.tasks.enqueue(t)}function g(){w={}}function m(e,t){t.id=e.id}Object.defineProperty(r,"__esModule",{value:!0}),r.getState=o,r.initializeState=i,r.removeState=s,r.getServerData=a,r.setServerData=u,r.getPendingOps=c,r.setPendingOp=l,r.pushPendingState=f,r.popPendingState=d,r.mergeFirstPendingState=h,r.getObjectCache=p,r.estimateAttribute=y,r.estimateAttributes=v,r.commitServerChanges=_,r.enqueueTask=b,r.clearAllState=g,r.duplicateState=m;var k=e("./ObjectStateMutations"),C=n(k),w={}},{"./ObjectStateMutations":9}],29:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var o=e("./CoreManager"),i=n(o),s=e("./ParsePromise"),a=n(s);t.exports={async:function(){var e=i["default"].getStorageController();return!!e.async},getItem:function(e){var t=i["default"].getStorageController();if(1===t.async)throw new Error("Synchronous storage is not supported by the current storage controller");return t.getItem(e)},getItemAsync:function(e){var t=i["default"].getStorageController();return 1===t.async?t.getItemAsync(e):a["default"].as(t.getItem(e))},setItem:function(e,t){var r=i["default"].getStorageController();if(1===r.async)throw new Error("Synchronous storage is not supported by the current storage controller");return r.setItem(e,t)},setItemAsync:function(e,t){var r=i["default"].getStorageController();return 1===r.async?r.setItemAsync(e,t):a["default"].as(r.setItem(e,t))},removeItem:function(e){var t=i["default"].getStorageController();if(1===t.async)throw new Error("Synchronous storage is not supported by the current storage controller");return t.removeItem(e)},removeItemAsync:function(e){var t=i["default"].getStorageController();return 1===t.async?t.removeItemAsync(e):a["default"].as(t.removeItem(e))},generatePath:function(e){if(!i["default"].get("APPLICATION_ID"))throw new Error("You need to call Parse.initialize before using Parse.");if("string"!=typeof e)throw new Error("Tried to get a Storage path that was not a String.");return"/"===e[0]&&(e=e.substr(1)),"Parse/"+i["default"].get("APPLICATION_ID")+"/"+e},_clear:function(){var e=i["default"].getStorageController();e.hasOwnProperty("clear")&&e.clear()}},i["default"].setStorageController(e("./StorageController.browser"))},{"./CoreManager":3,"./ParsePromise":20,"./StorageController.browser":30}],30:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var o=e("./ParsePromise"),i=(n(o),{async:0,getItem:function(e){return localStorage.getItem(e)},setItem:function(e,t){try{localStorage.setItem(e,t)}catch(r){}},removeItem:function(e){localStorage.removeItem(e)},clear:function(){localStorage.clear()}});t.exports=i},{"./ParsePromise":20}],31:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var o=e("babel-runtime/helpers/classCallCheck"),i=n(o),s=e("babel-runtime/helpers/createClass"),a=n(s),u=e("./ParsePromise"),c=n(u),l=function(){function e(){(0,i["default"])(this,e),this.queue=[]}return(0,a["default"])(e,[{key:"enqueue",value:function(e){var t=this,r=new c["default"];return this.queue.push({task:e,_completion:r}),1===this.queue.length&&e().then(function(){t._dequeue(),r.resolve()},function(e){t._dequeue(),r.reject(e)}),r}},{key:"_dequeue",value:function(){var e=this;if(this.queue.shift(),this.queue.length){var t=this.queue[0];t.task().then(function(){e._dequeue(),t._completion.resolve()},function(r){e._dequeue(),t._completion.reject(r)})}}}]),e}();t.exports=l},{"./ParsePromise":20,"babel-runtime/helpers/classCallCheck":56,"babel-runtime/helpers/createClass":57}],32:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=A.get(e);return t||null}function s(e,t){var r=i(e);return r?r:(t||(t={serverData:{},pendingOps:[{}],objectCache:{},tasks:new E["default"],existed:!1}),r=t,A.set(e,r),r)}function a(e){var t=i(e);return null===t?null:(A["delete"](e),t)}function u(e){var t=i(e);return t?t.serverData:{}}function c(e,t){var r=s(e).serverData;S.setServerData(r,t)}function l(e){var t=i(e);return t?t.pendingOps:[{}]}function f(e,t,r){var n=s(e).pendingOps;S.setPendingOp(n,t,r)}function d(e){var t=s(e).pendingOps;S.pushPendingState(t)}function h(e){var t=s(e).pendingOps;return S.popPendingState(t)}function p(e){var t=l(e);S.mergeFirstPendingState(t)}function y(e){var t=i(e);return t?t.objectCache:{}}function v(e,t){var r=u(e),n=l(e);return S.estimateAttribute(r,n,e.className,e.id,t)}function _(e){var t=u(e),r=l(e);return S.estimateAttributes(t,r,e.className,e.id)}function b(e,t){var r=s(e);S.commitServerChanges(r.serverData,r.objectCache,t)}function g(e,t){var r=s(e);return r.tasks.enqueue(t)}function m(e,t){var r=s(e),n=s(t);for(var o in r.serverData)n.serverData[o]=r.serverData[o];for(var i=0;i<r.pendingOps.length;i++)for(var a in r.pendingOps[i])n.pendingOps[i][a]=r.pendingOps[i][a];for(var u in r.objectCache)n.objectCache[u]=r.objectCache[u];n.existed=r.existed}function k(){A=new w["default"]}Object.defineProperty(r,"__esModule",{value:!0});var C=e("babel-runtime/core-js/weak-map"),w=o(C);r.getState=i,r.initializeState=s,r.removeState=a,r.getServerData=u,r.setServerData=c,r.getPendingOps=l,r.setPendingOp=f,r.pushPendingState=d,r.popPendingState=h,r.mergeFirstPendingState=p,r.getObjectCache=y,r.estimateAttribute=v,r.estimateAttributes=_,r.commitServerChanges=b,r.enqueueTask=g,r.duplicateState=m,r.clearAllState=k;var j=e("./ObjectStateMutations"),S=n(j),O=e("./TaskQueue"),E=o(O),A=new w["default"]},{"./ObjectStateMutations":9,"./TaskQueue":31,"babel-runtime/core-js/weak-map":55}],33:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(e.indexOf(t)>-1)return!0;for(var r=0;r<e.length;r++)if(e[r]instanceof s["default"]&&e[r].className===t.className&&e[r]._getId()===t._getId())return!0;return!1}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=o;var i=e("./ParseObject"),s=n(i)},{"./ParseObject":18}],34:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(!(e instanceof f["default"]))return!0;var t=e.attributes;for(var r in t){var n=t[r];if(!i(n))return!1}return!0}function i(e){if("object"!==("undefined"==typeof e?"undefined":(0,a["default"])(e)))return!0;if(e instanceof h["default"])return!0;if(e instanceof f["default"])return!!e.id;if(e instanceof c["default"])return!!e.url();if(Array.isArray(e)){for(var t=0;t<e.length;t++)if(!i(e[t]))return!1;return!0}for(var r in e)if(!i(e[r]))return!1;return!0}Object.defineProperty(r,"__esModule",{value:!0});var s=e("babel-runtime/helpers/typeof"),a=n(s);r["default"]=o;var u=e("./ParseFile"),c=n(u),l=e("./ParseObject"),f=n(l),d=e("./ParseRelation"),h=n(d)},{"./ParseFile":14,"./ParseObject":18,"./ParseRelation":22,"babel-runtime/helpers/typeof":61}],35:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(null===e||"object"!==("undefined"==typeof e?"undefined":(0,s["default"])(e)))return e;if(Array.isArray(e)){var t=[];return e.forEach(function(e,r){t[r]=o(e)}),t}if("string"==typeof e.__op)return(0,p.opFromJSON)(e);if("Pointer"===e.__type&&e.className)return h["default"].fromJSON(e);if("Object"===e.__type&&e.className)return h["default"].fromJSON(e);if("Relation"===e.__type){var r=new v["default"](null,null);return r.targetClassName=e.className,r}if("Date"===e.__type)return new Date(e.iso);if("File"===e.__type)return c["default"].fromJSON(e);if("GeoPoint"===e.__type)return new f["default"]({latitude:e.latitude,longitude:e.longitude});var n={};for(var i in e)n[i]=o(e[i]);return n}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/helpers/typeof"),s=n(i);r["default"]=o;var a=e("./ParseACL"),u=(n(a),e("./ParseFile")),c=n(u),l=e("./ParseGeoPoint"),f=n(l),d=e("./ParseObject"),h=n(d),p=e("./ParseOp"),y=e("./ParseRelation"),v=n(y)},{"./ParseACL":11,"./ParseFile":14,"./ParseGeoPoint":15,"./ParseObject":18,"./ParseOp":19,"./ParseRelation":22,"babel-runtime/helpers/typeof":61}],36:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,r,n){if(e instanceof v["default"]){if(t)throw new Error("Parse Objects not allowed here");var i=e.id?e.className+":"+e.id:e;return r||!n||n.indexOf(i)>-1||e.dirty()||(0,u["default"])(e._getServerData()).length<1?e.toPointer():(n=n.concat(i),e._toFullJSON(n))}if(e instanceof _.Op||e instanceof l["default"]||e instanceof p["default"]||e instanceof g["default"])return e.toJSON();if(e instanceof d["default"]){if(!e.url())throw new Error("Tried to encode an unsaved file.");return e.toJSON()}if("[object Date]"===m.call(e)){if(isNaN(e))throw new Error("Tried to encode an invalid date.");return{__type:"Date",iso:e.toJSON()}}if("[object RegExp]"===m.call(e)&&"string"==typeof e.source)return e.source;if(Array.isArray(e))return e.map(function(e){return o(e,t,r,n)});if(e&&"object"===("undefined"==typeof e?"undefined":(0,s["default"])(e))){var a={};for(var c in e)a[c]=o(e[c],t,r,n);return a}return e}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/helpers/typeof"),s=n(i),a=e("babel-runtime/core-js/object/keys"),u=n(a);r["default"]=function(e,t,r,n){return o(e,!!t,!!r,n||[])};var c=e("./ParseACL"),l=n(c),f=e("./ParseFile"),d=n(f),h=e("./ParseGeoPoint"),p=n(h),y=e("./ParseObject"),v=n(y),_=e("./ParseOp"),b=e("./ParseRelation"),g=n(b),m=Object.prototype.toString},{"./ParseACL":11,"./ParseFile":14,"./ParseGeoPoint":15,"./ParseObject":18,"./ParseOp":19,"./ParseRelation":22,"babel-runtime/core-js/object/keys":51,"babel-runtime/helpers/typeof":61}],37:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(("undefined"==typeof e?"undefined":(0,u["default"])(e))!==("undefined"==typeof t?"undefined":(0,u["default"])(t)))return!1;if(!e||"object"!==("undefined"==typeof e?"undefined":(0,u["default"])(e)))return e===t;if(Array.isArray(e)||Array.isArray(t)){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var r=e.length;r--;)if(!o(e[r],t[r]))return!1;return!0}if(e instanceof l["default"]||e instanceof d["default"]||e instanceof p["default"]||e instanceof v["default"])return e.equals(t);if((0,s["default"])(e).length!==(0,s["default"])(t).length)return!1;for(var n in e)if(!o(e[n],t[n]))return!1;return!0}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/core-js/object/keys"),s=n(i),a=e("babel-runtime/helpers/typeof"),u=n(a);r["default"]=o;var c=e("./ParseACL"),l=n(c),f=e("./ParseFile"),d=n(f),h=e("./ParseGeoPoint"),p=n(h),y=e("./ParseObject"),v=n(y)},{"./ParseACL":11,"./ParseFile":14,"./ParseGeoPoint":15,"./ParseObject":18,"babel-runtime/core-js/object/keys":51,"babel-runtime/helpers/typeof":61}],38:[function(e,t,r){"use strict";function n(e){return e.replace(/[&<>\/'"]/g,function(e){return o[e]})}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var o={"&":"&amp;","<":"&lt;",">":"&gt;","/":"&#x2F;","'":"&#x27;",'"':"&quot;"}},{}],39:[function(e,t,r){"use strict";function n(e){return e.indexOf("r:")>-1}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n},{}],40:[function(e,t,r){"use strict";function n(e){var t=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$"),r=t.exec(e);if(!r)return null;var n=r[1]||0,o=(r[2]||1)-1,i=r[3]||0,s=r[4]||0,a=r[5]||0,u=r[6]||0,c=r[8]||0;return new Date(Date.UTC(n,o,i,s,a,u,c))}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n},{}],41:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=[];return e.forEach(function(e){e instanceof u["default"]?(0,s["default"])(t,e)||t.push(e):t.indexOf(e)<0&&t.push(e)}),t}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=o;var i=e("./arrayContainsObject"),s=n(i),a=e("./ParseObject"),u=n(a)},{"./ParseObject":18,"./arrayContainsObject":33}],42:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var r={objects:{},files:[]},n=e.className+":"+e._getId();r.objects[n]=!e.dirty()||e;var o=e.attributes;for(var s in o)"object"===(0,a["default"])(o[s])&&i(o[s],r,!1,!!t);var u=[];for(var c in r.objects)c!==n&&r.objects[c]!==!0&&u.push(r.objects[c]);return u.concat(r.files)}function i(e,t,r,n){if(e instanceof f["default"]){if(!e.id&&r)throw new Error("Cannot create a pointer to an unsaved Object.");var o=e.className+":"+e._getId();if(!t.objects[o]){t.objects[o]=!e.dirty()||e;var s=e.attributes;for(var u in s)"object"===(0,a["default"])(s[u])&&i(s[u],t,!n,n)}}else{if(e instanceof c["default"])return void(!e.url()&&t.files.indexOf(e)<0&&t.files.push(e));if(!(e instanceof h["default"])){Array.isArray(e)&&e.forEach(function(e){"object"===("undefined"==typeof e?"undefined":(0,a["default"])(e))&&i(e,t,r,n)});for(var l in e)"object"===(0,a["default"])(e[l])&&i(e[l],t,r,n)}}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("babel-runtime/helpers/typeof"),a=n(s);r["default"]=o;var u=e("./ParseFile"),c=n(u),l=e("./ParseObject"),f=n(l),d=e("./ParseRelation"),h=n(d)},{"./ParseFile":14,"./ParseObject":18,"./ParseRelation":22,"babel-runtime/helpers/typeof":61}],43:[function(e,t,r){t.exports={"default":e("core-js/library/fn/get-iterator"),
__esModule:!0}},{"core-js/library/fn/get-iterator":62}],44:[function(e,t,r){t.exports={"default":e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":63}],45:[function(e,t,r){t.exports={"default":e("core-js/library/fn/map"),__esModule:!0}},{"core-js/library/fn/map":64}],46:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":65}],47:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":66}],48:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/freeze"),__esModule:!0}},{"core-js/library/fn/object/freeze":67}],49:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":68}],50:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":69}],51:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":70}],52:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":71}],53:[function(e,t,r){t.exports={"default":e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":72}],54:[function(e,t,r){t.exports={"default":e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":73}],55:[function(e,t,r){t.exports={"default":e("core-js/library/fn/weak-map"),__esModule:!0}},{"core-js/library/fn/weak-map":74}],56:[function(e,t,r){"use strict";r.__esModule=!0,r["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],57:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var o=e("../core-js/object/define-property"),i=n(o);r["default"]=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i["default"])(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},{"../core-js/object/define-property":47}],58:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var o=e("../core-js/object/get-prototype-of"),i=n(o),s=e("../core-js/object/get-own-property-descriptor"),a=n(s);r["default"]=function u(e,t,r){null===e&&(e=Function.prototype);var n=(0,a["default"])(e,t);if(void 0===n){var o=(0,i["default"])(e);return null===o?void 0:u(o,t,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)}},{"../core-js/object/get-own-property-descriptor":49,"../core-js/object/get-prototype-of":50}],59:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var o=e("../core-js/object/set-prototype-of"),i=n(o),s=e("../core-js/object/create"),a=n(s),u=e("../helpers/typeof"),c=n(u);r["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,c["default"])(t)));e.prototype=(0,a["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i["default"]?(0,i["default"])(e,t):e.__proto__=t)}},{"../core-js/object/create":46,"../core-js/object/set-prototype-of":52,"../helpers/typeof":61}],60:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var o=e("../helpers/typeof"),i=n(o);r["default"]=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":(0,i["default"])(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":61}],61:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var o=e("../core-js/symbol/iterator"),i=n(o),s=e("../core-js/symbol"),a=n(s),u="function"==typeof a["default"]&&"symbol"==typeof i["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof a["default"]&&e.constructor===a["default"]?"symbol":typeof e};r["default"]="function"==typeof a["default"]&&"symbol"===u(i["default"])?function(e){return"undefined"==typeof e?"undefined":u(e)}:function(e){return e&&"function"==typeof a["default"]&&e.constructor===a["default"]?"symbol":"undefined"==typeof e?"undefined":u(e)}},{"../core-js/symbol":53,"../core-js/symbol/iterator":54}],62:[function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":150,"../modules/es6.string.iterator":161,"../modules/web.dom.iterable":167}],63:[function(e,t,r){var n=e("../../modules/_core"),o=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(e){return o.stringify.apply(o,arguments)}},{"../../modules/_core":90}],64:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),t.exports=e("../modules/_core").Map},{"../modules/_core":90,"../modules/es6.map":152,"../modules/es6.object.to-string":160,"../modules/es6.string.iterator":161,"../modules/es7.map.to-json":164,"../modules/web.dom.iterable":167}],65:[function(e,t,r){e("../../modules/es6.object.create");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.create(e,t)}},{"../../modules/_core":90,"../../modules/es6.object.create":153}],66:[function(e,t,r){e("../../modules/es6.object.define-property");var n=e("../../modules/_core").Object;t.exports=function(e,t,r){return n.defineProperty(e,t,r)}},{"../../modules/_core":90,"../../modules/es6.object.define-property":154}],67:[function(e,t,r){e("../../modules/es6.object.freeze"),t.exports=e("../../modules/_core").Object.freeze},{"../../modules/_core":90,"../../modules/es6.object.freeze":155}],68:[function(e,t,r){e("../../modules/es6.object.get-own-property-descriptor");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},{"../../modules/_core":90,"../../modules/es6.object.get-own-property-descriptor":156}],69:[function(e,t,r){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":90,"../../modules/es6.object.get-prototype-of":157}],70:[function(e,t,r){e("../../modules/es6.object.keys"),t.exports=e("../../modules/_core").Object.keys},{"../../modules/_core":90,"../../modules/es6.object.keys":158}],71:[function(e,t,r){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":90,"../../modules/es6.object.set-prototype-of":159}],72:[function(e,t,r){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":90,"../../modules/es6.object.to-string":160,"../../modules/es6.symbol":162,"../../modules/es7.symbol.async-iterator":165,"../../modules/es7.symbol.observable":166}],73:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":147,"../../modules/es6.string.iterator":161,"../../modules/web.dom.iterable":167}],74:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/web.dom.iterable"),e("../modules/es6.weak-map"),t.exports=e("../modules/_core").WeakMap},{"../modules/_core":90,"../modules/es6.object.to-string":160,"../modules/es6.weak-map":163,"../modules/web.dom.iterable":167}],75:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],76:[function(e,t,r){t.exports=function(){}},{}],77:[function(e,t,r){t.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},{}],78:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":108}],79:[function(e,t,r){var n=e("./_for-of");t.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},{"./_for-of":99}],80:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-index");t.exports=function(e){return function(t,r,s){var a,u=n(t),c=o(u.length),l=i(s,c);if(e&&r!=r){for(;c>l;)if(a=u[l++],a!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}}},{"./_to-index":139,"./_to-iobject":141,"./_to-length":142}],81:[function(e,t,r){var n=e("./_ctx"),o=e("./_iobject"),i=e("./_to-object"),s=e("./_to-length"),a=e("./_array-species-create");t.exports=function(e,t){var r=1==e,u=2==e,c=3==e,l=4==e,f=6==e,d=5==e||f,h=t||a;return function(t,a,p){for(var y,v,_=i(t),b=o(_),g=n(a,p,3),m=s(b.length),k=0,C=r?h(t,m):u?h(t,0):void 0;m>k;k++)if((d||k in b)&&(y=b[k],v=g(y,k,_),e))if(r)C[k]=v;else if(v)switch(e){case 3:return!0;case 5:return y;case 6:return k;case 2:C.push(y)}else if(l)return!1;return f?-1:c||l?l:C}}},{"./_array-species-create":83,"./_ctx":91,"./_iobject":105,"./_to-length":142,"./_to-object":143}],82:[function(e,t,r){var n=e("./_is-object"),o=e("./_is-array"),i=e("./_wks")("species");t.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),n(t)&&(t=t[i],null===t&&(t=void 0))),void 0===t?Array:t}},{"./_is-array":107,"./_is-object":108,"./_wks":148}],83:[function(e,t,r){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":82}],84:[function(e,t,r){var n=e("./_cof"),o=e("./_wks")("toStringTag"),i="Arguments"==n(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(r){}};t.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=s(t=Object(e),o))?r:i?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},{"./_cof":85,"./_wks":148}],85:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],86:[function(e,t,r){"use strict";var n=e("./_object-dp").f,o=e("./_object-create"),i=e("./_redefine-all"),s=e("./_ctx"),a=e("./_an-instance"),u=e("./_defined"),c=e("./_for-of"),l=e("./_iter-define"),f=e("./_iter-step"),d=e("./_set-species"),h=e("./_descriptors"),p=e("./_meta").fastKey,y=h?"_s":"size",v=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,l){var f=e(function(e,n){a(e,f,t,"_i"),e._i=o(null),e._f=void 0,e._l=void 0,e[y]=0,void 0!=n&&c(n,r,e[l],e)});return i(f.prototype,{clear:function(){for(var e=this,t=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete t[r.i];e._f=e._l=void 0,e[y]=0},"delete":function(e){var t=this,r=v(t,e);if(r){var n=r.n,o=r.p;delete t._i[r.i],r.r=!0,o&&(o.n=n),n&&(n.p=o),t._f==r&&(t._f=n),t._l==r&&(t._l=o),t[y]--}return!!r},forEach:function(e){a(this,f,"forEach");for(var t,r=s(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!v(this,e)}}),h&&n(f.prototype,"size",{get:function(){return u(this[y])}}),f},def:function(e,t,r){var n,o,i=v(e,t);return i?i.v=r:(e._l=i={i:o=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[y]++,"F"!==o&&(e._i[o]=i)),e},getEntry:v,setStrong:function(e,t,r){l(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?f(0,r.k):"values"==t?f(0,r.v):f(0,[r.k,r.v]):(e._t=void 0,f(1))},r?"entries":"values",!r,!0),d(t)}}},{"./_an-instance":77,"./_ctx":91,"./_defined":92,"./_descriptors":93,"./_for-of":99,"./_iter-define":111,"./_iter-step":112,"./_meta":116,"./_object-create":118,"./_object-dp":119,"./_redefine-all":131,"./_set-species":134}],87:[function(e,t,r){var n=e("./_classof"),o=e("./_array-from-iterable");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},{"./_array-from-iterable":79,"./_classof":84}],88:[function(e,t,r){"use strict";var n=e("./_redefine-all"),o=e("./_meta").getWeak,i=e("./_an-object"),s=e("./_is-object"),a=e("./_an-instance"),u=e("./_for-of"),c=e("./_array-methods"),l=e("./_has"),f=c(5),d=c(6),h=0,p=function(e){return e._l||(e._l=new y)},y=function(){this.a=[]},v=function(e,t){return f(e.a,function(e){return e[0]===t})};y.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var r=v(this,e);r?r[1]=t:this.a.push([e,t])},"delete":function(e){var t=d(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(e,t,r,i){var c=e(function(e,n){a(e,c,t,"_i"),e._i=h++,e._l=void 0,void 0!=n&&u(n,r,e[i],e)});return n(c.prototype,{"delete":function(e){if(!s(e))return!1;var t=o(e);return t===!0?p(this)["delete"](e):t&&l(t,this._i)&&delete t[this._i]},has:function(e){if(!s(e))return!1;var t=o(e);return t===!0?p(this).has(e):t&&l(t,this._i)}}),c},def:function(e,t,r){var n=o(i(t),!0);return n===!0?p(e).set(t,r):n[e._i]=r,e},ufstore:p}},{"./_an-instance":77,"./_an-object":78,"./_array-methods":81,"./_for-of":99,"./_has":101,"./_is-object":108,"./_meta":116,"./_redefine-all":131}],89:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_export"),i=e("./_meta"),s=e("./_fails"),a=e("./_hide"),u=e("./_redefine-all"),c=e("./_for-of"),l=e("./_an-instance"),f=e("./_is-object"),d=e("./_set-to-string-tag"),h=e("./_object-dp").f,p=e("./_array-methods")(0),y=e("./_descriptors");t.exports=function(e,t,r,v,_,b){var g=n[e],m=g,k=_?"set":"add",C=m&&m.prototype,w={};return y&&"function"==typeof m&&(b||C.forEach&&!s(function(){(new m).entries().next()}))?(m=t(function(t,r){l(t,m,e,"_c"),t._c=new g,void 0!=r&&c(r,_,t[k],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in C&&(!b||"clear"!=e)&&a(m.prototype,e,function(r,n){if(l(this,m,e),!t&&b&&!f(r))return"get"==e&&void 0;var o=this._c[e](0===r?0:r,n);return t?this:o})}),"size"in C&&h(m.prototype,"size",{get:function(){return this._c.size}})):(m=v.getConstructor(t,e,_,k),u(m.prototype,r),i.NEED=!0),d(m,e),w[e]=m,o(o.G+o.W+o.F,w),b||v.setStrong(m,e,_),m}},{"./_an-instance":77,"./_array-methods":81,"./_descriptors":93,"./_export":97,"./_fails":98,"./_for-of":99,"./_global":100,"./_hide":102,"./_is-object":108,"./_meta":116,"./_object-dp":119,"./_redefine-all":131,"./_set-to-string-tag":135}],90:[function(e,t,r){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},{}],91:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":75}],92:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],93:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":98}],94:[function(e,t,r){var n=e("./_is-object"),o=e("./_global").document,i=n(o)&&n(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":100,"./_is-object":108}],95:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],96:[function(e,t,r){var n=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie");t.exports=function(e){var t=n(e),r=o.f;if(r)for(var s,a=r(e),u=i.f,c=0;a.length>c;)u.call(e,s=a[c++])&&t.push(s);return t}},{"./_object-gops":124,"./_object-keys":127,"./_object-pie":128}],97:[function(e,t,r){var n=e("./_global"),o=e("./_core"),i=e("./_ctx"),s=e("./_hide"),a="prototype",u=function(e,t,r){var c,l,f,d=e&u.F,h=e&u.G,p=e&u.S,y=e&u.P,v=e&u.B,_=e&u.W,b=h?o:o[t]||(o[t]={}),g=b[a],m=h?n:p?n[t]:(n[t]||{})[a];h&&(r=t);for(c in r)l=!d&&m&&void 0!==m[c],l&&c in b||(f=l?m[c]:r[c],b[c]=h&&"function"!=typeof m[c]?r[c]:v&&l?i(f,n):_&&m[c]==f?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t[a]=e[a],t}(f):y&&"function"==typeof f?i(Function.call,f):f,y&&((b.virtual||(b.virtual={}))[c]=f,e&u.R&&g&&!g[c]&&s(g,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":90,"./_ctx":91,"./_global":100,"./_hide":102}],98:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],99:[function(e,t,r){var n=e("./_ctx"),o=e("./_iter-call"),i=e("./_is-array-iter"),s=e("./_an-object"),a=e("./_to-length"),u=e("./core.get-iterator-method"),c={},l={},r=t.exports=function(e,t,r,f,d){var h,p,y,v,_=d?function(){return e}:u(e),b=n(r,f,t?2:1),g=0;if("function"!=typeof _)throw TypeError(e+" is not iterable!");if(i(_)){for(h=a(e.length);h>g;g++)if(v=t?b(s(p=e[g])[0],p[1]):b(e[g]),v===c||v===l)return v}else for(y=_.call(e);!(p=y.next()).done;)if(v=o(y,b,p.value,t),v===c||v===l)return v};r.BREAK=c,r.RETURN=l},{"./_an-object":78,"./_ctx":91,"./_is-array-iter":106,"./_iter-call":109,"./_to-length":142,"./core.get-iterator-method":149}],100:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],101:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],102:[function(e,t,r){var n=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":93,"./_object-dp":119,"./_property-desc":130}],103:[function(e,t,r){t.exports=e("./_global").document&&document.documentElement},{"./_global":100}],104:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":93,"./_dom-create":94,"./_fails":98}],105:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":85}],106:[function(e,t,r){var n=e("./_iterators"),o=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},{"./_iterators":113,"./_wks":148}],107:[function(e,t,r){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":85}],108:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],109:[function(e,t,r){var n=e("./_an-object");t.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(i){var s=e["return"];throw void 0!==s&&n(s.call(e)),i}}},{"./_an-object":78}],110:[function(e,t,r){"use strict";var n=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),s={};e("./_hide")(s,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(s,{next:o(1,r)}),i(e,t+" Iterator")}},{"./_hide":102,"./_object-create":118,"./_property-desc":130,"./_set-to-string-tag":135,"./_wks":148}],111:[function(e,t,r){"use strict";var n=e("./_library"),o=e("./_export"),i=e("./_redefine"),s=e("./_hide"),a=e("./_has"),u=e("./_iterators"),c=e("./_iter-create"),l=e("./_set-to-string-tag"),f=e("./_object-gpo"),d=e("./_wks")("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",y="keys",v="values",_=function(){return this};t.exports=function(e,t,r,b,g,m,k){c(r,t,b);var C,w,j,S=function(e){if(!h&&e in P)return P[e];switch(e){case y:return function(){return new r(this,e)};case v:return function(){return new r(this,e)}}return function(){return new r(this,e)}},O=t+" Iterator",E=g==v,A=!1,P=e.prototype,T=P[d]||P[p]||g&&P[g],N=T||S(g),I=g?E?S("entries"):N:void 0,R="Array"==t?P.entries||T:T;if(R&&(j=f(R.call(new e)),j!==Object.prototype&&(l(j,O,!0),n||a(j,d)||s(j,d,_))),E&&T&&T.name!==v&&(A=!0,N=function(){return T.call(this)}),n&&!k||!h&&!A&&P[d]||s(P,d,N),u[t]=N,u[O]=_,g)if(C={values:E?N:S(v),keys:m?N:S(y),entries:I},k)for(w in C)w in P||i(P,w,C[w]);else o(o.P+o.F*(h||A),t,C);return C}},{"./_export":97,"./_has":101,"./_hide":102,"./_iter-create":110,"./_iterators":113,"./_library":115,"./_object-gpo":125,"./_redefine":132,"./_set-to-string-tag":135,"./_wks":148}],112:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],113:[function(e,t,r){t.exports={}},{}],114:[function(e,t,r){var n=e("./_object-keys"),o=e("./_to-iobject");t.exports=function(e,t){for(var r,i=o(e),s=n(i),a=s.length,u=0;a>u;)if(i[r=s[u++]]===t)return r}},{"./_object-keys":127,"./_to-iobject":141}],115:[function(e,t,r){t.exports=!0},{}],116:[function(e,t,r){var n=e("./_uid")("meta"),o=e("./_is-object"),i=e("./_has"),s=e("./_object-dp").f,a=0,u=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),l=function(e){s(e,n,{value:{i:"O"+ ++a,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[n].i},d=function(e,t){if(!i(e,n)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[n].w},h=function(e){return c&&p.NEED&&u(e)&&!i(e,n)&&l(e),e},p=t.exports={KEY:n,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},{"./_fails":98,"./_has":101,"./_is-object":108,"./_object-dp":119,"./_uid":145}],117:[function(e,t,r){"use strict";var n=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie"),s=e("./_to-object"),a=e("./_iobject"),u=Object.assign;t.exports=!u||e("./_fails")(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=s(e),u=arguments.length,c=1,l=o.f,f=i.f;u>c;)for(var d,h=a(arguments[c++]),p=l?n(h).concat(l(h)):n(h),y=p.length,v=0;y>v;)f.call(h,d=p[v++])&&(r[d]=h[d]);return r}:u},{"./_fails":98,"./_iobject":105,"./_object-gops":124,"./_object-keys":127,"./_object-pie":128,"./_to-object":143}],118:[function(e,t,r){var n=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),s=e("./_shared-key")("IE_PROTO"),a=function(){},u="prototype",c=function(){var t,r=e("./_dom-create")("iframe"),n=i.length,o="<",s=">";for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",t=r.contentWindow.document,t.open(),t.write(o+"script"+s+"document.F=Object"+o+"/script"+s),t.close(),c=t.F;n--;)delete c[u][i[n]];return c()};t.exports=Object.create||function(e,t){var r;return null!==e?(a[u]=n(e),r=new a,a[u]=null,r[s]=e):r=c(),void 0===t?r:o(r,t)}},{"./_an-object":78,"./_dom-create":94,"./_enum-bug-keys":95,"./_html":103,"./_object-dps":120,"./_shared-key":136}],119:[function(e,t,r){var n=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),s=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return s(e,t,r)}catch(a){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":78,"./_descriptors":93,"./_ie8-dom-define":104,"./_to-primitive":144}],120:[function(e,t,r){var n=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var r,s=i(t),a=s.length,u=0;a>u;)n.f(e,r=s[u++],t[r]);return e}},{"./_an-object":78,"./_descriptors":93,"./_object-dp":119,"./_object-keys":127}],121:[function(e,t,r){var n=e("./_object-pie"),o=e("./_property-desc"),i=e("./_to-iobject"),s=e("./_to-primitive"),a=e("./_has"),u=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;r.f=e("./_descriptors")?c:function(e,t){if(e=i(e),t=s(t,!0),u)try{return c(e,t)}catch(r){}if(a(e,t))return o(!n.f.call(e,t),e[t])}},{"./_descriptors":93,"./_has":101,"./_ie8-dom-define":104,"./_object-pie":128,"./_property-desc":130,"./_to-iobject":141,"./_to-primitive":144}],122:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_object-gopn").f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return o(e)}catch(t){return s.slice()}};t.exports.f=function(e){return s&&"[object Window]"==i.call(e)?a(e):o(n(e))}},{"./_object-gopn":123,"./_to-iobject":141}],123:[function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},{"./_enum-bug-keys":95,"./_object-keys-internal":126}],124:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],125:[function(e,t,r){var n=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{"./_has":101,"./_shared-key":136,"./_to-object":143}],126:[function(e,t,r){var n=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),s=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,a=o(e),u=0,c=[];for(r in a)r!=s&&n(a,r)&&c.push(r);for(;t.length>u;)n(a,r=t[u++])&&(~i(c,r)||c.push(r));return c}},{"./_array-includes":80,"./_has":101,"./_shared-key":136,"./_to-iobject":141}],127:[function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,o)}},{"./_enum-bug-keys":95,"./_object-keys-internal":126}],128:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],129:[function(e,t,r){var n=e("./_export"),o=e("./_core"),i=e("./_fails");t.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],s={};s[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",s)}},{"./_core":90,"./_export":97,"./_fails":98}],130:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],131:[function(e,t,r){var n=e("./_hide");t.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},{"./_hide":102}],132:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":102}],133:[function(e,t,r){var n=e("./_is-object"),o=e("./_an-object"),i=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,n){try{n=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2),n(t,[]),r=!(t instanceof Array)}catch(o){r=!0}return function(e,t){return i(e,t),r?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:i}},{"./_an-object":78,"./_ctx":91,"./_is-object":108,"./_object-gopd":121}],134:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_core"),i=e("./_object-dp"),s=e("./_descriptors"),a=e("./_wks")("species");t.exports=function(e){var t="function"==typeof o[e]?o[e]:n[e];s&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},{"./_core":90,"./_descriptors":93,"./_global":100,"./_object-dp":119,"./_wks":148}],135:[function(e,t,r){var n=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},{"./_has":101,"./_object-dp":119,"./_wks":148}],136:[function(e,t,r){var n=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return n[e]||(n[e]=o(e))}},{"./_shared":137,"./_uid":145}],137:[function(e,t,r){var n=e("./_global"),o="__core-js_shared__",i=n[o]||(n[o]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":100}],138:[function(e,t,r){var n=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,r){var i,s,a=String(o(t)),u=n(r),c=a.length;return u<0||u>=c?e?"":void 0:(i=a.charCodeAt(u),i<55296||i>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):i:e?a.slice(u,u+2):(i-55296<<10)+(s-56320)+65536)}}},{"./_defined":92,"./_to-integer":140}],139:[function(e,t,r){var n=e("./_to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return e=n(e),e<0?o(e+t,0):i(e,t)}},{"./_to-integer":140}],140:[function(e,t,r){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],141:[function(e,t,r){var n=e("./_iobject"),o=e("./_defined");t.exports=function(e){return n(o(e))}},{"./_defined":92,"./_iobject":105}],142:[function(e,t,r){var n=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./_to-integer":140}],143:[function(e,t,r){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":92}],144:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":108}],145:[function(e,t,r){var n=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],146:[function(e,t,r){var n=e("./_global"),o=e("./_core"),i=e("./_library"),s=e("./_wks-ext"),a=e("./_object-dp").f;t.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},{"./_core":90,"./_global":100,"./_library":115,"./_object-dp":119,"./_wks-ext":147}],147:[function(e,t,r){r.f=e("./_wks")},{"./_wks":148}],148:[function(e,t,r){var n=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,s="function"==typeof i,a=t.exports=function(e){return n[e]||(n[e]=s&&i[e]||(s?i:o)("Symbol."+e))};a.store=n},{"./_global":100,"./_shared":137,"./_uid":145}],149:[function(e,t,r){var n=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[n(e)]}},{"./_classof":84,"./_core":90,"./_iterators":113,"./_wks":148}],150:[function(e,t,r){var n=e("./_an-object"),o=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},{"./_an-object":78,"./_core":90,"./core.get-iterator-method":149}],151:[function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),s=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":76,"./_iter-define":111,"./_iter-step":112,"./_iterators":113,"./_to-iobject":141}],152:[function(e,t,r){"use strict";var n=e("./_collection-strong");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(this,e);return t&&t.v},set:function(e,t){return n.def(this,0===e?0:e,t)}},n,!0)},{"./_collection":89,"./_collection-strong":86}],153:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{create:e("./_object-create")})},{"./_export":97,"./_object-create":118}],154:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":93,"./_export":97,"./_object-dp":119}],155:[function(e,t,r){var n=e("./_is-object"),o=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(e){
return function(t){return e&&n(t)?e(o(t)):t}})},{"./_is-object":108,"./_meta":116,"./_object-sap":129}],156:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return o(n(e),t)}})},{"./_object-gopd":121,"./_object-sap":129,"./_to-iobject":141}],157:[function(e,t,r){var n=e("./_to-object"),o=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return o(n(e))}})},{"./_object-gpo":125,"./_object-sap":129,"./_to-object":143}],158:[function(e,t,r){var n=e("./_to-object"),o=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return o(n(e))}})},{"./_object-keys":127,"./_object-sap":129,"./_to-object":143}],159:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":97,"./_set-proto":133}],160:[function(e,t,r){},{}],161:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":111,"./_string-at":138}],162:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_has"),i=e("./_descriptors"),s=e("./_export"),a=e("./_redefine"),u=e("./_meta").KEY,c=e("./_fails"),l=e("./_shared"),f=e("./_set-to-string-tag"),d=e("./_uid"),h=e("./_wks"),p=e("./_wks-ext"),y=e("./_wks-define"),v=e("./_keyof"),_=e("./_enum-keys"),b=e("./_is-array"),g=e("./_an-object"),m=e("./_to-iobject"),k=e("./_to-primitive"),C=e("./_property-desc"),w=e("./_object-create"),j=e("./_object-gopn-ext"),S=e("./_object-gopd"),O=e("./_object-dp"),E=e("./_object-keys"),A=S.f,P=O.f,T=j.f,N=n.Symbol,I=n.JSON,R=I&&I.stringify,x="prototype",M=h("_hidden"),U=h("toPrimitive"),D={}.propertyIsEnumerable,L=l("symbol-registry"),B=l("symbols"),q=l("op-symbols"),F=Object[x],J="function"==typeof N,K=n.QObject,W=!K||!K[x]||!K[x].findChild,z=i&&c(function(){return 7!=w(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=A(F,t);n&&delete F[t],P(e,t,r),n&&e!==F&&P(F,t,n)}:P,Q=function(e){var t=B[e]=w(N[x]);return t._k=e,t},H=J&&"symbol"==typeof N.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof N},G=function(e,t,r){return e===F&&G(q,t,r),g(e),t=k(t,!0),g(r),o(B,t)?(r.enumerable?(o(e,M)&&e[M][t]&&(e[M][t]=!1),r=w(r,{enumerable:C(0,!1)})):(o(e,M)||P(e,M,C(1,{})),e[M][t]=!0),z(e,t,r)):P(e,t,r)},V=function(e,t){g(e);for(var r,n=_(t=m(t)),o=0,i=n.length;i>o;)G(e,r=n[o++],t[r]);return e},Y=function(e,t){return void 0===t?w(e):V(w(e),t)},X=function(e){var t=D.call(this,e=k(e,!0));return!(this===F&&o(B,e)&&!o(q,e))&&(!(t||!o(this,e)||!o(B,e)||o(this,M)&&this[M][e])||t)},$=function(e,t){if(e=m(e),t=k(t,!0),e!==F||!o(B,t)||o(q,t)){var r=A(e,t);return!r||!o(B,t)||o(e,M)&&e[M][t]||(r.enumerable=!0),r}},Z=function(e){for(var t,r=T(m(e)),n=[],i=0;r.length>i;)o(B,t=r[i++])||t==M||t==u||n.push(t);return n},ee=function(e){for(var t,r=e===F,n=T(r?q:m(e)),i=[],s=0;n.length>s;)!o(B,t=n[s++])||r&&!o(F,t)||i.push(B[t]);return i};J||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(r){this===F&&t.call(q,r),o(this,M)&&o(this[M],e)&&(this[M][e]=!1),z(this,e,C(1,r))};return i&&W&&z(F,e,{configurable:!0,set:t}),Q(e)},a(N[x],"toString",function(){return this._k}),S.f=$,O.f=G,e("./_object-gopn").f=j.f=Z,e("./_object-pie").f=X,e("./_object-gops").f=ee,i&&!e("./_library")&&a(F,"propertyIsEnumerable",X,!0),p.f=function(e){return Q(h(e))}),s(s.G+s.W+s.F*!J,{Symbol:N});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)h(te[re++]);for(var te=E(h.store),re=0;te.length>re;)y(te[re++]);s(s.S+s.F*!J,"Symbol",{"for":function(e){return o(L,e+="")?L[e]:L[e]=N(e)},keyFor:function(e){if(H(e))return v(L,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!J,"Object",{create:Y,defineProperty:G,defineProperties:V,getOwnPropertyDescriptor:$,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),I&&s(s.S+s.F*(!J||c(function(){var e=N();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!H(e)){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);return t=n[1],"function"==typeof t&&(r=t),!r&&b(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!H(t))return t}),n[1]=t,R.apply(I,n)}}}),N[x][U]||e("./_hide")(N[x],U,N[x].valueOf),f(N,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},{"./_an-object":78,"./_descriptors":93,"./_enum-keys":96,"./_export":97,"./_fails":98,"./_global":100,"./_has":101,"./_hide":102,"./_is-array":107,"./_keyof":114,"./_library":115,"./_meta":116,"./_object-create":118,"./_object-dp":119,"./_object-gopd":121,"./_object-gopn":123,"./_object-gopn-ext":122,"./_object-gops":124,"./_object-keys":127,"./_object-pie":128,"./_property-desc":130,"./_redefine":132,"./_set-to-string-tag":135,"./_shared":137,"./_to-iobject":141,"./_to-primitive":144,"./_uid":145,"./_wks":148,"./_wks-define":146,"./_wks-ext":147}],163:[function(e,t,r){"use strict";var n,o=e("./_array-methods")(0),i=e("./_redefine"),s=e("./_meta"),a=e("./_object-assign"),u=e("./_collection-weak"),c=e("./_is-object"),l=s.getWeak,f=Object.isExtensible,d=u.ufstore,h={},p=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(c(e)){var t=l(e);return t===!0?d(this).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(this,e,t)}},v=t.exports=e("./_collection")("WeakMap",p,y,u,!0,!0);7!=(new v).set((Object.freeze||Object)(h),7).get(h)&&(n=u.getConstructor(p),a(n.prototype,y),s.NEED=!0,o(["delete","has","get","set"],function(e){var t=v.prototype,r=t[e];i(t,e,function(t,o){if(c(t)&&!f(t)){this._f||(this._f=new n);var i=this._f[e](t,o);return"set"==e?this:i}return r.call(this,t,o)})}))},{"./_array-methods":81,"./_collection":89,"./_collection-weak":88,"./_is-object":108,"./_meta":116,"./_object-assign":117,"./_redefine":132}],164:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":87,"./_export":97}],165:[function(e,t,r){e("./_wks-define")("asyncIterator")},{"./_wks-define":146}],166:[function(e,t,r){e("./_wks-define")("observable")},{"./_wks-define":146}],167:[function(e,t,r){e("./es6.array.iterator");for(var n=e("./_global"),o=e("./_hide"),i=e("./_iterators"),s=e("./_wks")("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=a[u],l=n[c],f=l&&l.prototype;f&&!f[s]&&o(f,s,c),i[c]=i.Array}},{"./_global":100,"./_hide":102,"./_iterators":113,"./_wks":148,"./es6.array.iterator":151}],168:[function(e,t,r){arguments[4][160][0].apply(r,arguments)},{dup:160}],169:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,i,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(o(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=new Array(n-1),u=1;u<n;u++)i[u-1]=arguments[u];r.apply(this,i)}else if(s(r)){for(n=arguments.length,i=new Array(n-1),u=1;u<n;u++)i[u-1]=arguments[u];for(c=r.slice(),n=c.length,u=0;u<n;u++)c[u].apply(this,i)}return!0},n.prototype.addListener=function(e,t){var r;if(!o(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var r;r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,i,a;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],i=r.length,n=-1,r===t||o(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(a=i;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],o(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?o(e._events[t])?1:e._events[t].length:0}},{}]},{},[10])(10)}),function(){var e=50,t=30,r=function(){"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(http=require("http"),io=require("socket.io-client"),Parse=require("parse"));var r,n={transports:["websocket"],"force new connection":!0},o=function(){},i=function(e,t){t||(t="STALK"),e.endsWith("/")&&(e=e.substring(0,e.lastIndexOf("/")));var r=this;return r.appId=t,r.hostname=e,r._channels={},r._currentUser=void 0,r._currentChannel=void 0,r.onGlobalMessageCallback=void 0,r._globalSocketConnected=!1,Parse.initialize(t),Parse.serverURL=r.hostname+"/parse",r};i.prototype.enableDebug=function(){r||("undefined"!=typeof module&&"undefined"!=typeof module.exports?o=Function.prototype.bind.call(console.log,console):window.console&&(o=Function.prototype.bind?Function.prototype.bind.call(console.log,console):function(){Function.prototype.apply.call(console.log,console,arguments)}))},i.prototype.disableDebug=function(){o=function(){},r=void 0},i.prototype.signUp=function(e,t,r,n){"function"!=typeof r||n||(n=r,r=void 0);var o=new Parse.User;if(o.set("username",e),o.set("password",t),o.set("nickName",e),r)for(var i in r)o.set(i,r[i]);o.signUp(null,{success:function(e){n(null,e)},error:function(e,t){n(t,null)}})},i.prototype.logIn=function(e,t,r){var n=this;Parse.User.logIn(e,t,{success:function(e){var t=u.fromUserToJSON(e,160);n._currentUser=t;try{n._connectGlobalChannel()}catch(o){console.log(o)}r(null,t)},error:function(e,t){r(t,null)}})},i.prototype.logOut=function(){this._currentUser=void 0,Parse.User.logOut()},i.prototype.currentUser=function(){return this._currentUser},i.prototype.currentChannel=function(){return this._currentChannel},i.prototype.updateUser=function(e,t,r){var n=this,o=Parse.User.current(),i=t;if("profileFile"==e){var s=t;if("object"==typeof t){var a=t;a.files.length>0&&(s=a.files[0],name=s.name)}else"string"==typeof t&&(s={base64:t},name=n._currentUser.id+"_"+Date.now());i=new Parse.File(name,s)}o.set(e,i),o.save(null,{success:function(t){"profileFile"==e?n._currentUser.avatar=t.get("profileFile").url():n._currentUser[e]=i,r(null,t)},error:function(e,t){r(t,null)}})},i.prototype.searchUsers=function(t,r){var n=Parse.User.current(),o={keyword:t,pageNumber:1},i=o.pageSize||e,s=((o.pageNumber||1)-1)*i;if(o.keyword){var a=new Parse.Query(Parse.User);a.startsWith("username",o.keyword);var c=new Parse.Query(Parse.User);c.startsWith("nickName",o.keyword);var l=Parse.Query.or(a,c);s>0&&(l=l.skip(s)),l=l.limit(i).ascending("username"),l.find({success:function(e){e.reduceRight(function(e,t,r,o){t.id===n.id?o.splice(r,1):o[r]=u.fromUserToJSON(t)},[]),r(null,e)},error:function(e,t){r(t,null)}})}else r(null,[])},i.prototype.loadFollows=function(e){var t=Parse.User.current(),r=Parse.Object.extend("Follows"),n=new Parse.Query(r).equalTo("userFrom",t).include("userTo").ascending("nickName");n.find({success:function(t){e(null,t.map(u.fromFollowToJSON))},error:function(t,r){e(r,null)}})},i.prototype.createFollow=function(e,t){var r=!1;r=!("object"!=typeof e||!Array.isArray(e)),Parse.Cloud.run("follows-create",{id:e},{success:function(e){var n=[];try{n=e.map(u.fromFollowToJSON)}catch(o){console.error(o)}r?t(null,n):t(null,n[0])},error:function(e,r){t(r,null)}})},i.prototype.removeFollow=function(e,t){Parse.Cloud.run("follows-remove",{id:e},{success:function(e){t(null,e)},error:function(e,r){t(r,null)}})},i.prototype.openChannel=function(e,t,r){"function"!=typeof t||r||(r=t,t=void 0);var n=this;t?n._getChannelById(t,function(t,o){!t&&o&&o.channelId?(n._currentChannel=o,r(null,o)):n._createChat(e,r)}):n._createChat(e,r)},i.prototype.openSimpleChannel=function(e,t,r){var n=this,o={channelId:e};"function"!=typeof t||r||(r=t,t={}),t&&(n._currentUser=t);var i=new s(n,o);i._getSocket(function(e){n._currentChannel=i,r(null,i)})},i.prototype._connectGlobalChannel=function(){var e=this,t=e._currentUser.id;e.ajax("/node/"+e.appId+"-BG/"+encodeURIComponent(t),"GET",{},function(r,i){if(r)console.error(r),e._globalSocketConnected=!1;else if("ok"==i.status){var s=(i.result.server.name,i.result.server.url),a="A="+e.appId+"&U="+t;e._globalSocket=io.connect(s+"/background?"+a,n),e._globalSocket.on("connect",function(){o("global connection completed"),e._globalSocketConnected=!0}),e._globalSocket.on("disconnect",function(){console.warn("global disconnected"),e._globalSocketConnected=!1}),e._globalSocket.on("backgound-message",function(t){o("onGlobalMessage : ",t),"message"==t.NM&&t.DT&&e.onGlobalMessageCallback&&e.onGlobalMessageCallback(t.DT)})}})},i.prototype.onGlobalMessage=function(e){this.onGlobalMessageCallback=e},i.prototype._createChat=function(e,t){var r=this,n=[];return e&&0!=e.size?("object"==typeof e[0]?e.forEach(function(e){n.push(e.id)}):"string"==typeof e[0]&&(n=e),void Parse.Cloud.run("chats-create",{ids:n},{success:function(e){r._getChatById(e.id,function(e,n){r._currentChannel=n,t(null,n)})},error:function(e,r){t(r,null)}})):void t({message:"Invalid users"},null)},i.prototype._getChatById=function(e,t){var r=this,n=Parse.Object.extend("Chats");new Parse.Query(n).include("channel.users").get(e,{success:function(e){var n=new s(r,u.fromChatToJSON(e));r._channels[n.channelId]=n,t(null,n)},error:function(e,r){t(r,null)}})},i.prototype._getChannelById=function(e,t){var r=this,n=Parse.Object.extend("Channels");if(r._channels[e])return void t(null,r._channels[e]);new Parse.Query(n).get(e,{success:function(e){var n=new s(r,u.fromChannelToJSON(e));r._channels[n.channelId]=n,t(null,n)},error:function(e,r){t(r,null)}})},i.prototype.loadChannels=function(e){var t=Parse.User.current(),r=Parse.Object.extend("Chats"),n=new Parse.Query(r).equalTo("user",t).include("channel.users").descending("updatedAt");n.find({success:function(t){var r=t.map(u.fromChatToJSON);e(null,r)},error:function(t,r){e(r,null)}})};var s=function(e,t){var r=this;return r._stalk=e,t.id&&(r.id=t.id),r.channelId=t.channelId,t.createdAt&&(r.createdAt=t.createdAt),t.updatedAt&&(r.updatedAt=t.updatedAt),t.name&&(r.name=t.name),t.uid&&(r.uid=t.uid),t.users&&(r.users=t.users),e._currentUser&&(r._currentUser=e._currentUser),r._socket,r.onMessageCallback,r};s.prototype._getSocket=function(e){var t=this;t._socket&&t._socket.connected?e&&e(t._socket):t._getChannelNode(function(r,n){r||t._connectChannel(n,e)})},s.prototype._getChannelNode=function(e){var t=this;this._stalk.ajax("/node/"+t._stalk.appId+"/"+encodeURIComponent(t.channelId),"GET",{},function(r,n){if(r)e(r,null);else if("ok"==n.status){var o={app:t._stalk.appId,name:n.result.server.name,url:n.result.server.url};e(null,o)}})},s.prototype._connectChannel=function(e,t){var r=this,i=r._currentUser&&r._currentUser.id?r._currentUser.id:c.getUniqueKey();r._currentUser.id=i;var r=this,s="A="+r._stalk.appId+"&C="+r.channelId+"&U="+i+"&S="+e.name;r._socket=io.connect(e.url+"/channel?"+s,n),r._socket.on("connect",function(){o("channel connection completed"),r._connected=!0,t&&t(r._socket)}),r._socket.on("disconnect",function(){o("channel disconnected"),r._connected=!1}),r._socket.on("message",function(e){r.onMessageCallback&&("object"==typeof e&&e.user&&(e.user.id==r._currentUser.id&&(e.sent=!0),e.TS&&(e.createdAt=new Date(e.TS),e.created=c.dateToString(e.createdAt))),o("onMessage : ",e),r.onMessageCallback(e))})};var a=function(e,t){return t.createdAt<e.createdAt?1:t.createdAt>e.createdAt?-1:0};s.prototype.loadMessages=function(e,r){var n=this,o=Parse.Object.extend("Messages"),i=Parse.Object.extend("Channels"),s=new i;s.id=n.channelId,n._getSocket(function(e){});new Parse.Query(o).equalTo("channel",s).lessThan("createdAt",r?new Date(r):new Date).greaterThan("createdAt",new Date(n.createdAt)).descending("createdAt").include("user").limit(t).find({success:function(t){var r=t.map(u.fromMessageToJSON);e(null,r.sort(a))},error:function(t,r){e(r,null)}})},s.prototype.sendText=function(e){var t=this,r=t._currentUser,n={text:e,user:{id:r.id,username:r.username,nickName:r.nickName,avatar:r.avatar},_id:"temp-id-"+t.channelId+"_"+Date.now()};t._getSocket(function(e){e.emit("send",{NM:"message",DT:n})})},s.prototype.onMessage=function(e){this.onMessageCallback=e},s.prototype.sendImageUrl=function(e){var t=this,r=t._currentUser,n={image:e,user:{id:r.id,username:r.username,nickName:r.nickName,avatar:r.avatar},_id:"temp-id-"+t.channelId+"_"+Date.now()};t._getSocket(function(e){e.emit("send",{NM:"message",DT:n})})},s.prototype.sendImageFile=function(e,t){var r=this,n="",o="";if("object"==typeof e){var i=e;i.files.length>0&&(n=i.files[0],o=r.channelId+"_"+n.name)}else"string"==typeof e&&(n={base64:e},o=r.channelId+"_"+Date.now());if(!n)return void t("Invaild File",null);var s=new Parse.File(o,n),a=Parse.Object.extend("UploadFiles"),u=new a;if(Parse.User.current()){var c=new Parse.User;c.id=Parse.User.current().id,u.set("user",c)}u.set("file",s),u.save().then(function(){var n=s.url();e.value="",r.sendImageUrl(n),t&&t(null,n)},function(e){t&&t(e,null)})},s.prototype.addUserToChat=function(e,t){var r=this.channelId;Parse.Cloud.run("chats-add",{channelId:r,ids:e},{success:function(e){var r={};try{r=u.fromChatToJSON(e)}catch(n){console.error(n)}t(null,r)},error:function(e,r){t(r,null)}})};var u={};u.fromUserToJSON=function(e,t){var r=e.get("username"),n="";return n=e&&null!=e.get("profileFile")&&void 0!=e.get("profileFile")?e.get("profileFile").url():c.getDefaultProfile(r,t),{id:e.id,username:r,email:e.get("email"),nickName:e.get("nickName"),avatar:n,statusMessage:e.get("statusMessage")}},u.fromFollowToJSON=function(e){var t=e.get("userTo"),r=t.get("username"),n="";n=t&&null!=t.get("profileFile")&&void 0!=t.get("profileFile")?t.get("profileFile").url():c.getDefaultProfile(r);var o={followId:e.id,id:t.id,username:r,email:t.get("email"),nickName:t.get("nickName"),statusMessage:t.get("statusMessage"),avatar:n};return o},u.fromChatToJSON=function(e){if(!e)return null;var t,r,n,o,i;try{t=e.get("channel"),r=t.get("users"),o=[];var s=Parse.User.current();r.reduceRight(function(e,t,r,n){t.id===s.id?n.splice(r,1):(n[r]=u.fromUserToJSON(t),o.push(t.get("nickName")))},[]),n=o.join(", "),i=c.getDefaultProfile(n)}catch(a){return console.error("ajax error: "+a),{}}return{id:t.id,channelId:t.id,createdAt:e.get("createdAt"),updatedAt:e.get("updatedAt"),created:c.dateToString(e.get("createdAt")),updated:c.dateToString(e.get("updatedAt")),name:o.join(", "),uid:1==r.length?r[0].id:null,users:r,image:i}},u.fromChannelToJSON=function(e){if(!e)return null;var t,r,n,o,i;try{t=e,r=t.get("users"),o=[];var s=Parse.User.current();r.reduceRight(function(e,t,r,n){t.id===s.id?n.splice(r,1):(n[r]=u.fromUserToJSON(t),o.push(t.get("nickName")))},[]),n=o.join(", "),i=c.getDefaultProfile(n)}catch(a){return console.error("ajax error: "+a),{}}return{id:t.id,channelId:t.id,createdAt:t.get("createdAt"),updatedAt:t.get("updatedAt"),created:c.dateToString(t.get("createdAt")),updated:c.dateToString(t.get("updatedAt")),name:o.join(", "),uid:1==r.length?r[0].id:null,users:r,image:i}},u.fromMessageToJSON=function(e){var t=e.get("user"),r=t.get("username"),n=t.get("profileFile")?t.get("profileFile").url():c.getDefaultProfile(r),o=Parse.User.current();return{_id:e.id,text:e.get("message"),createdAt:e.createdAt,created:c.dateToString(e.createdAt),user:{id:t.id,username:t.get("username"),nickName:t.get("nickName"),avatar:n},sent:t.id==o.id,image:e.get("image")}};var c={};c.getDefaultProfile=function(e,t){var r="https://cdn-enterprise.discourse.org/ionicframework/user_avatar/forum.ionicframework.com/dtrujo/90/12150_1.png";if(e.search(/[^a-zA-Z0-9]+/)===-1){var n=e.substring(0,1),o=c.getRGBFromStr(e);t||(t=50),r="https://avatars.discourse.org/v2/letter/"+n+"/"+o+"/"+t+".png"}return r},c.getRGBFromStr=function(e){return c.intToRGB(c.hashCode(e))},c.hashCode=function(e){for(var t=0,r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);return t},c.intToRGB=function(e){var t=(16777215&e).toString(16).toUpperCase();return"00000".substring(0,6-t.length)+t},c.getUniqueKey=function(){for(var e=[],t="0123456789ABCDEF",r=0;r<36;r++)e[r]=Math.floor(16*Math.random());e[14]=4,e[19]=3&e[19]|8;for(var n=0;n<36;n++)e[n]=t[e[n]];return e[8]=e[13]=e[18]=e[23]="-",e.join("")},c.dateToString=function(e,t){var r=new Date,n=r.getFullYear()+""+(r.getMonth()+1)+r.getDate(),o=new Date(e),i=o.getFullYear(),s=o.getMonth()+1;s=s>=10?""+s:"0"+s;var a=o.getDate();a=a>=10?""+a:"0"+a;var u=o.getHours();u=u>=10?u:"0"+u;var c=o.getMinutes();c=c>=10?""+c:"0"+c;var l=o.getSeconds();l=l>=10?""+l:"0"+l;var f=i+""+s+a,d=[];return n!=f?d.push(i+"-"+s+"-"+a):d.push(u+":"+c+":"+l),d.push(i+"-"+s+"-"+a),d.push(u+":"+c+":"+l),d.push(i+"-"+s+"-"+a+" "+u+":"+c+":"+l),d.push(o.toLocaleTimeString()),void 0==t&&(t=3),d[t]};var l=function(e,t,r,n,o){var i=this;"function"!=typeof n||o||(o=n,n=void 0);var s=i.hostname.replace("http://",""),a=8e3;s.indexOf(":")>0&&(s=s.split(":")[0],a=s.split(":")[1]);var u={host:s,port:a,path:e,method:t};n?u.headers=n:u.headers={},u.headers["Content-Type"]="application/json";var c="",l=http.request(u,function(e){e.setEncoding("utf8"),e.on("data",function(e){c+=e}),e.on("end",function(){var e=JSON.parse(c);"ok"!=e.status?o(e.status,e.message):o(null,e)})}).on("error",function(e){console.error("ajax error: "+e.message),o("",c)});t.toLowerCase()!=="GET".toLowerCase()&&l.write(JSON.stringify(r)),l.end()},f=function(e,t,r,n,i){var s=this;"function"!=typeof n||i||(i=n,n=!1);var a;try{a=new XMLHttpRequest}catch(u){try{a=new XDomainRequest}catch(u){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(u){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(u){console.error("\nYour browser is not compatible with XPUSH AJAX")}}}}var c=s.hostname+e,l=Object.keys(r).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])}).join("&");if(t="get"==t.toLowerCase()?"GET":"POST",l=null==l||""==l?null:l,"GET"==t&&null!=l&&(c=c+"?"+l),a.open(t,c,!0),a.onreadystatechange=function(){if(!(a.readyState<4)&&(200!==a.status&&(o("stalk : ajax error",s.hostname+e,l),i(a.status,{})),4===a.readyState)){var t=JSON.parse(a.responseText);"ok"!=t.status?i(t.status,t.message):i(null,t)}},o("stalk : ajax ",s.hostname+e,t,l),n)for(var f in n)n.hasOwnProperty(f)&&a.setRequestHeader(f,n[f]);a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send("POST"==t?l:null)};return"undefined"!=typeof module&&"undefined"!=typeof module.exports?i.prototype.ajax=l:i.prototype.ajax=f,i}();"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=r:"function"==typeof define&&define.amd?define([],function(){return r}):window.Stalk=r}();